exports.id=46,exports.ids=[46],exports.modules={162:(e,t,r)=>{"use strict";r.d(t,{If:()=>s.I,gE:()=>n.g,Bd:()=>o.Bd,Qg:()=>o.Qg,N6:()=>o.N6,bJ:()=>i.b,qx:()=>o.qx,tX:()=>o.tX,lV:()=>o.lV,p7:()=>o.p7,Al:()=>a.A,SW:()=>a.S});var n=r(74864),i=r(15044);r(77598),r(28322);var o=r(27017),a=r(57004),s=r(46587)},333:(e,t,r)=>{"use strict";let n=r(59097);e.exports=(e,t,r)=>n(e,t,">",r)},1776:(e,t,r)=>{"use strict";let n=r(39335);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},2701:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t)=>new n(e,t).patch},2720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{AppRenderSpan:function(){return c},AppRouteRouteHandlersSpan:function(){return d},BaseServerSpan:function(){return r},LoadComponentsSpan:function(){return n},LogSpanAllowList:function(){return g},MiddlewareSpan:function(){return p},NextNodeServerSpan:function(){return o},NextServerSpan:function(){return i},NextVanillaSpanAllowlist:function(){return f},NodeSpan:function(){return u},RenderSpan:function(){return s},ResolveMetadataSpan:function(){return h},RouterSpan:function(){return l},StartServerSpan:function(){return a}});var r=function(e){return e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404",e}(r||{}),n=function(e){return e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents",e}(n||{}),i=function(e){return e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer",e}(i||{}),o=function(e){return e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch",e}(o||{}),a=function(e){return e.startServer="startServer.startServer",e}(a||{}),s=function(e){return e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult",e}(s||{}),c=function(e){return e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch",e}(c||{}),l=function(e){return e.executeRoute="Router.executeRoute",e}(l||{}),u=function(e){return e.runHandler="Node.runHandler",e}(u||{}),d=function(e){return e.runHandler="AppRouteRouteHandlers.runHandler",e}(d||{}),h=function(e){return e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport",e}(h||{}),p=function(e){return e.execute="Middleware.execute",e}(p||{});let f=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],g=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},3213:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(86185),i=r(81299),o=r(96908),a=r(23598);function s(e={}){var t;return{name:"defaultRetryPolicy",sendRequest:(0,o.J)([(0,i.P)(),(0,n.xB)(e)],{maxRetries:null!=(t=e.maxRetries)?t:a.o}).sendRequest}}},3386:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},4215:(e,t,r)=>{"use strict";let n=r(39335);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},4431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(37461),i=r(39413),o=r(97683),a=r(21351),s=r(75124),c=r(38248);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4658:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>n(t,e,r)},5415:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(8983):e.exports=r(82493)},6035:(e,t,r)=>{"use strict";let n=r(14494);e.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},6475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return o},findSourceMapURL:function(){return i.findSourceMapURL}});let n=r(11264),i=r(11448),o=r(19357).createServerReference},6532:e=>{"use strict";class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},6557:e=>{"use strict";function t(e){return(e/8|0)+ +(e%8!=0)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},7153:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].React},7270:(e,t,r)=>{"use strict";let n=r(91680),i=r(14494),{safeRe:o,t:a}=r(67548);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,i=t.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===r)return null;let s=r[2],c=r[3]||"0",l=r[4]||"0",u=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${c}.${l}${u}${d}`,t)}},8983:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(95006)(t);let{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},11882:(e,t,r)=>{"use strict";let n;r.d(t,{KV:()=>C,MX:()=>b});var i=r(48161),o=r(57975),a=r(1708);let s="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,c=[],l=[],u=[];s&&h(s);let d=Object.assign(e=>f(e),{enable:h,enabled:p,disable:function(){let e=n||"";return h(""),e},log:function(e,...t){a.stderr.write(`${o.format(e,...t)}${i.EOL}`)}});function h(e){n=e,c=[],l=[];let t=/\*/g;for(let r of e.split(",").map(e=>e.trim().replace(t,".*?")))r.startsWith("-")?l.push(RegExp(`^${r.substr(1)}$`)):c.push(RegExp(`^${r}$`));for(let e of u)e.enabled=p(e.namespace)}function p(e){if(e.endsWith("*"))return!0;for(let t of l)if(t.test(e))return!1;for(let t of c)if(t.test(e))return!0;return!1}function f(e){let t=Object.assign(function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))},{enabled:p(e),destroy:g,log:d.log,namespace:e,extend:m});return u.push(t),t}function g(){let e=u.indexOf(this);return e>=0&&(u.splice(e,1),!0)}function m(e){let t=f(`${this.namespace}:${e}`);return t.log=this.log,t}let y=["verbose","info","warning","error"],v={verbose:400,info:300,warning:200,error:100};function E(e,t){t.log=(...t)=>{e.log(...t)}}function T(e){return y.includes(e)}function b(e){let t,r=new Set,n="undefined"!=typeof process&&process.env&&process.env[e.logLevelEnvVarName]||void 0,i=d(e.namespace);function o(e){if(e&&!T(e))throw Error(`Unknown log level '${e}'. Acceptable values: ${y.join(",")}`);t=e;let n=[];for(let e of r)a(e)&&n.push(e.namespace);d.enable(n.join(","))}function a(e){return!!(t&&v[e.level]<=v[t])}function s(e,t){let n=Object.assign(e.extend(t),{level:t});if(E(e,n),a(n)){let e=d.disable();d.enable(e+","+n.namespace)}return r.add(n),n}return i.log=(...e)=>{d.log(...e)},n&&(T(n)?o(n):console.error(`${e.logLevelEnvVarName} set to unknown log level '${n}'; logging is not enabled. Acceptable values: ${y.join(", ")}.`)),{setLogLevel:o,getLogLevel:function(){return t},createClientLogger:function(e){let t=i.extend(e);return E(i,t),{error:s(t,"error"),warning:s(t,"warning"),info:s(t,"info"),verbose:s(t,"verbose")}},logger:i}}let A=b({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function C(e){return A.createClientLogger(e)}A.logger},12323:(e,t,r)=>{"use strict";r.d(t,{J:()=>g,u:()=>p});var n=r(57004),i=r(76504),o=r(28322),a=r(61514),s=r(27910);function c(){return(0,a.AQ)(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:t,value:r}=yield(0,a.N3)(e.read());if(t)return yield(0,a.N3)(void 0);yield yield(0,a.N3)(r)}}finally{e.releaseLock()}})}function l(e){return e instanceof ReadableStream?(e[Symbol.asyncIterator]||(e[Symbol.asyncIterator]=c.bind(e)),e.values||(e.values=c.bind(e)),s.Readable.fromWeb(e)):e}function u(e){return e instanceof Uint8Array?s.Readable.from(Buffer.from(e)):(0,i.qf)(e)?l(e.stream()):l(e)}async function d(e){return function(){let t=e.map(e=>"function"==typeof e?e():e).map(u);return s.Readable.from(function(){return(0,a.AQ)(this,arguments,function*(){var e,r,n,i;for(let l of t)try{for(var o,s=!0,c=(r=void 0,(0,a.xN)(l));!(e=(o=yield(0,a.N3)(c.next())).done);s=!0)i=o.value,s=!1,yield yield(0,a.N3)(i)}catch(e){r={error:e}}finally{try{!s&&!e&&(n=c.return)&&(yield(0,a.N3)(n.call(c)))}finally{if(r)throw r.error}}})}())}}async function h(e,t,r){let o=[(0,n.A)(`--${r}`,"utf-8"),...t.flatMap(e=>[(0,n.A)("\r\n","utf-8"),(0,n.A)(function(e){let t="";for(let[r,n]of e)t+=`${r}: ${n}\r
`;return t}(e.headers),"utf-8"),(0,n.A)("\r\n","utf-8"),e.body,(0,n.A)(`\r
--${r}`,"utf-8")]),(0,n.A)("--\r\n\r\n","utf-8")],a=function(e){let t=0;for(let r of e){let e=r instanceof Uint8Array?r.byteLength:(0,i.qf)(r)?-1===r.size?void 0:r.size:void 0;if(void 0===e)return;t+=e}return t}(o);a&&e.headers.set("Content-Length",a),e.body=await d(o)}let p="multipartPolicy",f=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function g(){return{name:p,async sendRequest(e,t){var r;if(!e.multipartBody)return t(e);if(e.body)throw Error("multipartBody and regular body cannot be set at the same time");let n=e.multipartBody.boundary,i=null!=(r=e.headers.get("Content-Type"))?r:"multipart/mixed",a=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!a)throw Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,s,c]=a;if(c&&n&&c!==n)throw Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);if(null!=n||(n=c),n){var l=n;if(l.length>70)throw Error(`Multipart boundary "${l}" exceeds maximum length of 70 characters`);if(Array.from(l).some(e=>!f.has(e)))throw Error(`Multipart boundary "${l}" contains invalid characters`)}else n=`----AzSDKFormBoundary${(0,o.N)()}`;return e.headers.set("Content-Type",`${s}; boundary=${n}`),await h(e,e.multipartBody.parts,n),e.multipartBody=void 0,t(e)}}}},13944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return r}});class r{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},14494:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},14964:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>n(e,t,r)>0},15044:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var n=r(49575);function i(e){if((0,n.G)(e)){let t="string"==typeof e.name,r="string"==typeof e.message;return t&&r}return!1}},15378:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>0>=n(e,t,r)},15529:(e,t,r)=>{"use strict";r.d(t,{H:()=>o,c:()=>i});var n=r(70767);function i(e,t,r){return new Promise((i,o)=>{let a,s,c=()=>o(new n.l((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:"The operation was aborted.")),l=()=>{(null==r?void 0:r.abortSignal)&&s&&r.abortSignal.removeEventListener("abort",s)};if(s=()=>(a&&clearTimeout(a),l(),c()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return c();a=setTimeout(()=>{l(),i(t)},e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",s)})}function o(e,t){let r=e.headers.get(t);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}},18186:(e,t,r)=>{"use strict";function n(){return{name:"decompressResponsePolicy",sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))}}r.d(t,{r:()=>n})},18389:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},20235:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>0===n(e,t,r)},20294:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});let n=["GET","HEAD"];function i(e={}){let{maxRetries:t=20}=e;return{name:"redirectPolicy",async sendRequest(e,r){let n=await r(e);return o(r,n,t)}}}async function o(e,t,r,i=0){let{request:a,status:s,headers:c}=t,l=c.get("location");if(l&&(300===s||301===s&&n.includes(a.method)||302===s&&n.includes(a.method)||303===s&&"POST"===a.method||307===s)&&i<r){let t=new URL(l,a.url);a.url=t.toString(),303===s&&(a.method="GET",a.headers.delete("Content-Length"),delete a.body),a.headers.delete("Authorization");let n=await e(a);return o(e,n,r,i+1)}return t}},20540:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.req=t.json=t.toBuffer=void 0;let a=o(r(81630)),s=o(r(55591));async function c(e){let t=0,r=[];for await(let n of e)t+=n.length,r.push(n);return Buffer.concat(r,t)}t.toBuffer=c,t.json=async function(e){let t=(await c(e)).toString("utf8");try{return JSON.parse(t)}catch(e){throw e.message+=` (input: ${t})`,e}},t.req=function(e,t={}){let r=(("string"==typeof e?e:e.href).startsWith("https:")?s:a).request(e,t),n=new Promise((e,t)=>{r.once("response",e).once("error",t).end()});return r.then=n.then.bind(n),r}},21351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=r(32913),i=r(59311);function o(e){return(0,i.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},21445:(e,t,r)=>{"use strict";let n=r(14494);e.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},23302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"InvariantError",{enumerable:!0,get:function(){return r}});class r extends Error{constructor(e,t){super("Invariant: "+(e.endsWith(".")?e:e+".")+" This is a bug in Next.js.",t),this.name="InvariantError"}}},23598:(e,t,r)=>{"use strict";r.d(t,{M:()=>n,o:()=>i});let n="0.3.0",i=3},23879:(e,t)=>{"use strict";function r(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isThenable",{enumerable:!0,get:function(){return r}})},24796:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},24853:(e,t,r)=>{e.exports=r(78905).satisfies(process.version,"^6.12.0 || >=8.0.0")},25313:e=>{var t,r,n=Object.prototype,i=Function.prototype.toString,o=n.hasOwnProperty,a=i.call(Object),s=n.toString,c=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=s.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=c(e);if(null===t)return!0;var r=o.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==a}},26364:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});class n extends Error{constructor(e){super(e),this.name="AbortError"}}},27017:(e,t,r)=>{"use strict";var n,i,o,a;r.d(t,{Bd:()=>s,N6:()=>l,Qg:()=>u,lV:()=>p,p7:()=>c,qx:()=>d,tX:()=>h});let s="undefined"!=typeof window&&void 0!==window.document,c="object"==typeof self&&"function"==typeof(null==self?void 0:self.importScripts)&&((null==(n=self.constructor)?void 0:n.name)==="DedicatedWorkerGlobalScope"||(null==(i=self.constructor)?void 0:i.name)==="ServiceWorkerGlobalScope"||(null==(o=self.constructor)?void 0:o.name)==="SharedWorkerGlobalScope"),l="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,u="undefined"!=typeof Bun&&void 0!==Bun.version,d=void 0!==globalThis.process&&!!globalThis.process.version&&!!(null==(a=globalThis.process.versions)?void 0:a.node),h=d&&!u&&!l,p="undefined"!=typeof navigator&&(null==navigator?void 0:navigator.product)==="ReactNative"},27699:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},27878:(e,t,r)=>{var n=r(79737),i=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i},28322:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var n,i=r(77598);let o="function"==typeof(null==(n=null==globalThis?void 0:globalThis.crypto)?void 0:n.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):i.randomUUID;function a(){return o()}},30800:(e,t,r)=>{"use strict";r.d(t,{j:()=>a});var n=r(57004),i=r(27017),o=r(75239);function a(){return{name:"formDataPolicy",async sendRequest(e,t){if(i.qx&&"undefined"!=typeof FormData&&e.body instanceof FormData&&(e.formData=function(e){var t;let r={};for(let[t,n]of e.entries())null!=r[t]||(r[t]=[]),r[t].push(n);return r}(e.body),e.body=void 0),e.formData){let t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=function(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,e.toString());else t.append(r,n.toString());return t.toString()}(e.formData):await s(e.formData,e),e.formData=void 0}return t(e)}}}async function s(e,t){let r=t.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",null!=r?r:"multipart/form-data");let i=[];for(let[t,r]of Object.entries(e))for(let e of Array.isArray(r)?r:[r])if("string"==typeof e)i.push({headers:(0,o.N)({"Content-Disposition":`form-data; name="${t}"`}),body:(0,n.A)(e,"utf-8")});else if(null==e||"object"!=typeof e)throw Error(`Unexpected value for key ${t}: ${e}. Value should be serialized to string first.`);else{let r=e.name||"blob",n=(0,o.N)();n.set("Content-Disposition",`form-data; name="${t}"; filename="${r}"`),n.set("Content-Type",e.type||"application/octet-stream"),i.push({headers:n,body:e})}t.multipartBody={parts:i}}},31461:(e,t)=>{"use strict";t.w=void 0,t.w={operationRequestMap:new WeakMap}},31495:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>0!==n(e,t,r)},32276:(e,t,r)=>{"use strict";let n=r(14494);e.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;let a=o>0,s=a?r:i,c=a?i:r,l=!!s.prerelease.length;if(c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(0===c.compareMain(s))return c.minor&&!c.patch?"minor":"patch"}let u=l?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"}},32825:(e,t,r)=>{var n=r(91571).Buffer,i=r(67780),o=r(77047),a=r(27910),s=r(56895),c=r(28354);function l(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(e){var t,r,n,i=e.header,a=e.payload,u=e.secret||e.privateKey,d=e.encoding,h=o(i.alg),p=(t=(t=d)||"utf8",r=l(s(i),"binary"),n=l(s(a),t),c.format("%s.%s",r,n)),f=h.sign(p,u);return c.format("%s.%s",p,f)}function d(e){var t=new i(e.secret||e.privateKey||e.key);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new i(e.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}c.inherits(d,a),d.prototype.sign=function(){try{var e=u({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=u,e.exports=d},32913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return s},getAccessFallbackHTTPStatus:function(){return a},isHTTPAccessFallbackError:function(){return o}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),i="NEXT_HTTP_ERROR_FALLBACK";function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&n.has(Number(r))}function a(e){return Number(e.digest.split(";")[1])}function s(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},32977:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t,r)=>{let i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},33331:(e,t)=>{"use strict";function r(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(t,"D",{enumerable:!0,get:function(){return r}})},33901:(e,t,r)=>{"use strict";var n=r(79428).Buffer,i=r(79428).SlowBuffer;function o(e,t){if(!n.isBuffer(e)||!n.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}e.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var a=n.prototype.equal,s=i.prototype.equal;o.restore=function(){n.prototype.equal=a,i.prototype.equal=s}},34360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{chainStreams:function(){return h},continueDynamicHTMLResume:function(){return R},continueDynamicPrerender:function(){return _},continueFizzStream:function(){return S},continueStaticPrerender:function(){return I},createBufferedTransformStream:function(){return y},createDocumentClosingStream:function(){return w},createRootLayoutValidatorStream:function(){return C},renderToInitialFizzStream:function(){return v},streamFromBuffer:function(){return f},streamFromString:function(){return p},streamToBuffer:function(){return g},streamToString:function(){return m}});let n=r(44334),i=r(2720),o=r(13944),a=r(97748),s=r(42503),c=r(88477),l=r(54806);function u(){}let d=new TextEncoder;function h(...e){if(0===e.length)throw Object.defineProperty(Error("Invariant: chainStreams requires at least one stream"),"__NEXT_ERROR_CODE",{value:"E437",enumerable:!1,configurable:!0});if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),i=1;for(;i<e.length-1;i++){let t=e[i];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let o=e[i];return(n=n.then(()=>o.pipeTo(r))).catch(u),t}function p(e){return new ReadableStream({start(t){t.enqueue(d.encode(e)),t.close()}})}function f(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}async function g(e){let t=e.getReader(),r=[];for(;;){let{done:e,value:n}=await t.read();if(e)break;r.push(n)}return Buffer.concat(r)}async function m(e,t){let r=new TextDecoder("utf-8",{fatal:!0}),n="";for await(let i of e){if(null==t?void 0:t.aborted)return n;n+=r.decode(i,{stream:!0})}return n+r.decode()}function y(){let e,t=[],r=0,n=n=>{if(e)return;let i=new o.DetachedPromise;e=i,(0,a.scheduleImmediate)(()=>{try{let e=new Uint8Array(r),i=0;for(let r=0;r<t.length;r++){let n=t[r];e.set(n,i),i+=n.byteLength}t.length=0,r=0,n.enqueue(e)}catch{}finally{e=void 0,i.resolve()}})};return new TransformStream({transform(e,i){t.push(e),r+=e.byteLength,n(i)},flush(){if(e)return e.promise}})}function v({ReactDOMServer:e,element:t,streamOptions:r}){return(0,n.getTracer)().trace(i.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function E(e){let t=!1,r=!1;return new TransformStream({async transform(n,i){r=!0;let o=await e();if(t){if(o){let e=d.encode(o);i.enqueue(e)}i.enqueue(n)}else{let e=(0,c.indexOfUint8Array)(n,s.ENCODED_TAGS.CLOSED.HEAD);if(-1!==e){if(o){let t=d.encode(o),r=new Uint8Array(n.length+t.length);r.set(n.slice(0,e)),r.set(t,e),r.set(n.slice(e),e+t.length),i.enqueue(r)}else i.enqueue(n);t=!0}else o&&i.enqueue(d.encode(o)),i.enqueue(n),t=!0}},async flush(t){if(r){let r=await e();r&&t.enqueue(d.encode(r))}}})}function T(e){let t=null,r=!1;async function n(n){if(t)return;let i=e.getReader();await (0,a.atLeastOneTask)();try{for(;;){let{done:e,value:t}=await i.read();if(e){r=!0;return}n.enqueue(t)}}catch(e){n.error(e)}}return new TransformStream({transform(e,r){r.enqueue(e),t||(t=n(r))},flush(e){if(!r)return t||n(e)}})}let b="</body></html>";function A(){let e=!1;return new TransformStream({transform(t,r){if(e)return r.enqueue(t);let n=(0,c.indexOfUint8Array)(t,s.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(n>-1){if(e=!0,t.length===s.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let i=t.slice(0,n);if(r.enqueue(i),t.length>s.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+n){let e=t.slice(n+s.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);r.enqueue(e)}}else r.enqueue(t)},flush(e){e.enqueue(s.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function C(){let e=!1,t=!1;return new TransformStream({async transform(r,n){!e&&(0,c.indexOfUint8Array)(r,s.ENCODED_TAGS.OPENING.HTML)>-1&&(e=!0),!t&&(0,c.indexOfUint8Array)(r,s.ENCODED_TAGS.OPENING.BODY)>-1&&(t=!0),n.enqueue(r)},flush(r){let n=[];e||n.push("html"),t||n.push("body"),n.length&&r.enqueue(d.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${n.map(e=>`<${e}>`).join(n.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags""
              data-next-error-digest="${l.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}async function S(e,{suffix:t,inlinedDataStream:r,isStaticGeneration:n,getServerInsertedHTML:i,getServerInsertedMetadata:s,validateRootLayout:c}){let l=t?t.split(b,1)[0]:null;n&&"allReady"in e&&await e.allReady;var u=[y(),E(s),null!=l&&l.length>0?function(e){let t,r=!1,n=r=>{let n=new o.DetachedPromise;t=n,(0,a.scheduleImmediate)(()=>{try{r.enqueue(d.encode(e))}catch{}finally{t=void 0,n.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,n(t))},flush(n){if(t)return t.promise;r||n.enqueue(d.encode(e))}})}(l):null,r?T(r):null,c?C():null,A(),E(i)];let h=e;for(let e of u)e&&(h=h.pipeThrough(e));return h}async function _(e,{getServerInsertedHTML:t,getServerInsertedMetadata:r}){return e.pipeThrough(y()).pipeThrough(new TransformStream({transform(e,t){(0,c.isEquivalentUint8Arrays)(e,s.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,c.isEquivalentUint8Arrays)(e,s.ENCODED_TAGS.CLOSED.BODY)||(0,c.isEquivalentUint8Arrays)(e,s.ENCODED_TAGS.CLOSED.HTML)||(e=(0,c.removeFromUint8Array)(e,s.ENCODED_TAGS.CLOSED.BODY),e=(0,c.removeFromUint8Array)(e,s.ENCODED_TAGS.CLOSED.HTML),t.enqueue(e))}})).pipeThrough(E(t)).pipeThrough(E(r))}async function I(e,{inlinedDataStream:t,getServerInsertedHTML:r,getServerInsertedMetadata:n}){return e.pipeThrough(y()).pipeThrough(E(r)).pipeThrough(E(n)).pipeThrough(T(t)).pipeThrough(A())}async function R(e,{inlinedDataStream:t,getServerInsertedHTML:r,getServerInsertedMetadata:n}){return e.pipeThrough(y()).pipeThrough(E(r)).pipeThrough(E(n)).pipeThrough(T(t)).pipeThrough(A())}function w(){return p(b)}},34821:(e,t,r)=>{"use strict";var n=r(68790),i={stream:!0},o=new Map;function a(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function s(){}function c(e){for(var t=e[1],n=[],i=0;i<t.length;){var c=t[i++];t[i++];var l=o.get(c);if(void 0===l){l=r.e(c),n.push(l);var u=o.set.bind(o,c,null);l.then(u,s),o.set(c,l)}else null!==l&&n.push(l)}return 4===e.length?0===n.length?a(e[0]):Promise.all(n).then(function(){return a(e[0])}):0<n.length?Promise.all(n):null}function l(e){var t=globalThis.__next_require__(e[0]);if(4===e.length&&"function"==typeof t.then)if("fulfilled"===t.status)t=t.value;else throw t.reason;return"*"===e[2]?t:""===e[2]?t.__esModule?t.default:t:t[e[2]]}var u=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,d=Symbol.for("react.transitional.element"),h=Symbol.for("react.lazy"),p=Symbol.iterator,f=Symbol.asyncIterator,g=Array.isArray,m=Object.getPrototypeOf,y=Object.prototype,v=new WeakMap;function E(e,t,r,n,i){function o(e,r){r=new Blob([new Uint8Array(r.buffer,r.byteOffset,r.byteLength)]);var n=c++;return null===u&&(u=new FormData),u.append(t+n,r),"$"+e+n.toString(16)}function a(e,b){if(null===b)return null;if("object"==typeof b){switch(b.$$typeof){case d:if(void 0!==r&&-1===e.indexOf(":")){var A,C,S,_,I,R=E.get(this);if(void 0!==R)return r.set(R+":"+e,b),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case h:R=b._payload;var w=b._init;null===u&&(u=new FormData),l++;try{var O=w(R),k=c++,P=s(O,k);return u.append(t+k,P),"$"+k.toString(16)}catch(e){if("object"==typeof e&&null!==e&&"function"==typeof e.then){l++;var N=c++;return R=function(){try{var e=s(b,N),r=u;r.append(t+N,e),l--,0===l&&n(r)}catch(e){i(e)}},e.then(R,R),"$"+N.toString(16)}return i(e),null}finally{l--}}if("function"==typeof b.then){null===u&&(u=new FormData),l++;var M=c++;return b.then(function(e){try{var r=s(e,M);(e=u).append(t+M,r),l--,0===l&&n(e)}catch(e){i(e)}},i),"$@"+M.toString(16)}if(void 0!==(R=E.get(b)))if(T!==b)return R;else T=null;else -1===e.indexOf(":")&&void 0!==(R=E.get(this))&&(e=R+":"+e,E.set(b,e),void 0!==r&&r.set(e,b));if(g(b))return b;if(b instanceof FormData){null===u&&(u=new FormData);var D=u,x=t+(e=c++)+"_";return b.forEach(function(e,t){D.append(x+t,e)}),"$K"+e.toString(16)}if(b instanceof Map)return e=c++,R=s(Array.from(b),e),null===u&&(u=new FormData),u.append(t+e,R),"$Q"+e.toString(16);if(b instanceof Set)return e=c++,R=s(Array.from(b),e),null===u&&(u=new FormData),u.append(t+e,R),"$W"+e.toString(16);if(b instanceof ArrayBuffer)return e=new Blob([b]),R=c++,null===u&&(u=new FormData),u.append(t+R,e),"$A"+R.toString(16);if(b instanceof Int8Array)return o("O",b);if(b instanceof Uint8Array)return o("o",b);if(b instanceof Uint8ClampedArray)return o("U",b);if(b instanceof Int16Array)return o("S",b);if(b instanceof Uint16Array)return o("s",b);if(b instanceof Int32Array)return o("L",b);if(b instanceof Uint32Array)return o("l",b);if(b instanceof Float32Array)return o("G",b);if(b instanceof Float64Array)return o("g",b);if(b instanceof BigInt64Array)return o("M",b);if(b instanceof BigUint64Array)return o("m",b);if(b instanceof DataView)return o("V",b);if("function"==typeof Blob&&b instanceof Blob)return null===u&&(u=new FormData),e=c++,u.append(t+e,b),"$B"+e.toString(16);if(e=null===(A=b)||"object"!=typeof A?null:"function"==typeof(A=p&&A[p]||A["@@iterator"])?A:null)return(R=e.call(b))===b?(e=c++,R=s(Array.from(R),e),null===u&&(u=new FormData),u.append(t+e,R),"$i"+e.toString(16)):Array.from(R);if("function"==typeof ReadableStream&&b instanceof ReadableStream)return function(e){try{var r,o,s,d,h,p,f,g=e.getReader({mode:"byob"})}catch(d){return r=e.getReader(),null===u&&(u=new FormData),o=u,l++,s=c++,r.read().then(function e(c){if(c.done)o.append(t+s,"C"),0==--l&&n(o);else try{var u=JSON.stringify(c.value,a);o.append(t+s,u),r.read().then(e,i)}catch(e){i(e)}},i),"$R"+s.toString(16)}return d=g,null===u&&(u=new FormData),h=u,l++,p=c++,f=[],d.read(new Uint8Array(1024)).then(function e(r){r.done?(r=c++,h.append(t+r,new Blob(f)),h.append(t+p,'"$o'+r.toString(16)+'"'),h.append(t+p,"C"),0==--l&&n(h)):(f.push(r.value),d.read(new Uint8Array(1024)).then(e,i))},i),"$r"+p.toString(16)}(b);if("function"==typeof(e=b[f]))return C=b,S=e.call(b),null===u&&(u=new FormData),_=u,l++,I=c++,C=C===S,S.next().then(function e(r){if(r.done){if(void 0===r.value)_.append(t+I,"C");else try{var o=JSON.stringify(r.value,a);_.append(t+I,"C"+o)}catch(e){i(e);return}0==--l&&n(_)}else try{var s=JSON.stringify(r.value,a);_.append(t+I,s),S.next().then(e,i)}catch(e){i(e)}},i),"$"+(C?"x":"X")+I.toString(16);if((e=m(b))!==y&&(null===e||null!==m(e))){if(void 0===r)throw Error("Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.");return"$T"}return b}if("string"==typeof b)return"Z"===b[b.length-1]&&this[e]instanceof Date?"$D"+b:e="$"===b[0]?"$"+b:b;if("boolean"==typeof b)return b;if("number"==typeof b)return Number.isFinite(b)?0===b&&-1/0==1/b?"$-0":b:1/0===b?"$Infinity":-1/0===b?"$-Infinity":"$NaN";if(void 0===b)return"$undefined";if("function"==typeof b){if(void 0!==(R=v.get(b)))return e=JSON.stringify({id:R.id,bound:R.bound},a),null===u&&(u=new FormData),R=c++,u.set(t+R,e),"$F"+R.toString(16);if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(R=E.get(this)))return r.set(R+":"+e,b),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof b){if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(R=E.get(this)))return r.set(R+":"+e,b),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof b)return"$n"+b.toString(10);throw Error("Type "+typeof b+" is not supported as an argument to a Server Function.")}function s(e,t){return"object"==typeof e&&null!==e&&(t="$"+t.toString(16),E.set(e,t),void 0!==r&&r.set(t,e)),T=e,JSON.stringify(e,a)}var c=1,l=0,u=null,E=new WeakMap,T=e,b=s(e,0);return null===u?n(b):(u.set(t+"0",b),0===l&&n(u)),function(){0<l&&(l=0,null===u?n(b):n(u))}}var T=new WeakMap;function b(e){var t=v.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=T.get(t))||(n={id:t.id,bound:t.bound},a=new Promise(function(e,t){i=e,o=t}),E(n,"",void 0,function(e){if("string"==typeof e){var t=new FormData;t.append("0",e),e=t}a.status="fulfilled",a.value=e,i(e)},function(e){a.status="rejected",a.reason=e,o(e)}),r=a,T.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n,i,o,a,s=new FormData;t.forEach(function(t,r){s.append("$ACTION_"+e+":"+r,t)}),r=s,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function A(e,t){var r=v.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function C(e,t,r,n){v.has(e)||(v.set(e,{id:t,originalBind:e.bind,bound:r}),Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===n?b:function(){var e=v.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),n(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:A},bind:{value:I}}))}var S=Function.prototype.bind,_=Array.prototype.slice;function I(){var e=v.get(this);if(!e)return S.apply(this,arguments);var t=e.originalBind.apply(this,arguments),r=_.call(arguments,1),n=null;return n=null!==e.bound?Promise.resolve(e.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),v.set(t,{id:e.id,originalBind:t.bind,bound:n}),Object.defineProperties(t,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:A},bind:{value:I}}),t}function R(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function w(e){switch(e.status){case"resolved_model":$(e);break;case"resolved_module":j(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":throw e;default:throw e.reason}}function O(e){return new R("pending",null,null,e)}function k(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function P(e,t,r){switch(e.status){case"fulfilled":k(t,e.value);break;case"pending":case"blocked":if(e.value)for(var n=0;n<t.length;n++)e.value.push(t[n]);else e.value=t;if(e.reason){if(r)for(t=0;t<r.length;t++)e.reason.push(r[t])}else e.reason=r;break;case"rejected":r&&k(r,e.reason)}}function N(e,t){if("pending"!==e.status&&"blocked"!==e.status)e.reason.error(t);else{var r=e.reason;e.status="rejected",e.reason=t,null!==r&&k(r,t)}}function M(e,t,r){return new R("resolved_model",(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}",null,e)}function D(e,t,r){x(e,(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}")}function x(e,t){if("pending"!==e.status)e.reason.enqueueModel(t);else{var r=e.value,n=e.reason;e.status="resolved_model",e.value=t,null!==r&&($(e),P(e,r,n))}}function L(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&(j(e),P(e,r,n))}}R.prototype=Object.create(Promise.prototype),R.prototype.then=function(e,t){switch(this.status){case"resolved_model":$(this);break;case"resolved_module":j(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t&&t(this.reason)}};var U=null;function $(e){var t=U;U=null;var r=e.value;e.status="blocked",e.value=null,e.reason=null;try{var n=JSON.parse(r,e._response._fromJSON),i=e.value;if(null!==i&&(e.value=null,e.reason=null,k(i,n)),null!==U){if(U.errored)throw U.value;if(0<U.deps){U.value=n,U.chunk=e;return}}e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}finally{U=t}}function j(e){try{var t=l(e.value);e.status="fulfilled",e.value=t}catch(t){e.status="rejected",e.reason=t}}function q(e,t){e._closed=!0,e._closedReason=t,e._chunks.forEach(function(e){"pending"===e.status&&N(e,t)})}function F(e){return{$$typeof:h,_payload:e,_init:w}}function B(e,t){var r=e._chunks,n=r.get(t);return n||(n=e._closed?new R("rejected",null,e._closedReason,e):O(e),r.set(t,n)),n}function H(e,t,r,n,i,o){function a(e){if(!s.errored){s.errored=!0,s.value=e;var t=s.chunk;null!==t&&"blocked"===t.status&&N(t,e)}}if(U){var s=U;s.deps++}else s=U={parent:null,chunk:null,value:null,deps:1,errored:!1};return e.then(function e(c){for(var l=1;l<o.length;l++){for(;c.$$typeof===h;)if((c=c._payload)===s.chunk)c=s.value;else if("fulfilled"===c.status)c=c.value;else{o.splice(0,l-1),c.then(e,a);return}c=c[o[l]]}l=i(n,c,t,r),t[r]=l,""===r&&null===s.value&&(s.value=l),t[0]===d&&"object"==typeof s.value&&null!==s.value&&s.value.$$typeof===d&&(c=s.value,"3"===r)&&(c.props=l),s.deps--,0===s.deps&&null!==(l=s.chunk)&&"blocked"===l.status&&(c=l.value,l.status="fulfilled",l.value=s.value,null!==c&&k(c,s.value))},a),null}function G(e,t,r,n){if(!e._serverReferenceConfig)return function(e,t,r){function n(){var e=Array.prototype.slice.call(arguments);return o?"fulfilled"===o.status?t(i,o.value.concat(e)):Promise.resolve(o).then(function(r){return t(i,r.concat(e))}):t(i,e)}var i=e.id,o=e.bound;return C(n,i,o,r),n}(t,e._callServer,e._encodeFormAction);var i=function(e,t){var r="",n=e[t];if(n)r=n.name;else{var i=t.lastIndexOf("#");if(-1!==i&&(r=t.slice(i+1),n=e[t.slice(0,i)]),!n)throw Error('Could not find the module "'+t+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return n.async?[n.id,n.chunks,r,1]:[n.id,n.chunks,r]}(e._serverReferenceConfig,t.id),o=c(i);if(o)t.bound&&(o=Promise.all([o,t.bound]));else{if(!t.bound)return C(o=l(i),t.id,t.bound,e._encodeFormAction),o;o=Promise.resolve(t.bound)}if(U){var a=U;a.deps++}else a=U={parent:null,chunk:null,value:null,deps:1,errored:!1};return o.then(function(){var o=l(i);if(t.bound){var s=t.bound.value.slice(0);s.unshift(null),o=o.bind.apply(o,s)}C(o,t.id,t.bound,e._encodeFormAction),r[n]=o,""===n&&null===a.value&&(a.value=o),r[0]===d&&"object"==typeof a.value&&null!==a.value&&a.value.$$typeof===d&&(s=a.value,"3"===n)&&(s.props=o),a.deps--,0===a.deps&&null!==(o=a.chunk)&&"blocked"===o.status&&(s=o.value,o.status="fulfilled",o.value=a.value,null!==s&&k(s,a.value))},function(e){if(!a.errored){a.errored=!0,a.value=e;var t=a.chunk;null!==t&&"blocked"===t.status&&N(t,e)}}),null}function z(e,t,r,n,i){var o=parseInt((t=t.split(":"))[0],16);switch((o=B(e,o)).status){case"resolved_model":$(o);break;case"resolved_module":j(o)}switch(o.status){case"fulfilled":var a=o.value;for(o=1;o<t.length;o++){for(;a.$$typeof===h;)if("fulfilled"!==(a=a._payload).status)return H(a,r,n,e,i,t.slice(o-1));else a=a.value;a=a[t[o]]}return i(e,a,r,n);case"pending":case"blocked":return H(o,r,n,e,i,t);default:return U?(U.errored=!0,U.value=o.reason):U={parent:null,chunk:null,value:o.reason,deps:0,errored:!0},null}}function V(e,t){return new Map(t)}function K(e,t){return new Set(t)}function Y(e,t){return new Blob(t.slice(1),{type:t[0]})}function W(e,t){e=new FormData;for(var r=0;r<t.length;r++)e.append(t[r][0],t[r][1]);return e}function X(e,t){return t[Symbol.iterator]()}function J(e,t){return t}function Q(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function Z(e,t,r,n,i,o,a){var s,c=new Map;this._bundlerConfig=e,this._serverReferenceConfig=t,this._moduleLoading=r,this._callServer=void 0!==n?n:Q,this._encodeFormAction=i,this._nonce=o,this._chunks=c,this._stringDecoder=new TextDecoder,this._fromJSON=null,this._rowLength=this._rowTag=this._rowID=this._rowState=0,this._buffer=[],this._closed=!1,this._closedReason=null,this._tempRefs=a,this._fromJSON=(s=this,function(e,t){if("string"==typeof t){var r=s,n=this,i=e,o=t;if("$"===o[0]){if("$"===o)return null!==U&&"0"===i&&(U={parent:U,chunk:null,value:null,deps:0,errored:!1}),d;switch(o[1]){case"$":return o.slice(1);case"L":return F(r=B(r,n=parseInt(o.slice(2),16)));case"@":if(2===o.length)return new Promise(function(){});return B(r,n=parseInt(o.slice(2),16));case"S":return Symbol.for(o.slice(2));case"F":return z(r,o=o.slice(2),n,i,G);case"T":if(n="$"+o.slice(2),null==(r=r._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return r.get(n);case"Q":return z(r,o=o.slice(2),n,i,V);case"W":return z(r,o=o.slice(2),n,i,K);case"B":return z(r,o=o.slice(2),n,i,Y);case"K":return z(r,o=o.slice(2),n,i,W);case"Z":return eo();case"i":return z(r,o=o.slice(2),n,i,X);case"I":return 1/0;case"-":return"$-0"===o?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(o.slice(2)));case"n":return BigInt(o.slice(2));default:return z(r,o=o.slice(1),n,i,J)}}return o}if("object"==typeof t&&null!==t){if(t[0]===d){if(e={$$typeof:d,type:t[1],key:t[2],ref:null,props:t[3]},null!==U){if(U=(t=U).parent,t.errored)e=F(e=new R("rejected",null,t.value,s));else if(0<t.deps){var a=new R("blocked",null,null,s);t.value=e,t.chunk=a,e=F(a)}}}else e=t;return e}return t})}function ee(e,t,r){var n=e._chunks,i=n.get(t);i&&"pending"!==i.status?i.reason.enqueueValue(r):n.set(t,new R("fulfilled",r,null,e))}function et(e,t,r,n){var i=e._chunks,o=i.get(t);o?"pending"===o.status&&(e=o.value,o.status="fulfilled",o.value=r,o.reason=n,null!==e&&k(e,o.value)):i.set(t,new R("fulfilled",r,n,e))}function er(e,t,r){var n=null;r=new ReadableStream({type:r,start:function(e){n=e}});var i=null;et(e,t,r,{enqueueValue:function(e){null===i?n.enqueue(e):i.then(function(){n.enqueue(e)})},enqueueModel:function(t){if(null===i){var r=new R("resolved_model",t,null,e);$(r),"fulfilled"===r.status?n.enqueue(r.value):(r.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=r)}else{r=i;var o=O(e);o.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=o,r.then(function(){i===o&&(i=null),x(o,t)})}},close:function(){if(null===i)n.close();else{var e=i;i=null,e.then(function(){return n.close()})}},error:function(e){if(null===i)n.error(e);else{var t=i;i=null,t.then(function(){return n.error(e)})}}})}function en(){return this}function ei(e,t,r){var n=[],i=!1,o=0,a={};a[f]=function(){var t,r=0;return(t={next:t=function(t){if(void 0!==t)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(r===n.length){if(i)return new R("fulfilled",{done:!0,value:void 0},null,e);n[r]=O(e)}return n[r++]}})[f]=en,t},et(e,t,r?a[f]():a,{enqueueValue:function(t){if(o===n.length)n[o]=new R("fulfilled",{done:!1,value:t},null,e);else{var r=n[o],i=r.value,a=r.reason;r.status="fulfilled",r.value={done:!1,value:t},null!==i&&P(r,i,a)}o++},enqueueModel:function(t){o===n.length?n[o]=M(e,t,!1):D(n[o],t,!1),o++},close:function(t){for(i=!0,o===n.length?n[o]=M(e,t,!0):D(n[o],t,!0),o++;o<n.length;)D(n[o++],'"$undefined"',!0)},error:function(t){for(i=!0,o===n.length&&(n[o]=O(e));o<n.length;)N(n[o++],t)}})}function eo(){var e=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return e.stack="Error: "+e.message,e}function ea(e,t){for(var r=e.length,n=t.length,i=0;i<r;i++)n+=e[i].byteLength;n=new Uint8Array(n);for(var o=i=0;o<r;o++){var a=e[o];n.set(a,i),i+=a.byteLength}return n.set(t,i),n}function es(e,t,r,n,i,o){ee(e,t,i=new i((r=0===r.length&&0==n.byteOffset%o?n:ea(r,n)).buffer,r.byteOffset,r.byteLength/o))}function ec(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function el(e){return new Z(e.serverConsumerManifest.moduleMap,e.serverConsumerManifest.serverModuleMap,e.serverConsumerManifest.moduleLoading,ec,e.encodeFormAction,"string"==typeof e.nonce?e.nonce:void 0,e&&e.temporaryReferences?e.temporaryReferences:void 0)}function eu(e,t){function r(t){q(e,t)}var n=t.getReader();n.read().then(function t(o){var a=o.value;if(o.done)q(e,Error("Connection closed."));else{var s=0,l=e._rowState;o=e._rowID;for(var d=e._rowTag,h=e._rowLength,p=e._buffer,f=a.length;s<f;){var g=-1;switch(l){case 0:58===(g=a[s++])?l=1:o=o<<4|(96<g?g-87:g-48);continue;case 1:84===(l=a[s])||65===l||79===l||111===l||85===l||83===l||115===l||76===l||108===l||71===l||103===l||77===l||109===l||86===l?(d=l,l=2,s++):64<l&&91>l||35===l||114===l||120===l?(d=l,l=3,s++):(d=0,l=3);continue;case 2:44===(g=a[s++])?l=4:h=h<<4|(96<g?g-87:g-48);continue;case 3:g=a.indexOf(10,s);break;case 4:(g=s+h)>a.length&&(g=-1)}var m=a.byteOffset+s;if(-1<g)(function(e,t,r,n,o){switch(r){case 65:ee(e,t,ea(n,o).buffer);return;case 79:es(e,t,n,o,Int8Array,1);return;case 111:ee(e,t,0===n.length?o:ea(n,o));return;case 85:es(e,t,n,o,Uint8ClampedArray,1);return;case 83:es(e,t,n,o,Int16Array,2);return;case 115:es(e,t,n,o,Uint16Array,2);return;case 76:es(e,t,n,o,Int32Array,4);return;case 108:es(e,t,n,o,Uint32Array,4);return;case 71:es(e,t,n,o,Float32Array,4);return;case 103:es(e,t,n,o,Float64Array,8);return;case 77:es(e,t,n,o,BigInt64Array,8);return;case 109:es(e,t,n,o,BigUint64Array,8);return;case 86:es(e,t,n,o,DataView,1);return}for(var a=e._stringDecoder,s="",l=0;l<n.length;l++)s+=a.decode(n[l],i);switch(n=s+=a.decode(o),r){case 73:var d=e,h=t,p=n,f=d._chunks,g=f.get(h);p=JSON.parse(p,d._fromJSON);var m=function(e,t){if(e){var r=e[t[0]];if(e=r&&r[t[2]])r=e.name;else{if(!(e=r&&r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}(d._bundlerConfig,p);if(!function(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var i=u.d,o=i.X,a=e.prefix+t[n],s=e.crossOrigin;s="string"==typeof s?"use-credentials"===s?s:"":void 0,o.call(i,a,{crossOrigin:s,nonce:r})}}(d._moduleLoading,p[1],d._nonce),p=c(m)){if(g){var y=g;y.status="blocked"}else y=new R("blocked",null,null,d),f.set(h,y);p.then(function(){return L(y,m)},function(e){return N(y,e)})}else g?L(g,m):f.set(h,new R("resolved_module",m,null,d));break;case 72:switch(t=n[0],e=JSON.parse(n=n.slice(1),e._fromJSON),n=u.d,t){case"D":n.D(e);break;case"C":"string"==typeof e?n.C(e):n.C(e[0],e[1]);break;case"L":t=e[0],r=e[1],3===e.length?n.L(t,r,e[2]):n.L(t,r);break;case"m":"string"==typeof e?n.m(e):n.m(e[0],e[1]);break;case"X":"string"==typeof e?n.X(e):n.X(e[0],e[1]);break;case"S":"string"==typeof e?n.S(e):n.S(e[0],0===e[1]?void 0:e[1],3===e.length?e[2]:void 0);break;case"M":"string"==typeof e?n.M(e):n.M(e[0],e[1])}break;case 69:r=JSON.parse(n),(n=eo()).digest=r.digest,(o=(r=e._chunks).get(t))?N(o,n):r.set(t,new R("rejected",null,n,e));break;case 84:(o=(r=e._chunks).get(t))&&"pending"!==o.status?o.reason.enqueueValue(n):r.set(t,new R("fulfilled",n,null,e));break;case 78:case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:er(e,t,void 0);break;case 114:er(e,t,"bytes");break;case 88:ei(e,t,!1);break;case 120:ei(e,t,!0);break;case 67:(e=e._chunks.get(t))&&"fulfilled"===e.status&&e.reason.close(""===n?'"$undefined"':n);break;default:(o=(r=e._chunks).get(t))?x(o,n):r.set(t,new R("resolved_model",n,null,e))}})(e,o,d,p,h=new Uint8Array(a.buffer,m,g-s)),s=g,3===l&&s++,h=o=d=l=0,p.length=0;else{a=new Uint8Array(a.buffer,m,a.byteLength-s),p.push(a),h-=a.byteLength;break}}return e._rowState=l,e._rowID=o,e._rowTag=d,e._rowLength=h,n.read().then(t).catch(r)}}).catch(r)}t.createFromFetch=function(e,t){var r=el(t);return e.then(function(e){eu(r,e.body)},function(e){q(r,e)}),B(r,0)},t.createFromReadableStream=function(e,t){return eu(t=el(t),e),B(t,0)},t.createServerReference=function(e){function t(){var t=Array.prototype.slice.call(arguments);return ec(e,t)}return C(t,e,null,void 0),t},t.createTemporaryReferenceSet=function(){return new Map},t.encodeReply=function(e,t){return new Promise(function(r,n){var i=E(e,"",t&&t.temporaryReferences?t.temporaryReferences:void 0,r,n);if(t&&t.signal){var o=t.signal;if(o.aborted)i(o.reason);else{var a=function(){i(o.reason),o.removeEventListener("abort",a)};o.addEventListener("abort",a)}}})},t.registerServerReference=function(e,t,r){return C(e,t,null,r),e}},34910:e=>{var t=1/0,r=0/0,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){var u,d,h;return"number"==typeof e&&e==(h=(d=(u=e)?(u=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==c.call(t))return r;if(l(e)){var t,u="function"==typeof e.valueOf?e.valueOf():e;e=l(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var d=o.test(e);return d||a.test(e)?s(e.slice(2),d?2:8):i.test(e)?r:+e}(u))===t||u===-t?(u<0?-1:1)*17976931348623157e292:u==u?u:0:0===u?u:0)%1,d==d?h?d-h:d:0)}},35834:(e,t,r)=>{var n=r(79737),i=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.exports=i},36028:(e,t,r)=>{var n=r(94005);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var i=r.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:r.header,payload:i,signature:r.signature}:i}},36833:(e,t,r)=>{let n=r(42769),i=r(24853),o=r(41207),a=r(94005),s=r(61753),c=r(86108),l=r(34910),u=r(38669),d=r(25313),h=r(53173),p=r(77553),{KeyObject:f,createSecretKey:g,createPrivateKey:m}=r(55511),y=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&y.splice(3,0,"PS256","PS384","PS512");let v={expiresIn:{isValid:function(e){return l(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return l(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,y),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},E={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function T(e,t,r,n){if(!d(r))throw Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=e[i];if(!o){if(!t)throw Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw Error(o.message)})}let b={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},A=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,i){var s,c;"function"==typeof r?(i=r,r={}):r=r||{};let l="object"==typeof e&&!Buffer.isBuffer(e),u=Object.assign({alg:r.algorithm||"HS256",typ:l?"JWT":void 0,kid:r.keyid},r.header);function d(e){if(i)return i(e);throw e}if(!t&&"none"!==r.algorithm)return d(Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof f))try{t=m(t)}catch(e){try{t=g("string"==typeof t?Buffer.from(t):t)}catch(e){return d(Error("secretOrPrivateKey is not valid key material"))}}if(u.alg.startsWith("HS")&&"secret"!==t.type)return d(Error(`secretOrPrivateKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)){if("private"!==t.type)return d(Error(`secretOrPrivateKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInsecureKeySizes&&!u.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return d(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`))}if(void 0===e)return d(Error("payload is required"));if(l){try{s=e,T(E,!0,s,"payload")}catch(e){return d(e)}r.mutatePayload||(e=Object.assign({},e))}else{let t=A.filter(function(e){return void 0!==r[e]});if(t.length>0)return d(Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return d(Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return d(Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{c=r,T(v,!1,c,"options")}catch(e){return d(e)}if(!r.allowInvalidAsymmetricKeyTypes)try{o(u.alg,t)}catch(e){return d(e)}let h=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:l&&(e.iat=h),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,h)}catch(e){return d(e)}if(void 0===e.nbf)return d(Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,h)}catch(e){return d(e)}if(void 0===e.exp)return d(Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(b).forEach(function(t){let n=b[t];if(void 0!==r[t]){if(void 0!==e[n])return d(Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}});let y=r.encoding||"utf8";if("function"==typeof i)i=i&&p(i),a.createSign({header:u,privateKey:t,payload:e,encoding:y}).once("error",i).once("done",function(e){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(u.alg)&&e.length<256)return i(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`));i(null,e)});else{let n=a.sign({header:u,payload:e,secret:t,encoding:y});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(u.alg)&&n.length<256)throw Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${u.alg}`);return n}}},37461:(e,t)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isHangingPromiseRejectionError:function(){return r},makeHangingPromise:function(){return a}});let n="HANGING_PROMISE_REJECTION";class i extends Error{constructor(e){super(`During prerendering, ${e} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${e} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context.`),this.expression=e,this.digest=n}}let o=new WeakMap;function a(e,t){if(e.aborted)return Promise.reject(new i(t));{let r=new Promise((r,n)=>{let a=n.bind(null,new i(t)),s=o.get(e);if(s)s.push(a);else{let t=[a];o.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return r.catch(s),r}}function s(){}},38248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38669:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&"[object Number]"==t.call(e)}},39335:(e,t,r)=>{"use strict";let n=/\s+/g;class i{constructor(e,t){if(t=a(t),e instanceof i)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new i(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&g)|(this.options.loose&&m))+":"+e,r=o.get(t);if(r)return r;let n=this.options.loose,i=n?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];c("hyphen replace",e=e.replace(i,k(this.options.includePrerelease))),c("comparator trim",e=e.replace(u[d.COMPARATORTRIM],h)),c("tilde trim",e=e.replace(u[d.TILDETRIM],p)),c("caret trim",e=e.replace(u[d.CARETTRIM],f));let a=e.split(" ").map(e=>T(e,this.options)).join(" ").split(/\s+/).map(e=>O(e,this.options));n&&(a=a.filter(e=>(c("loose invalid filter",e,this.options),!!e.match(u[d.COMPARATORLOOSE])))),c("range list",a);let l=new Map;for(let e of a.map(e=>new s(e,this.options))){if(y(e))return[e];l.set(e.value,e)}l.size>1&&l.has("")&&l.delete("");let v=[...l.values()];return o.set(t,v),v}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>E(r,t)&&e.set.some(e=>E(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1}}e.exports=i;let o=new(r(6532)),a=r(65293),s=r(95832),c=r(46404),l=r(91680),{safeRe:u,t:d,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=r(67548),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:m}=r(74450),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,E=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},T=(e,t)=>(c("comp",e,t),c("caret",e=S(e,t)),c("tildes",e=A(e,t)),c("xrange",e=I(e,t)),c("stars",e=w(e,t)),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,A=(e,t)=>e.trim().split(/\s+/).map(e=>C(e,t)).join(" "),C=(e,t)=>{let r=t.loose?u[d.TILDELOOSE]:u[d.TILDE];return e.replace(r,(t,r,n,i,o)=>{let a;return c("tilde",e,t,r,n,i,o),b(r)?a="":b(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:b(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(c("replaceTilde pr",o),a=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,c("tilde return",a),a})},S=(e,t)=>e.trim().split(/\s+/).map(e=>_(e,t)).join(" "),_=(e,t)=>{c("caret",e,t);let r=t.loose?u[d.CARETLOOSE]:u[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,o,a)=>{let s;return c("caret",e,t,r,i,o,a),b(r)?s="":b(i)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:b(o)?s="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(c("replaceCaret pr",a),s="0"===r?"0"===i?`>=${r}.${i}.${o}-${a} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${a} <${+r+1}.0.0-0`):(c("no pr"),s="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),c("caret return",s),s})},I=(e,t)=>(c("replaceXRanges",e,t),e.split(/\s+/).map(e=>R(e,t)).join(" ")),R=(e,t)=>{e=e.trim();let r=t.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return e.replace(r,(r,n,i,o,a,s)=>{c("xRange",e,r,n,i,o,a,s);let l=b(i),u=l||b(o),d=u||b(a);return"="===n&&d&&(n=""),s=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&d?(u&&(o=0),a=0,">"===n?(n=">=",u?(i=+i+1,o=0):o=+o+1,a=0):"<="===n&&(n="<",u?i=+i+1:o=+o+1),"<"===n&&(s="-0"),r=`${n+i}.${o}.${a}${s}`):u?r=`>=${i}.0.0${s} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),c("xRange return",r),r})},w=(e,t)=>(c("replaceStars",e,t),e.trim().replace(u[d.STAR],"")),O=(e,t)=>(c("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),k=e=>(t,r,n,i,o,a,s,c,l,u,d,h)=>(r=b(n)?"":b(i)?`>=${n}.0.0${e?"-0":""}`:b(o)?`>=${n}.${i}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,c=b(l)?"":b(u)?`<${+l+1}.0.0-0`:b(d)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${d}-${h}`:e?`<${l}.${u}.${+d+1}-0`:`<=${c}`,`${r} ${c}`.trim()),P=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(c(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},39393:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>0>n(e,t,r)},39413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},39730:(e,t,r)=>{"use strict";let n=r(59097);e.exports=(e,t,r)=>n(e,t,"<",r)},40041:(e,t,r)=>{"use strict";let n=r(32977);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},41207:(e,t,r)=>{let n=r(69985),i=r(68687),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},a={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;let r=t.asymmetricKeyType;if(!r)return;let s=o[r];if(!s)throw Error(`Unknown key type "${r}".`);if(!s.includes(e))throw Error(`"alg" parameter for "${r}" key type must be one of: ${s.join(", ")}.`);if(n)switch(r){case"ec":let c=t.asymmetricKeyDetails.namedCurve,l=a[e];if(c!==l)throw Error(`"alg" parameter "${e}" requires curve "${l}".`);break;case"rsa-pss":if(i){let r=parseInt(e.slice(-3),10),{hashAlgorithm:n,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(n!==`sha${r}`||i!==n)throw Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>r>>3)throw Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},42087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return g},encryptActionBoundArgs:function(){return f}}),r(54387);let n=r(74932),i=r(64390),o=r(34360),a=r(46295),s=r(63033),c=r(75124),l=function(e){return e&&e.__esModule?e:{default:e}}(r(7153)),u=new TextEncoder,d=new TextDecoder;async function h(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=atob(t),i=n.slice(0,16),o=n.slice(16),s=d.decode(await (0,a.decrypt)(r,(0,a.stringToUint8Array)(i),(0,a.stringToUint8Array)(o)));if(!s.startsWith(e))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return s.slice(e.length)}async function p(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=new Uint8Array(16);s.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let i=(0,a.arrayBufferToString)(n.buffer),o=await (0,a.encrypt)(r,n,u.encode(e+t));return btoa(i+(0,a.arrayBufferToString)(o))}let f=l.default.cache(async function e(t,...r){let{clientModules:i}=(0,a.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,e);let u=!1,d=s.workUnitAsyncStorage.getStore(),h=(null==d?void 0:d.type)==="prerender"?(0,c.createHangingInputAbortSignal)(d):void 0,f=await (0,o.streamToString)((0,n.renderToReadableStream)(r,i,{signal:h,onError(e){(null==h||!h.aborted)&&(u||(u=!0,l.message=e instanceof Error?e.message:String(e)))}}),h);if(u)throw l;if(!d)return p(t,f);let g=(0,s.getPrerenderResumeDataCache)(d),m=(0,s.getRenderResumeDataCache)(d),y=t+f,v=(null==g?void 0:g.encryptedBoundArgs.get(y))??(null==m?void 0:m.encryptedBoundArgs.get(y));if(v)return v;let E="prerender"===d.type?d.cacheSignal:void 0;null==E||E.beginRead();let T=await p(t,f);return null==E||E.endRead(),null==g||g.encryptedBoundArgs.set(y,T),T});async function g(e,t){let r,n=await t,o=s.workUnitAsyncStorage.getStore();if(o){let t="prerender"===o.type?o.cacheSignal:void 0,i=(0,s.getPrerenderResumeDataCache)(o),a=(0,s.getRenderResumeDataCache)(o);(r=(null==i?void 0:i.decryptedBoundArgs.get(n))??(null==a?void 0:a.decryptedBoundArgs.get(n)))||(null==t||t.beginRead(),r=await h(e,n),null==t||t.endRead(),null==i||i.decryptedBoundArgs.set(n,r))}else r=await h(e,n);let{edgeRscModuleMapping:c,rscModuleMapping:l}=(0,a.getClientReferenceManifestForRsc)();return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(u.encode(r)),(null==o?void 0:o.type)==="prerender"?o.renderSignal.aborted?e.close():o.renderSignal.addEventListener("abort",()=>e.close(),{once:!0}):e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:l,serverModuleMap:(0,a.getServerModuleMap)()}})}},42503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ENCODED_TAGS",{enumerable:!0,get:function(){return r}});let r={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}}},42717:e=>{"use strict";let t=/^[0-9]+$/,r=(e,r)=>{let n=t.test(e),i=t.test(r);return n&&i&&(e*=1,r*=1),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},42769:(e,t,r)=>{var n=r(93609);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=n(e);if(void 0===i)return;return Math.floor(r+i/1e3)}if("number"==typeof e)return r+e}},43368:(e,t,r)=>{"use strict";let n=r(91680),i=r(39335);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||1===a.compare(e))&&(a=new n(o=e,r))}),o}},44334:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BubbledError:function(){return h},SpanKind:function(){return u},SpanStatusCode:function(){return l},getTracer:function(){return b},isBubbledError:function(){return p}});let i=r(2720),o=r(23879);try{n=r(73214)}catch(e){n=r(73214)}let{context:a,propagation:s,trace:c,SpanStatusCode:l,SpanKind:u,ROOT_CONTEXT:d}=n;class h extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}function p(e){return"object"==typeof e&&null!==e&&e instanceof h}let f=(e,t)=>{p(t)&&t.bubble?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},g=new Map,m=n.createContextKey("next.rootSpanId"),y=0,v=()=>y++,E={set(e,t,r){e.push({key:t,value:r})}};class T{getTracerInstance(){return c.getTracer("next.js","0.0.1")}getContext(){return a}getTracePropagationData(){let e=a.active(),t=[];return s.inject(e,t,E),t}getActiveScopeSpan(){return c.getSpan(null==a?void 0:a.active())}withPropagatedContext(e,t,r){let n=a.active();if(c.getSpanContext(n))return t();let i=s.extract(n,e,r);return a.with(i,t)}trace(...e){var t;let[r,n,s]=e,{fn:l,options:u}="function"==typeof n?{fn:n,options:{}}:{fn:s,options:{...n}},h=u.spanName??r;if(!i.NextVanillaSpanAllowlist.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||u.hideSpan)return l();let p=this.getSpanContext((null==u?void 0:u.parentSpan)??this.getActiveScopeSpan()),y=!1;p?(null==(t=c.getSpanContext(p))?void 0:t.isRemote)&&(y=!0):(p=(null==a?void 0:a.active())??d,y=!0);let E=v();return u.attributes={"next.span_name":h,"next.span_type":r,...u.attributes},a.with(p.setValue(m,E),()=>this.getTracerInstance().startActiveSpan(h,u,e=>{let t="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,n=()=>{g.delete(E),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&i.LogSpanAllowList.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};y&&g.set(E,new Map(Object.entries(u.attributes??{})));try{if(l.length>1)return l(e,t=>f(e,t));let t=l(e);if((0,o.isThenable)(t))return t.then(t=>(e.end(),t)).catch(t=>{throw f(e,t),t}).finally(n);return e.end(),n(),t}catch(t){throw f(e,t),n(),t}}))}wrap(...e){let t=this,[r,n,o]=3===e.length?e:[e[0],{},e[1]];return i.NextVanillaSpanAllowlist.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof o&&(e=e.apply(this,arguments));let i=arguments.length-1,s=arguments[i];if("function"!=typeof s)return t.trace(r,e,()=>o.apply(this,arguments));{let n=t.getContext().bind(a.active(),s);return t.trace(r,e,(e,t)=>(arguments[i]=function(e){return null==t||t(e),n.apply(this,arguments)},o.apply(this,arguments)))}}:o}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?c.setSpan(a.active(),e):void 0}getRootSpanAttributes(){let e=a.active().getValue(m);return g.get(e)}setRootSpanAttribute(e,t){let r=a.active().getValue(m),n=g.get(r);n&&n.set(e,t)}}let b=(()=>{let e=new T;return()=>e})()},46295:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return s},decrypt:function(){return u},encrypt:function(){return l},getActionEncryptionKey:function(){return g},getClientReferenceManifestForRsc:function(){return f},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return h},stringToUint8Array:function(){return c}});let i=r(23302),o=r(79535),a=r(29294);function s(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function c(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function l(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function u(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}let d=Symbol.for("next.server.action-manifests");function h({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let a=null==(i=globalThis[d])?void 0:i.clientReferenceManifestsPerPage;globalThis[d]={clientReferenceManifestsPerPage:{...a,[(0,o.normalizeAppPath)(e)]:t},serverActionsManifest:r,serverModuleMap:n}}function p(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return e.serverModuleMap}function f(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:t}=e,r=a.workAsyncStorage.getStore();if(!r){var n=t;let e=Object.values(n),r={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let t of e)r.clientModules={...r.clientModules,...t.clientModules},r.edgeRscModuleMapping={...r.edgeRscModuleMapping,...t.edgeRscModuleMapping},r.rscModuleMapping={...r.rscModuleMapping,...t.rscModuleMapping};return r}let o=t[r.route];if(!o)throw Object.defineProperty(new i.InvariantError(`Missing Client Reference Manifest for ${r.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return o}async function g(){if(n)return n;let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Object.defineProperty(new i.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return n=await crypto.subtle.importKey("raw",c(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},46404:e=>{"use strict";e.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},46587:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var n=r(49575);let i="REDACTED",o=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],a=["api-version"];class s{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=o.concat(e),t=a.concat(t),this.allowedHeaderNames=new Set(e.map(e=>e.toLowerCase())),this.allowedQueryParameters=new Set(t.map(e=>e.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("headers"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e){if("response"===e)return;else if("operationSpec"===e)return;else if(Array.isArray(r)||(0,n.G)(r)){if(t.has(r))return"[Circular]";t.add(r)}return r}},2)}sanitizeUrl(e){if("string"!=typeof e||null===e||""===e)return e;let t=new URL(e);if(!t.search)return e;for(let[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,i);return t.toString()}sanitizeHeaders(e){let t={};for(let r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?t[r]=e[r]:t[r]=i;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;let t={};for(let r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?t[r]=e[r]:t[r]=i;return t}}},47403:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t)=>n(e,t,!0)},47427:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpProxyAgent=void 0;let s=o(r(91645)),c=o(r(34631)),l=a(r(5415)),u=r(94735),d=r(69415),h=r(79551),p=(0,l.default)("http-proxy-agent");class f extends d.Agent{constructor(e,t){super(t),this.proxy="string"==typeof e?new h.URL(e):e,this.proxyHeaders=t?.headers??{},p("Creating new HttpProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={...t?function(e,...t){let r,n={};for(r in e)t.includes(r)||(n[r]=e[r]);return n}(t,"headers"):null,host:r,port:n}}addRequest(e,t){e._header=null,this.setRequestProps(e,t),super.addRequest(e,t)}setRequestProps(e,t){let{proxy:r}=this,n=t.secureEndpoint?"https:":"http:",i=e.getHeader("host")||"localhost",o=`${n}//${i}`,a=new h.URL(e.path,o);80!==t.port&&(a.port=String(t.port)),e.path=String(a);let s="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders};if(r.username||r.password){let e=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let t of(s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(s))){let r=s[t];r&&e.setHeader(t,r)}}async connect(e,t){let r,n,i;return e._header=null,e.path.includes("://")||this.setRequestProps(e,t),p("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(p("Patching connection write() output buffer with updated header"),n=(r=e.outputData[0].data).indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+r.substring(n),p("Output buffer: %o",e.outputData[0].data)),"https:"===this.proxy.protocol?(p("Creating `tls.Socket`: %o",this.connectOpts),i=c.connect(this.connectOpts)):(p("Creating `net.Socket`: %o",this.connectOpts),i=s.connect(this.connectOpts)),await (0,u.once)(i,"connect"),i}}f.protocols=["http","https"],t.HttpProxyAgent=f},48049:(e,t,r)=>{"use strict";let n=r(32977);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},49575:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}r.d(t,{G:()=>n})},53173:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){var n;return"string"==typeof e||!r(e)&&!!(n=e)&&"object"==typeof n&&"[object String]"==t.call(e)}},54387:()=>{},54806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return r}});let r="NEXT_MISSING_ROOT_TAGS";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},56895:(e,t,r)=>{var n=r(79428).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},56901:(e,t,r)=>{"use strict";function n(e){return{name:"tlsPolicy",sendRequest:async(t,r)=>(t.tlsSettings||(t.tlsSettings=e),r(t))}}r.d(t,{i:()=>n})},57004:(e,t,r)=>{"use strict";function n(e,t){return Buffer.from(e).toString(t)}function i(e,t){return Buffer.from(e,t)}r.d(t,{A:()=>i,S:()=>n})},57807:(e,t,r)=>{"use strict";let n=r(20235),i=r(31495),o=r(14964),a=r(84429),s=r(39393),c=r(15378);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return i(e,r,l);case">":return o(e,r,l);case">=":return a(e,r,l);case"<":return s(e,r,l);case"<=":return c(e,r,l);default:throw TypeError(`Invalid operator: ${t}`)}}},58650:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(48161),i=r(1708),o=r.t(i,2);async function a(e){if(o&&i.versions){let t=i.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${n.arch()}-${n.type()}-${n.release()})`)}var s=r(23598);async function c(e){let t=new Map;t.set("ts-http-runtime",s.M),await a(t);let r=function(e){let t=[];for(let[r,n]of e){let e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}let l="User-Agent";function u(e={}){let t=c(e.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:async(e,r)=>(e.headers.has(l)||e.headers.set(l,await t),r(e))}}},59097:(e,t,r)=>{"use strict";let n=r(91680),i=r(95832),{ANY:o}=i,a=r(39335),s=r(1776),c=r(14964),l=r(39393),u=r(15378),d=r(84429);e.exports=(e,t,r,h)=>{let p,f,g,m,y;switch(e=new n(e,h),t=new a(t,h),r){case">":p=c,f=u,g=l,m=">",y=">=";break;case"<":p=l,f=d,g=c,m="<",y="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,h))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],a=null,s=null;if(n.forEach(e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,p(e.semver,a.semver,h)?a=e:g(e.semver,s.semver,h)&&(s=e)}),a.operator===m||a.operator===y||(!s.operator||s.operator===m)&&f(e,s.semver)||s.operator===y&&g(e,s.semver))return!1}return!0}},59311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return o},isRedirectError:function(){return a}});let n=r(18389),i="NEXT_REDIRECT";var o=function(e){return e.push="push",e.replace="replace",e}({});function a(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,a=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===i&&("replace"===o||"push"===o)&&"string"==typeof a&&!isNaN(s)&&s in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},60858:e=>{"use strict";e.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return -1!==n&&(-1===i||n<i)}},60928:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t)=>new n(e,t).minor},61387:(e,t,r)=>{"use strict";let n,i=r(21820),o=r(83997),a=r(60858),{env:s}=process;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===n)return 0;if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2;if(e&&!t&&void 0===n)return 0;let r=n||0;if("dumb"===s.TERM)return r;if("win32"===process.platform){let e=i.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in s)||"codeship"===s.CI_NAME?1:r;if("TEAMCITY_VERSION"in s)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION);if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){let e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:r}a("no-color")||a("no-colors")||a("color=false")||a("color=never")?n=0:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(n=1),"FORCE_COLOR"in s&&(n="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(l(e,e&&e.isTTY))},stdout:c(l(!0,o.isatty(1))),stderr:c(l(!0,o.isatty(2)))}},61514:(e,t,r)=>{"use strict";r.d(t,{AQ:()=>o,Me:()=>a,N3:()=>i,Tt:()=>n,xN:()=>s});function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create;function i(e){return this instanceof i?(this.v=e,this):new i(e)}function o(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){o[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||c(e,t)})},t&&(n[e]=t(n[e])))}function c(e,t){try{var r;(r=o[e](t)).value instanceof i?Promise.resolve(r.value.v).then(l,u):d(a[0][2],r)}catch(e){d(a[0][3],e)}}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function a(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:i(e[n](t)),done:!1}:o?o(t):t}:o}}function s(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var o,a,s;o=n,a=i,s=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:s})},a)})}}}Object.create,"function"==typeof SuppressedError&&SuppressedError},61753:e=>{var t,r,n=1/0,i=0/0,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,u=parseInt;function d(e){return e!=e}var h=Object.prototype,p=h.hasOwnProperty,f=h.toString,g=h.propertyIsEnumerable,m=(t=Object.keys,r=Object,function(e){return t(r(e))}),y=Math.max,v=Array.isArray;function E(e){var t,r,n;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&"[object Function]"!=(n=T(r=e)?f.call(r):"")&&"[object GeneratorFunction]"!=n}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){return!!e&&"object"==typeof e}e.exports=function(e,t,r,A){e=E(e)?e:function(e){return e?function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(E(e)?function(e,t){var r,n,i,o,a=v(e)||b(n=r=e)&&E(n)&&p.call(r,"callee")&&(!g.call(r,"callee")||"[object Arguments]"==f.call(r))?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],s=a.length,c=!!s;for(var u in e){p.call(e,u)&&!(c&&("length"==u||(i=u,(o=null==(o=s)?0x1fffffffffffff:o)&&("number"==typeof i||l.test(i))&&i>-1&&i%1==0&&i<o)))&&a.push(u)}return a}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||h))return m(e);var t,r,n=[];for(var i in Object(e))p.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e),function(t){return e[t]}):[]}(e),r=r&&!A?(_=(S=(C=r)?(C=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||b(t)&&"[object Symbol]"==f.call(t))return i;if(T(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=T(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?i:+e}(C))===n||C===-n?(C<0?-1:1)*17976931348623157e292:C==C?C:0:0===C?C:0)%1,S==S?_?S-_:S:0):0;var C,S,_,I,R=e.length;return r<0&&(r=y(R+r,0)),"string"==typeof(I=e)||!v(I)&&b(I)&&"[object String]"==f.call(I)?r<=R&&e.indexOf(t,r)>-1:!!R&&function(e,t,r){if(t!=t){for(var n,i=e.length,o=r+-1;n?o--:++o<i;)if(d(e[o],o,e))return o;return -1}for(var a=r-1,s=e.length;++a<s;)if(e[a]===t)return a;return -1}(e,t,r)>-1}},62646:(e,t)=>{"use strict";t.w=void 0,t.w={instrumenterImplementation:void 0}},63726:(e,t,r)=>{"use strict";let n=r(39335),i=r(95832),{ANY:o}=i,a=r(1776),s=r(3386),c=[new i(">=0.0.0-0")],l=[new i(">=0.0.0")],u=(e,t,r)=>{let n,i,u,p,f,g,m;if(e===t)return!0;if(1===e.length&&e[0].semver===o)if(1===t.length&&t[0].semver===o)return!0;else e=r.includePrerelease?c:l;if(1===t.length&&t[0].semver===o)if(r.includePrerelease)return!0;else t=l;let y=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=d(n,t,r):"<"===t.operator||"<="===t.operator?i=h(i,t,r):y.add(t.semver);if(y.size>1)return null;if(n&&i&&((u=s(n.semver,i.semver,r))>0||0===u&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of y){if(n&&!a(e,String(n),r)||i&&!a(e,String(i),r))return null;for(let n of t)if(!a(e,String(n),r))return!1;return!0}let v=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,E=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(v&&1===v.prerelease.length&&"<"===i.operator&&0===v.prerelease[0]&&(v=!1),t)){if(m=m||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,n){if(E&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===E.major&&e.semver.minor===E.minor&&e.semver.patch===E.patch&&(E=!1),">"===e.operator||">="===e.operator){if((p=d(n,e,r))===e&&p!==n)return!1}else if(">="===n.operator&&!a(n.semver,String(e),r))return!1}if(i){if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if((f=h(i,e,r))===e&&f!==i)return!1}else if("<="===i.operator&&!a(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==u)return!1}return(!n||!g||!!i||0===u)&&(!i||!m||!!n||0===u)&&!E&&!v&&!0},d=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(let n of e.set){for(let e of t.set){let t=u(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},64285:(e,t,r)=>{"use strict";function n(e){return{name:"agentPolicy",sendRequest:async(t,r)=>(t.agent||(t.agent=e),r(t))}}r.d(t,{e:()=>n})},64366:(e,t,r)=>{"use strict";r.d(t,{Ll:()=>h});var n=r(64810),i=r(47427),o=r(66175);let a=[],s=!1,c=new Map;function l(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function u(e){let t;try{t=new URL(e.host)}catch(t){throw Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}return t.port=String(e.port),e.username&&(t.username=e.username),e.password&&(t.password=e.password),t}function d(e,t,r){if(e.agent)return;let a="https:"!==new URL(e.url).protocol;e.tlsSettings&&o.v.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=e.headers.toJSON();a?(t.httpProxyAgent||(t.httpProxyAgent=new i.HttpProxyAgent(r,{headers:s})),e.agent=t.httpProxyAgent):(t.httpsProxyAgent||(t.httpsProxyAgent=new n.HttpsProxyAgent(r,{headers:s})),e.agent=t.httpsProxyAgent)}function h(e,t){s||a.push(...function(){let e=l("NO_PROXY");return(s=!0,e)?e.split(",").map(e=>e.trim()).filter(e=>e.length):[]}());let r=e?u(e):function(){let e=function(){if(!process)return;let e=l("HTTPS_PROXY"),t=l("ALL_PROXY"),r=l("HTTP_PROXY");return e||t||r}();return e?new URL(e):void 0}(),n={};return{name:"proxyPolicy",async sendRequest(e,i){var o;return!e.proxySettings&&r&&!function(e,t,r){if(0===t.length)return!1;let n=new URL(e).hostname;if(null==r?void 0:r.has(n))return r.get(n);let i=!1;for(let e of t)"."===e[0]?n.endsWith(e)?i=!0:n.length===e.length-1&&n===e.slice(1)&&(i=!0):n===e&&(i=!0);return null==r||r.set(n,i),i}(e.url,null!=(o=null==t?void 0:t.customNoProxyList)?o:a,(null==t?void 0:t.customNoProxyList)?void 0:c)?d(e,n,r):e.proxySettings&&d(e,n,u(e.proxySettings)),i(e)}}}},64390:(e,t,r)=>{"use strict";e.exports=r(34821)},64665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return i.RedirectType},forbidden:function(){return a.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return c.unstable_rethrow}});let n=r(68022),i=r(59311),o=r(86834),a=r(91777),s=r(24796),c=r(81452);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},64810:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpsProxyAgent=void 0;let s=o(r(91645)),c=o(r(34631)),l=a(r(12412)),u=a(r(5415)),d=r(69415),h=r(79551),p=r(74484),f=(0,u.default)("https-proxy-agent"),g=e=>void 0===e.servername&&e.host&&!s.isIP(e.host)?{...e,servername:e.host}:e;class m extends d.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new h.URL(e):e,this.proxyHeaders=t?.headers??{},f("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?v(t,"headers"):null,host:r,port:n}}async connect(e,t){let r,{proxy:n}=this;if(!t.host)throw TypeError('No "host" provided');"https:"===n.protocol?(f("Creating `tls.Socket`: %o",this.connectOpts),r=c.connect(g(this.connectOpts))):(f("Creating `net.Socket`: %o",this.connectOpts),r=s.connect(this.connectOpts));let i="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},o=s.isIPv6(t.host)?`[${t.host}]`:t.host,a=`CONNECT ${o}:${t.port} HTTP/1.1\r
`;if(n.username||n.password){let e=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let e of(i.Host=`${o}:${t.port}`,i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(i)))a+=`${e}: ${i[e]}\r
`;let u=(0,p.parseProxyResponse)(r);r.write(`${a}\r
`);let{connect:d,buffered:h}=await u;if(e.emit("proxyConnect",d),this.emit("proxyConnect",d,e),200===d.statusCode)return(e.once("socket",y),t.secureEndpoint)?(f("Upgrading socket connection to TLS"),c.connect({...v(g(t),"host","path","port"),socket:r})):r;r.destroy();let m=new s.Socket({writable:!1});return m.readable=!0,e.once("socket",e=>{f("Replaying proxy buffer for failed request"),(0,l.default)(e.listenerCount("data")>0),e.push(h),e.push(null)}),m}}function y(e){e.resume()}function v(e,...t){let r,n={};for(r in e)t.includes(r)||(n[r]=e[r]);return n}m.protocols=["http","https"],t.HttpsProxyAgent=m},65293:e=>{"use strict";let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},66175:(e,t,r)=>{"use strict";r.d(t,{v:()=>n});let n=(0,r(11882).KV)("ts-http-runtime")},66224:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return i}});let r="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=r}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67548:(e,t,r)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(74450),a=r(46404),s=(t=e.exports={}).re=[],c=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],d=t.t={},h=0,p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,i]],g=e=>{for(let[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},m=(e,t,r)=>{let n=g(t),i=h++;a(e,i,t),d[e]=i,l[i]=t,u[i]=n,s[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),m("FULL",`^${l[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),m("LOOSE",`^${l[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),m("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?`+`(?:${l[d.BUILD]})?`+"(?:$|[^\\d])"),m("COERCERTL",l[d.COERCE],!0),m("COERCERTLFULL",l[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},67780:(e,t,r)=>{var n=r(91571).Buffer,i=r(27910);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick((function(){this.emit("end",e),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof e+")")}r(28354).inherits(o,i),o.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},68022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return c},redirect:function(){return s}});let n=r(18389),i=r(59311),o=r(19121).actionAsyncStorage;function a(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function s(e,t){var r;throw null!=t||(t=(null==o||null==(r=o.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),a(e,t,n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){throw void 0===t&&(t=i.RedirectType.replace),a(e,t,n.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68687:(e,t,r)=>{e.exports=r(78905).satisfies(process.version,">=16.9.0")},68790:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].ReactDOM},69415:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Agent=void 0;let s=o(r(91645)),c=o(r(81630)),l=r(55591);a(r(20540),t);let u=Symbol("AgentBaseInternalState");class d extends c.Agent{constructor(e){super(e),this[u]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}let{stack:t}=Error();return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new s.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;let r=this.sockets[e],n=r.indexOf(t);-1!==n&&(r.splice(n,1),this.totalSocketCount--,0===r.length&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?l.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,r){let n={...t,secureEndpoint:this.isSecureEndpoint(t)},i=this.getName(n),o=this.incrementSockets(i);Promise.resolve().then(()=>this.connect(e,n)).then(a=>{if(this.decrementSockets(i,o),a instanceof c.Agent)try{return a.addRequest(e,n)}catch(e){return r(e)}this[u].currentSocket=a,super.createSocket(e,t,r)},e=>{this.decrementSockets(i,o),r(e)})}createConnection(){let e=this[u].currentSocket;if(this[u].currentSocket=void 0,!e)throw Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[u].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[u]&&(this[u].defaultPort=e)}get protocol(){return this[u].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[u]&&(this[u].protocol=e)}}t.Agent=d},69985:(e,t,r)=>{e.exports=r(78905).satisfies(process.version,">=15.7.0")},70436:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});let n={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};class i{constructor(e){this._contextMap=e instanceof i?new Map(e._contextMap):new Map}setValue(e,t){let r=new i(this);return r._contextMap.set(e,t),r}getValue(e){return this._contextMap.get(e)}deleteValue(e){let t=new i(this);return t._contextMap.delete(e),t}}let o=r(62646).w;function a(){return o.instrumenterImplementation||(o.instrumenterImplementation={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:function(e={}){let t=new i(e.parentContext);return e.span&&(t=t.setValue(n.span,e.span)),e.namespace&&(t=t.setValue(n.namespace,e.namespace)),t}({parentContext:t.tracingContext})}),withContext:(e,t,...r)=>t(...r)}),o.instrumenterImplementation}function s(e){let{namespace:t,packageName:r,packageVersion:i}=e;function o(e,o,s){var c;let l=a().startSpan(e,Object.assign(Object.assign({},s),{packageName:r,packageVersion:i,tracingContext:null==(c=null==o?void 0:o.tracingOptions)?void 0:c.tracingContext})),u=l.tracingContext,d=l.span;return u.getValue(n.namespace)||(u=u.setValue(n.namespace,t)),d.setAttribute("az.namespace",u.getValue(n.namespace)),{span:d,updatedOptions:Object.assign({},o,{tracingOptions:Object.assign(Object.assign({},null==o?void 0:o.tracingOptions),{tracingContext:u})})}}async function s(e,t,r,n){let{span:i,updatedOptions:a}=o(e,t,n);try{let e=await c(a.tracingOptions.tracingContext,()=>Promise.resolve(r(a,i)));return i.setStatus({status:"success"}),e}catch(e){throw i.setStatus({status:"error",error:e}),e}finally{i.end()}}function c(e,t,...r){return a().withContext(e,t,...r)}return{startSpan:o,withSpan:s,withContext:c,parseTraceparentHeader:function(e){return a().parseTraceparentHeader(e)},createRequestHeaders:function(e){return a().createRequestHeaders(e)}}}},70767:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});class n extends Error{constructor(e){super(e),this.name="AbortError"}}},70830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{METADATA_BOUNDARY_NAME:function(){return r},OUTLET_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return n}});let r="__next_metadata_boundary__",n="__next_viewport_boundary__",i="__next_outlet_boundary__"},71884:(e,t,r)=>{"use strict";let n,i,o,a,s;r.d(t,{gv:()=>a$});let c="4.11.1",l="04b07795-8ddb-461a-bbee-02f9e1bf7b46";!function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(E||(E={}));let u=E.AzurePublicCloud,d=["*"],h={generatePluginConfiguration:function(e){let t={cache:{},broker:{...e.brokerOptions,isEnabled:e.brokerOptions?.enabled??!1,enableMsaPassthrough:e.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(e.tokenCachePersistenceOptions?.enabled){if(void 0===i)throw Error("Persistent token caching was requested, but no persistence provider was configured. You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`) and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling `useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`.");let r=e.tokenCachePersistenceOptions.name||"msal.cache";t.cache.cachePlugin=i({name:`${r}.nocae`,...e.tokenCachePersistenceOptions}),t.cache.cachePluginCae=i({name:`${r}.cae`,...e.tokenCachePersistenceOptions})}if(e.brokerOptions?.enabled)if(e.isVSCodeCredential){if(void 0===s)throw Error("Visual Studio Code Credential was requested, but no plugin was configured or no authentication record was found. You must install the identity-vscode plugin package (`npm install --save @azure/identity-vscode`) and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling `useIdentityPlugin(vsCodePlugin)` before using `enableBroker`.");t.broker.nativeBrokerPlugin=s.broker}else{if(void 0===o)throw Error("Broker for WAM was requested to be enabled, but no native broker was configured. You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`) and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling `useIdentityPlugin(brokerPlugin)` before using `enableBroker`.");t.broker.nativeBrokerPlugin=o.broker}return t}};class p extends Error{constructor(e,t){super(e,t),this.name="CredentialUnavailableError"}}let f="AuthenticationError";class g extends Error{statusCode;errorResponse;constructor(e,t,r){let n={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(e){return e&&"string"==typeof e.error&&"string"==typeof e.error_description}(t))n=y(t);else if("string"==typeof t)try{let e=JSON.parse(t);n=y(e)}catch(r){n=400===e?{error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${t}`}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${t}`}}else n={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${n.error} Status code: ${e}
More details:
${n.errorDescription},`,r),this.statusCode=e,this.errorResponse=n,this.name=f}}class m extends Error{errors;constructor(e,t){super(`${t}
${e.join("\n")}`),this.errors=e,this.name="AggregateAuthenticationError"}}function y(e){return{error:e.error,errorDescription:e.error_description,correlationId:e.correlation_id,errorCodes:e.error_codes,timestamp:e.timestamp,traceId:e.trace_id}}class v extends Error{scopes;getTokenOptions;constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}}var E,T,b,A=r(75735);let C=(0,A.KV)("identity");function S(e){return e.reduce((e,t)=>(process.env[t]?e.assigned.push(t):e.missing.push(t),e),{missing:[],assigned:[]})}function _(e){return`SUCCESS. Scopes: ${Array.isArray(e)?e.join(", "):e}.`}function I(e,t){let r="ERROR.";return e?.length&&(r+=` Scopes: ${Array.isArray(e)?e.join(", "):e}.`),`${r} Error message: ${"string"==typeof t?t:t.message}.`}function R(e,t,r=C){let n=t?`${t.fullTitle} ${e}`:e;return{title:e,fullTitle:n,info:function(e){r.info(`${n} =>`,e)},warning:function(e){r.warning(`${n} =>`,e)},verbose:function(e){r.verbose(`${n} =>`,e)},error:function(e){r.error(`${n} =>`,e)}}}function w(e,t=C){let r=R(e,void 0,t);return{...r,parent:t,getToken:R("=> getToken()",r,t)}}let O=(0,r(70436).y)({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:c}),k=w("ChainedTokenCredential");class P{_sources=[];constructor(...e){this._sources=e}async getToken(e,t={}){let{token:r}=await this.getTokenInternal(e,t);return r}async getTokenInternal(e,t={}){let r,n=null,i=[];return O.withSpan("ChainedTokenCredential.getToken",t,async t=>{for(let o=0;o<this._sources.length&&null===n;o++)try{n=await this._sources[o].getToken(e,t),r=this._sources[o]}catch(t){if("CredentialUnavailableError"===t.name||"AuthenticationRequiredError"===t.name)i.push(t);else throw k.getToken.info(I(e,t)),t}if(!n&&i.length>0){let t=new m(i,"ChainedTokenCredential authentication failed.");throw k.getToken.info(I(e,t)),t}if(k.getToken.info(`Result for ${r.constructor.name}: ${_(e)}`),null===n)throw new p("Failed to retrieve a valid token");return{token:n,successfulCredential:r}})}}let N={SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],INVALID_INSTANCE:"invalid_instance"},M={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599},D=[N.OPENID_SCOPE,N.PROFILE_SCOPE,N.OFFLINE_ACCESS_SCOPE],x=[...D,N.EMAIL_SCOPE],L={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},U={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},$={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},j={SELECT_ACCOUNT:"select_account",NONE:"none"},q={S256:"S256"},F={CODE:"code",IDTOKEN_TOKEN:"id_token token"},B={QUERY:"query"},H={AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},G={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},z={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},V={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},K="appmetadata",Y={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},W={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},X={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},J={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Q={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Z={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ee={username:"username",password:"password"},et={FAILED_AUTO_DETECTION:"1",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},er={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},en={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},ei={BASE64:"base64",HEX:"hex",UTF8:"utf-8"},eo="https://login.microsoftonline.com/managed_identity/",ea={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},es={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},ec={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},el={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},eu={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},ed={GET:"get",POST:"post"},eh={SUCCESS_RANGE_START:M.SUCCESS_RANGE_START,SUCCESS_RANGE_END:M.SUCCESS_RANGE_END,SERVER_ERROR:M.SERVER_ERROR},ep={SHA256:"sha256"},ef={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},eg={KEY_SEPARATOR:"-"},em={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},ey={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},ev={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},eE={INTERVAL_MS:100,TIMEOUT_MS:5e3},eT="unexpected_error",eb="post_request_failed",eA={[eT]:"Unexpected error in authentication.",[eb]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};eA[eT],eA[eb];class eC extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,eC.prototype),this.errorCode=e||N.EMPTY_STRING,this.errorMessage=t||N.EMPTY_STRING,this.subError=r||N.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}class eS{constructor(e,t){this.cacheOutcome=en.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||N.EMPTY_STRING,this.wrapperVer=e.wrapperVer||N.EMPTY_STRING,this.telemetryCacheKey=X.CACHE_KEY+z.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${X.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let n=t.join(X.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(X.VALUE_SEPARATOR);return[X.SCHEMA_VERSION,i,n].join(X.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=eS.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(X.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(X.VALUE_SEPARATOR),i=e.errors.length,o=t<i?X.OVERFLOW_TRUE:X.OVERFLOW_FALSE,a=[i,o].join(X.VALUE_SEPARATOR);return[X.SCHEMA_VERSION,e.cacheHits,r,n,a].join(X.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=X.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof eC?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(X.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let e=this.getLastRequests(),t=eS.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0,i=e.errors.length;for(t=0;t<i;t++){let i=e.failedRequests[2*t]||N.EMPTY_STRING,o=e.failedRequests[2*t+1]||N.EMPTY_STRING,a=e.errors[t]||N.EMPTY_STRING;if((n+=i.toString().length+o.toString().length+a.length+3)<X.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||N.EMPTY_STRING),e.push(this.regionSource||N.EMPTY_STRING),e.push(this.regionOutcome||N.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){let{skus:t,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=e,a=new Map([[0,[r,n]],[2,[i,o]]]),s=[];if(t?.length){if((s=t.split(",")).length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){let{skuArr:t,index:r,skuName:n,skuVersion:i}=e;r>=t.length||(t[r]=[n,i].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}}let e_="client_id",eI="redirect_uri",eR="token_type",ew="req_cnf",eO="return_spa_code",ek="x-client-xtra-sku",eP="brk_client_id",eN="brk_redirect_uri",eM="instance_aware";class eD extends eC{constructor(e,t,r,n,i){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=i,Object.setPrototypeOf(this,eD.prototype)}}!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(T||(T={}));class ex{constructor(e,t,r){this.level=T.Info;let n=e||ex.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"==typeof n.logLevel?n.logLevel:T.Info,this.correlationId=n.correlationId||N.EMPTY_STRING,this.packageName=t||N.EMPTY_STRING,this.packageVersion=r||N.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:T.Info}}clone(e,t,r){return new ex({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let r=new Date().toUTCString(),n=`[${r}] : [${t.correlationId||this.correlationId||""}]`,i=`${n} : ${this.packageName}@${this.packageVersion} : ${T[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:T.Error,containsPii:!1,correlationId:t||N.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:T.Error,containsPii:!0,correlationId:t||N.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:T.Warning,containsPii:!1,correlationId:t||N.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:T.Warning,containsPii:!0,correlationId:t||N.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:T.Info,containsPii:!1,correlationId:t||N.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:T.Info,containsPii:!0,correlationId:t||N.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:T.Verbose,containsPii:!1,correlationId:t||N.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:T.Verbose,containsPii:!0,correlationId:t||N.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:T.Trace,containsPii:!1,correlationId:t||N.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:T.Trace,containsPii:!0,correlationId:t||N.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}let eL={Default:0,Adfs:1,Dsts:2,Ciam:3},eU="redirect_uri_empty",e$="claims_request_parsing_error",ej="authority_uri_insecure",eq="url_parse_error",eF="empty_url_error",eB="empty_input_scopes_error",eH="invalid_claims",eG="token_request_empty",ez="logout_request_empty",eV="invalid_code_challenge_method",eK="pkce_params_missing",eY="invalid_cloud_discovery_metadata",eW="invalid_authority_metadata",eX="untrusted_authority",eJ="missing_ssh_jwk",eQ="missing_ssh_kid",eZ="missing_nonce_authentication_header",e0="invalid_authentication_header",e1="cannot_set_OIDCOptions",e2="cannot_allow_platform_broker",e3="authority_mismatch",e6="invalid_request_method_for_EAR",e4="invalid_authorize_post_body_parameters",e5={[eU]:"A redirect URI is required for all calls, and none has been set.",[e$]:"Could not parse the given claims request object.",[ej]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[eq]:"URL could not be parsed into appropriate segments.",[eF]:"URL was empty or null.",[eB]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[eH]:"Given claims parameter must be a stringified JSON object.",[eG]:"Token request was empty and not found in cache.",[ez]:"The logout request was null or undefined.",[eV]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[eK]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[eY]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[eW]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[eX]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[eJ]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[eQ]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[eZ]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[e0]:"Invalid authentication header provided",[e1]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[e2]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[e3]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[e4]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[e6]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};e5[eU],e5[e$],e5[ej],e5[eq],e5[eF],e5[eB],e5[eH],e5[eG],e5[ez],e5[eV],e5[eK],e5[eY],e5[eW],e5[eX],e5[eJ],e5[eQ],e5[eZ],e5[e0],e5[e1],e5[e2],e5[e3],e5[e4],e5[e6];class e8 extends eC{constructor(e){super(e,e5[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,e8.prototype)}}function e9(e){return new e8(e)}class e7{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){let[r,i]=e.split(/=(.+)/g,2);r&&i&&(t[n(r)]=n(i))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}let te="client_info_decoding_error",tt="client_info_empty_error",tr="token_parsing_error",tn="null_or_empty_token",ti="endpoints_resolution_error",to="network_error",ta="openid_config_error",ts="hash_not_deserialized",tc="invalid_state",tl="state_mismatch",tu="state_not_found",td="nonce_mismatch",th="auth_time_not_found",tp="max_age_transpired",tf="multiple_matching_tokens",tg="multiple_matching_accounts",tm="multiple_matching_appMetadata",ty="request_cannot_be_made",tv="cannot_remove_empty_scope",tE="cannot_append_scopeset",tT="empty_input_scopeset",tb="device_code_polling_cancelled",tA="device_code_expired",tC="device_code_unknown_error",tS="no_account_in_silent_request",t_="invalid_cache_record",tI="invalid_cache_environment",tR="no_account_found",tw="no_crypto_object",tO="unexpected_credential_type",tk="invalid_assertion",tP="invalid_client_credential",tN="token_refresh_required",tM="user_timeout_reached",tD="token_claims_cnf_required_for_signedjwt",tx="authorization_code_missing_from_server_response",tL="binding_key_not_removed",tU="end_session_endpoint_not_supported",t$="key_id_missing",tj="no_network_connectivity",tq="user_canceled",tF="missing_tenant_id_error",tB="method_not_implemented",tH="nested_app_auth_bridge_disabled",tG={[te]:"The client info could not be parsed/decoded correctly",[tt]:"The client info was empty",[tr]:"Token cannot be parsed",[tn]:"The token is null or empty",[ti]:"Endpoints cannot be resolved",[to]:"Network request failed",[ta]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ts]:"The hash parameters could not be deserialized",[tc]:"State was not the expected format",[tl]:"State mismatch error",[tu]:"State not found",[td]:"Nonce mismatch error",[th]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[tp]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[tf]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[tg]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[tm]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ty]:"Token request cannot be made without authorization code or refresh token.",[tv]:"Cannot remove null or empty scope from ScopeSet",[tE]:"Cannot append ScopeSet",[tT]:"Empty input ScopeSet cannot be processed",[tb]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[tA]:"Device code is expired.",[tC]:"Device code stopped polling for unknown reasons.",[tS]:"Please pass an account object, silent flow is not supported without account information",[t_]:"Cache record object was null or undefined.",[tI]:"Invalid environment when attempting to create cache entry",[tR]:"No account found in cache for given key.",[tw]:"No crypto object detected.",[tO]:"Unexpected credential type.",[tk]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[tP]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tN]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[tM]:"User defined timeout for device code polling reached",[tD]:"Cannot generate a POP jwt if the token_claims are not populated",[tx]:"Server response does not contain an authorization code to proceed",[tL]:"Could not remove the credential's binding key from storage.",[tU]:"The provided authority does not support logout",[t$]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[tj]:"No network connectivity. Check your internet connection.",[tq]:"User cancelled the flow.",[tF]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[tB]:"This method has not been implemented",[tH]:"The nested app auth bridge is disabled"};tG[te],tG[tt],tG[tr],tG[tn],tG[ti],tG[to],tG[ta],tG[ts],tG[tc],tG[tl],tG[tu],tG[td],tG[th],tG[tp],tG[tf],tG[tg],tG[tm],tG[ty],tG[tv],tG[tE],tG[tT],tG[tb],tG[tA],tG[tC],tG[tS],tG[t_],tG[tI],tG[tR],tG[tw],tG[tO],tG[tk],tG[tP],tG[tN],tG[tM],tG[tD],tG[tx],tG[tL],tG[tU],tG[t$],tG[tj],tG[tq],tG[tF],tG[tH];class tz extends eC{constructor(e,t){super(e,t?`${tG[e]}: ${t}`:tG[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,tz.prototype)}}function tV(e,t){return new tz(e,t)}function tK(e){if(!e||0>e.indexOf("="))return null;try{let t=e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e,r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(e){throw tV(ts)}return null}function tY(e,t=!0,r){let n=[];return e.forEach((e,i)=>{!t&&r&&i in r?n.push(`${i}=${e}`):n.push(`${i}=${encodeURIComponent(e)}`)}),n.join("&")}class tW{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw e9(eF);e.includes("#")||(this._urlString=tW.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return e7.endsWith(t,"?")?t=t.slice(0,-1):e7.endsWith(t,"?/")&&(t=t.slice(0,-2)),e7.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw e9(eq)}if(!e.HostNameAndPort||!e.PathSegments)throw e9(eq);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw e9(ej)}static appendQueryString(e,t){return t?0>e.indexOf("?")?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return tW.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&(r[0]===U.COMMON||r[0]===U.ORGANIZATIONS)&&(r[0]=e),tW.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw e9(eq);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},n=r.AbsolutePath.split("/");return r.PathSegments=n=n.filter(e=>e&&e.length>0),r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw e9(eq);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===N.FORWARD_SLASH){let r=new tW(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new tW(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!tK(e)}}let tX={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},tJ=tX.endpointMetadata,tQ=tX.instanceDiscoveryMetadata,tZ=new Set;function t0(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){let i=t1(t,e);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function t1(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(n.aliases.includes(t))return n}return null}tQ.metadata.forEach(e=>{e.aliases.forEach(e=>{tZ.add(e)})});let t2={AAD:"AAD",OIDC:"OIDC"},t3={None:"none"},t6={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"};t6.AcquireTokenByCode,t6.AcquireTokenByRefreshToken,t6.AcquireTokenSilent,t6.AcquireTokenSilentAsync,t6.AcquireTokenPopup,t6.AcquireTokenRedirect,t6.CryptoOptsGetPublicKeyThumbprint,t6.CryptoOptsSignJwt,t6.SilentCacheClientAcquireToken,t6.SilentIframeClientAcquireToken,t6.SilentRefreshClientAcquireToken,t6.SsoSilent,t6.StandardInteractionClientGetDiscoveredAuthority,t6.FetchAccountIdWithNativeBroker,t6.NativeInteractionClientAcquireToken,t6.BaseClientCreateTokenRequestHeaders,t6.NetworkClientSendPostRequestAsync,t6.RefreshTokenClientExecutePostToTokenEndpoint,t6.AuthorizationCodeClientExecutePostToTokenEndpoint,t6.BrokerHandhshake,t6.AcquireTokenByRefreshTokenInBroker,t6.AcquireTokenByBroker,t6.RefreshTokenClientExecuteTokenRequest,t6.RefreshTokenClientAcquireToken,t6.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t6.RefreshTokenClientAcquireTokenByRefreshToken,t6.RefreshTokenClientCreateTokenRequestBody,t6.AcquireTokenFromCache,t6.SilentFlowClientAcquireCachedToken,t6.SilentFlowClientGenerateResultFromCacheRecord,t6.AcquireTokenBySilentIframe,t6.InitializeBaseRequest,t6.InitializeSilentRequest,t6.InitializeClientApplication,t6.InitializeCache,t6.ImportExistingCache,t6.SetUserData,t6.LocalStorageUpdated,t6.SilentIframeClientTokenHelper,t6.SilentHandlerInitiateAuthRequest,t6.SilentHandlerMonitorIframeForHash,t6.SilentHandlerLoadFrame,t6.SilentHandlerLoadFrameSync,t6.StandardInteractionClientCreateAuthCodeClient,t6.StandardInteractionClientGetClientConfiguration,t6.StandardInteractionClientInitializeAuthorizationRequest,t6.GetAuthCodeUrl,t6.HandleCodeResponseFromServer,t6.HandleCodeResponse,t6.HandleResponseEar,t6.HandleResponseCode,t6.HandleResponsePlatformBroker,t6.UpdateTokenEndpointAuthority,t6.AuthClientAcquireToken,t6.AuthClientExecuteTokenRequest,t6.AuthClientCreateTokenRequestBody,t6.PopTokenGenerateCnf,t6.PopTokenGenerateKid,t6.HandleServerTokenResponse,t6.DeserializeResponse,t6.AuthorityFactoryCreateDiscoveredInstance,t6.AuthorityResolveEndpointsAsync,t6.AuthorityResolveEndpointsFromLocalSources,t6.AuthorityGetCloudDiscoveryMetadataFromNetwork,t6.AuthorityUpdateCloudDiscoveryMetadata,t6.AuthorityGetEndpointMetadataFromNetwork,t6.AuthorityUpdateEndpointMetadata,t6.AuthorityUpdateMetadataWithRegionalInformation,t6.RegionDiscoveryDetectRegion,t6.RegionDiscoveryGetRegionFromIMDS,t6.RegionDiscoveryGetCurrentVersion,t6.AcquireTokenByCodeAsync,t6.GetEndpointMetadataFromNetwork,t6.GetCloudDiscoveryMetadataFromNetworkMeasurement,t6.HandleRedirectPromiseMeasurement,t6.HandleNativeRedirectPromiseMeasurement,t6.UpdateCloudDiscoveryMetadataMeasurement,t6.UsernamePasswordClientAcquireToken,t6.NativeMessageHandlerHandshake,t6.NativeGenerateAuthResult,t6.RemoveHiddenIframe,t6.ClearTokensAndKeysWithClaims,t6.CacheManagerGetRefreshToken,t6.GeneratePkceCodes,t6.GenerateCodeVerifier,t6.GenerateCodeChallengeFromVerifier,t6.Sha256Digest,t6.GetRandomValues,t6.GenerateHKDF,t6.GenerateBaseKey,t6.Base64Decode,t6.UrlEncodeArr,t6.Encrypt,t6.Decrypt,t6.GenerateEarKey,t6.DecryptEarResponse;let t4={InProgress:1},t5=(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);let a=n?.startMeasurement(t,i);i&&n?.incrementFields({[t+"CallCount"]:1},i);try{let n=e(...o);return a?.end({success:!0}),r.trace(`Returning result from ${t}`),n}catch(e){r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e}},t8=(e,t,r,n,i)=>(...o)=>{r.trace(`Executing function ${t}`);let a=n?.startMeasurement(t,i);return i&&n?.incrementFields({[t+"CallCount"]:1},i),n?.setPreQueueTime(t,i),e(...o).then(e=>(r.trace(`Returning result from ${t}`),a?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw a?.end({success:!1},e),e})};class t9{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(t6.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=et.ENVIRONMENT_VARIABLE;else{let e=t9.IMDS_OPTIONS;try{let n=await t8(this.getRegionFromIMDS.bind(this),t6.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(N.IMDS_VERSION,e);if(n.status===M.SUCCESS&&(r=n.body,t.region_source=et.IMDS),n.status===M.BAD_REQUEST){let n=await t8(this.getCurrentVersion.bind(this),t6.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=et.FAILED_AUTO_DETECTION,null;let i=await t8(this.getRegionFromIMDS.bind(this),t6.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(n,e);i.status===M.SUCCESS&&(r=i.body,t.region_source=et.IMDS)}}catch(e){return t.region_source=et.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=et.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(t6.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${N.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,N.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(t6.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${N.IMDS_ENDPOINT}?format=json`,e);if(t.status===M.BAD_REQUEST&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0)return t.body["newest-versions"][0];return null}catch(e){return null}}}function t7(e,t){let r=function(e){if(!e)throw tV(tn);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw tV(tr);return t[2]}(e);try{let e=t(r);return JSON.parse(e)}catch(e){throw tV(tr)}}function re(e,t){if(0===t||Date.now()-3e5>e+t)throw tV(tp)}function rt(){return Math.round(new Date().getTime()/1e3)}function rr(e){return e?new Date(1e3*Number(e)):new Date}function rn(e,t){let r=Number(e)||0;return rt()+t>r}function ri(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function ro(e){return!!e&&ri(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===V.ACCESS_TOKEN||e.credentialType===V.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function ra(e){return!!e&&ri(e)&&e.hasOwnProperty("realm")&&e.credentialType===V.ID_TOKEN}function rs(e){return!!e&&ri(e)&&e.credentialType===V.REFRESH_TOKEN}function rc(e,t){return!!t&&0===e.indexOf(K)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function rl(){return rt()+Y.REFRESH_TIME_SECONDS}function ru(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function rd(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function rh(e){return e.expiresAt<=rt()}t9.IMDS_OPTIONS={headers:{Metadata:"true"}};class rp{constructor(e,t,r,n,i,o,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=o,this.managedIdentity=s||!1,this.regionDiscovery=new t9(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(N.CIAM_AUTH_URL))return eL.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case N.ADFS:return eL.Adfs;case N.DSTS:return eL.Dsts}return eL.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new tW(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw tV(ti)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw tV(ti)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw tV(ti)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw tV(tU);return this.replacePath(this.metadata.end_session_endpoint)}throw tV(ti)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw tV(ti)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw tV(ti)}canReplaceTenant(e){return 1===e.PathSegments.length&&!rp.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===eL.Default&&this.protocolMode!==t2.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,r=new tW(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,i)=>{let o=n[i];if(0===i&&this.canReplaceTenant(r)){let e=new tW(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===eL.Adfs||this.protocolMode===t2.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(t6.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await t8(this.updateCloudDiscoveryMetadata.bind(this),t6.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=await t8(this.updateEndpointMetadata.bind(this),t6.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:rl(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==W.CACHE&&r?.source!==W.CACHE&&(e.expiresAt=rl(),e.canonical_authority=this.canonicalAuthority);let n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(t6.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===W.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(ru(e,await t8(this.updateMetadataWithRegionalInformation.bind(this),t6.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let r=await t8(this.getEndpointMetadataFromNetwork.bind(this),t6.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await t8(this.updateMetadataWithRegionalInformation.bind(this),t6.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),ru(e,r,!0),W.NETWORK;throw tV(ta,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),ru(e,t,!1),{source:W.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let t=this.getEndpointMetadataFromHardcodedValues();if(t)return ru(e,t,!1),{source:W.HARDCODED_VALUES,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=rh(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:W.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new tW(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw e9(eW)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(t6.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{var t;let r=await this.networkInterface.sendGetRequestAsync(e,{});if((t=r.body).hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri"))return r.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in tJ?tJ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(t6.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==N.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=er.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,rp.replaceWithRegionalInformation(e,t);let r=await t8(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),t6.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=er.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,rp.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=er.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(t6.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=await t8(this.getCloudDiscoveryMetadataFromNetwork.bind(this),t6.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return rd(e,r,!0),W.NETWORK;throw e9(eX)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||N.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||N.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||N.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),rd(e,t,!1),W.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var r;let t=(r=this.hostnameAndPort,t1(tQ.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),rd(e,t,!1),W.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=rh(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),W.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===eL.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),rp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=t1(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),e9(eY)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),rp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(t6.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${N.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t=null;try{var r,n;let i,o,a=await this.networkInterface.sendGetRequestAsync(e,{});if((r=a.body).hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata"))o=(i=a.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!((n=a.body).hasOwnProperty("error")&&n.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),(i=a.body).error===N.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),t=t1(o,this.hostnameAndPort)}catch(e){return e instanceof eC?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${e.errorCode}
Error Description: ${e.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${e.name}
Error Description: ${e.message}`),null}return t||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),t=rp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),t}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&tW.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==t3.None){let e=t.tenant?t.tenant:N.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return N.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw tV(ti)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return tZ.has(e)}static isPublicCloudAuthority(e){return N.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let n=new tW(e);n.validateAsUri();let i=n.getUrlComponents(),o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${N.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=tW.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:o}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r={...e};return r.authorization_endpoint=rp.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=rp.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=rp.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,r=new tW(e).getUrlComponents();if(0===r.PathSegments.length&&r.HostNameAndPort.endsWith(N.CIAM_AUTH_URL)){let e=r.HostNameAndPort.split(".")[0];t=`${t}${e}${N.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function rf(e){return e.endsWith(N.FORWARD_SLASH)?e:`${e}${N.FORWARD_SLASH}`}rp.reservedTenantDomains=new Set(["{tenant}","{tenantid}",U.COMMON,U.CONSUMERS,U.ORGANIZATIONS]);let rg={createNewGuid:()=>{throw tV(tB)},base64Decode:()=>{throw tV(tB)},base64Encode:()=>{throw tV(tB)},base64UrlEncode:()=>{throw tV(tB)},encodeKid:()=>{throw tV(tB)},async getPublicKeyThumbprint(){throw tV(tB)},async removeTokenBindingKey(){throw tV(tB)},async clearKeystore(){throw tV(tB)},async signJwt(){throw tV(tB)},async hashString(){throw tV(tB)}},rm="@azure/msal-common",ry="15.10.0";class rv{constructor(e){let t=e?e7.trimArrayEntries([...e]):[],r=t?e7.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw e9(eB);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){return new rv((e||N.EMPTY_STRING).split(" "))}static createSearchScopes(e){let t=new rv(e);return t.containsOnlyOIDCScopes()?t.removeScope(N.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){let t=new rv(this.printScopesLowerCase().split(" "));return!!e&&t.scopes.has(e.toLowerCase())}containsScopeSet(e){return!!e&&!(e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return x.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw tV(tE)}}removeScope(e){if(!e)throw tV(tv);this.scopes.delete(e.trim())}removeOIDCScopes(){x.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw tV(tT);let t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw tV(tT);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):N.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function rE(e,t){return!!e&&!!t&&e===t.split(".")[1]}function rT(e,t,r,n){if(!n)return{tenantId:r,localAccountId:t,username:"",isHomeTenant:rE(r,e)};{let{oid:t,sub:r,tid:i,name:o,tfp:a,acr:s,preferred_username:c,upn:l,login_hint:u}=n,d=i||a||s||"";return{tenantId:d,localAccountId:t||r||"",name:o,username:c||l||"",loginHint:u,isHomeTenant:rE(d,e)}}}function rb(e,t,r,n){let i=e;if(t){let{isHomeTenant:r,...n}=t;i={...e,...n}}if(r){let{isHomeTenant:t,...o}=rT(e.homeAccountId,e.localAccountId,e.tenantId,r);i={...i,...o,idTokenClaims:r,idToken:n}}return i}let rA="cache_quota_exceeded",rC="cache_error_unknown",rS={[rA]:"Exceeded cache storage capacity.",[rC]:"Unexpected error occurred when using cache storage."};class r_ extends eC{constructor(e,t){let r=t||(rS[e]?rS[e]:rS[rC]);super(`${e}: ${r}`),Object.setPrototypeOf(this,r_.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}class rI{constructor(e,t,r,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(rm,ry),this.staticAuthorityOptions=i,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){let r=this.getAllAccounts(e,t);return r.length>1?r.sort(e=>e.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,i){let o,a=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let s=this.getIdToken(e,n,t,r.tenantId);return s&&(o=t7(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:rb(e,r,o,s?.secret)}getTenantProfilesFromAccountEntity(e,t,r,n){let i=e.getAccountInfo(),o=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let e=o.get(r);if(!e)return[];o=new Map([[r,e]])}let s=[];return o.forEach(e=>{let r=this.getTenantedAccountInfoByFilter(i,a,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return(!t.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&(!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return(!t||(!t.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))&&(!t.loginHint||!!this.matchLoginHintFromTokenClaims(e,t.loginHint))&&(!t.username||!!this.matchUsername(e.preferred_username,t.username))&&(!t.name||!!this.matchName(e,t.name))&&(!t.sid||!!this.matchSid(e,t.sid)))&&!0}async saveCacheRecord(e,t,r){if(!e)throw tV(t_);try{e.account&&await this.setAccount(e.account,t),e.idToken&&r?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&r?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(e){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof eC)throw e;throw e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new r_(rA):new r_(e.name,e.message):new r_(rC)}}async saveAccessToken(e,t){let r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),i=rv.fromString(e.target);n.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,r,!1))return;let n=this.getAccessTokenCredential(e,t);n&&this.credentialMatchesFilter(n,r)&&rv.fromString(n.target).intersectingScopeSets(i)&&this.removeAccessToken(e,t)}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),n=[];return r.forEach(r=>{let i=this.getAccount(r,t);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));a&&0===a.length||n.push(i)}),n}credentialMatchesFilter(e,t){return(!t.clientId||!!this.matchClientId(e,t.clientId))&&(!t.userAssertionHash||!!this.matchUserAssertionHash(e,t.userAssertionHash))&&("string"!=typeof t.homeAccountId||!!this.matchHomeAccountId(e,t.homeAccountId))&&(!t.environment||!!this.matchEnvironment(e,t.environment))&&(!t.realm||!!this.matchRealm(e,t.realm))&&(!t.credentialType||!!this.matchCredentialType(e,t.credentialType))&&(!t.familyId||!!this.matchFamilyId(e,t.familyId))&&(!t.target||!!this.matchTarget(e,t.target))&&(!t.requestedClaimsHash&&!e.requestedClaimsHash||e.requestedClaimsHash===t.requestedClaimsHash)&&(e.credentialType!==V.ACCESS_TOKEN_WITH_AUTH_SCHEME||(!t.tokenType||!!this.matchTokenType(e,t.tokenType))&&(t.tokenType!==J.SSH||!t.keyId||!!this.matchKeyId(e,t.keyId)))&&!0}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;let n=this.getAppMetadata(t);n&&(!e.environment||this.matchEnvironment(n,e.environment))&&(!e.clientId||this.matchClientId(n,e.clientId))&&(r[t]=n)}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;let n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t),this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),n=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(n).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(n).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(n).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==V.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==J.POP)return;let n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${n}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:V.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t,r),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=a;if(!n){let t=new Map;a.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});let n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let n=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;let n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&i.set(r,n)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let o=rv.createSearchScopes(t.scopes),a=t.authenticationScheme||J.BEARER,s=a&&a.toLowerCase()!==J.BEARER.toLowerCase()?V.ACCESS_TOKEN_WITH_AUTH_SCHEME:V.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:o,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];l.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){let t=this.getAccessTokenCredential(e,i);t&&this.credentialMatchesFilter(t,c)&&u.push(t)}});let d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),i)}),this.performanceClient.addFields({multiMatchedAT:u.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),u[0])}accessTokenKeyMatchesFilter(e,t,r){let n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===n.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){let e=t.target.asArray();for(let t=0;t<e.length;t++)if(r&&!n.includes(e[t].toLowerCase()))return!1;else if(!r&&n.includes(e[t].toLowerCase()))break}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;let i=this.getAccessTokenCredential(r,t);i&&this.credentialMatchesFilter(i,e)&&n.push(i)}),n}getRefreshToken(e,t,r,n,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:V.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,s=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,o)){let t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,o)&&s.push(t)}});let c=s.length;return c<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(c>1&&i&&r&&i.addFields({multiMatchedRT:c},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!!t.familyId||!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),i=n.length;if(i<1)return null;if(i>1)throw tV(tm);return n[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&"1"===t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&"string"==typeof e&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let r=function(e,t){let r,n=e.canonicalAuthority;if(n){let i=new tW(n).getUrlComponents().HostNameAndPort;r=t0(i,e.cloudDiscoveryMetadata?.metadata,W.CONFIG,t)||t0(i,tQ.metadata,W.HARDCODED_VALUES,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return(e.credentialType===V.ACCESS_TOKEN||e.credentialType===V.ACCESS_TOKEN_WITH_AUTH_SCHEME)&&!!e.target&&rv.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return -1!==e.indexOf(K)}isAuthorityMetadata(e){return -1!==e.indexOf(Y.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return`${Y.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}}class rR extends rI{async setAccount(){throw tV(tB)}getAccount(){throw tV(tB)}async setIdTokenCredential(){throw tV(tB)}getIdTokenCredential(){throw tV(tB)}async setAccessTokenCredential(){throw tV(tB)}getAccessTokenCredential(){throw tV(tB)}async setRefreshTokenCredential(){throw tV(tB)}getRefreshTokenCredential(){throw tV(tB)}setAppMetadata(){throw tV(tB)}getAppMetadata(){throw tV(tB)}setServerTelemetry(){throw tV(tB)}getServerTelemetry(){throw tV(tB)}setAuthorityMetadata(){throw tV(tB)}getAuthorityMetadata(){throw tV(tB)}getAuthorityMetadataKeys(){throw tV(tB)}setThrottlingCache(){throw tV(tB)}getThrottlingCache(){throw tV(tB)}removeItem(){throw tV(tB)}getKeys(){throw tV(tB)}getAccountKeys(){throw tV(tB)}getTokenKeys(){throw tV(tB)}generateCredentialKey(){throw tV(tB)}generateAccountKey(){throw tV(tB)}}class rw{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class rO{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:t4.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new rw}}startPerformanceMeasurement(){return new rw}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}let rk={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},rP={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:T.Info,correlationId:N.EMPTY_STRING},rN={claimsBasedCachingEnabled:!1},rM={async sendGetRequestAsync(){throw tV(tB)},async sendPostRequestAsync(){throw tV(tB)}},rD={sku:N.SKU,version:ry,cpu:N.EMPTY_STRING,os:N.EMPTY_STRING},rx={clientSecret:N.EMPTY_STRING,clientAssertion:void 0},rL={azureCloudInstance:t3.None,tenant:`${N.DEFAULT_COMMON_TENANT}`},rU={application:{appName:"",appVersion:""}};function r$(e){return e.authOptions.authority.options.protocolMode===t2.OIDC}let rj={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function rq(e,t){if(!e)throw tV(tt);try{let r=t(e);return JSON.parse(r)}catch(e){throw tV(te)}}function rF(e){if(!e)throw tV(te);let t=e.split(z.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?N.EMPTY_STRING:t[1]}}function rB(e,t,r){if(!t)return;let n=e.get(e_);n&&e.has(eP)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(eI)},t)}function rH(e,t){e.set("response_type",t)}function rG(e,t,r=!0,n=D){!r||n.includes("openid")||t.includes("openid")||n.push("openid");let i=new rv(r?[...t||[],...n]:t||[]);e.set("scope",i.printScopes())}function rz(e,t){e.set(e_,t)}function rV(e,t){e.set("login_hint",t)}function rK(e,t){e.set(L.CCS_HEADER,`UPN:${t}`)}function rY(e,t){e.set(L.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function rW(e,t){e.set("sid",t)}function rX(e,t,r){let n=function(e,t){let r;if(e)try{r=JSON.parse(e)}catch(e){throw e9(eH)}else r={};return t&&t.length>0&&(r.hasOwnProperty($.ACCESS_TOKEN)||(r[$.ACCESS_TOKEN]={}),r[$.ACCESS_TOKEN][$.XMS_CC]={values:t}),JSON.stringify(r)}(t,r);try{JSON.parse(n)}catch(e){throw e9(eH)}e.set("claims",n)}function rJ(e,t){e.set("client-request-id",t)}function rQ(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function rZ(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function r0(e,t){t&&e.set("state",t)}function r1(e,t){e.set("client_secret",t)}function r2(e,t){t&&e.set("client_assertion",t)}function r3(e,t){t&&e.set("client_assertion_type",t)}function r6(e,t){e.set("grant_type",t)}function r4(e){e.set("client_info","1")}function r5(e){e.has(eM)||e.set(eM,"true")}function r8(e,t){Object.entries(t).forEach(([t,r])=>{!e.has(t)&&r&&e.set(t,r)})}function r9(e,t){t&&(e.set(eR,J.POP),e.set(ew,t))}function r7(e,t){t&&(e.set(eR,J.SSH),e.set(ew,t))}function ne(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function nt(e){e.set("x-ms-lib-capability",Q.X_MS_LIB_CAPABILITY_VALUE)}function nr(e,t,r){e.has(eP)||e.set(eP,t),e.has(eN)||e.set(eN,r)}async function nn(e,t,r,n,i,o,a){a?.addQueueMeasurement(t6.AuthorityFactoryCreateDiscoveredInstance,o);let s=rp.transformCIAMAuthority(rf(e)),c=new rp(s,t,r,n,i,o,a);try{return await t8(c.resolveEndpointsAsync.bind(c),t6.AuthorityResolveEndpointsAsync,i,a,o)(),c}catch(e){throw tV(ti)}}function ni(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}class no{static generateThrottlingStorageKey(e){return`${Q.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let n=no.generateThrottlingStorageKey(t),i=e.getThrottlingCache(n);if(i){if(i.throttleTime<Date.now())return void e.removeItem(n,r);throw new eD(i.errorCodes?.join(" ")||N.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,n){if(no.checkResponseStatus(r)||no.checkResponseForRetryAfter(r)){let i={throttleTime:no.calculateThrottleTime(parseInt(r.headers[L.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(no.generateThrottlingStorageKey(t),i,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(L.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){let t=Date.now()/1e3;return Math.floor(1e3*Math.min(t+((e<=0?0:e)||Q.DEFAULT_THROTTLE_TIME_SECONDS),t+Q.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,r,n){let i=ni(t,r,n),o=this.generateThrottlingStorageKey(i);e.removeItem(o,r.correlationId)}}class na extends eC{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,na.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}class ns{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:s,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){let p={...rP,...r};return{authOptions:{clientCapabilities:[],azureCloudOptions:rL,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...e},systemOptions:{...rk,...t},loggerOptions:p,cacheOptions:{...rN,...n},storageInterface:i||new rR(e.clientId,rg,new ex(p),new rO),networkInterface:o||rM,cryptoInterface:a||rg,clientCredentials:s||rx,libraryInfo:{...rD,...c},telemetry:{...rU,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new ex(this.config.loggerOptions,rm,ry),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[L.CONTENT_TYPE]=N.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case rj.HOME_ACCOUNT_ID:try{let r=rF(e.credential);t[L.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rj.UPN:t[L.CCS_HEADER]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);let a=await this.sendPostRequest(n,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,n){let i;no.preProcess(this.cacheManager,e,n);try{let e=(i=await t8(this.networkClient.sendPostRequestAsync.bind(this.networkClient),t6.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,n)(t,r)).headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:e[L.X_MS_HTTP_VERSION]||"",requestId:e[L.X_MS_REQUEST_ID]||""},n)}catch(e){if(e instanceof na){let t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[L.X_MS_HTTP_VERSION]||"",requestId:t[L.X_MS_REQUEST_ID]||"",contentTypeHeader:t[L.CONTENT_TYPE]||void 0,contentLengthHeader:t[L.CONTENT_LENGTH]||void 0,httpStatus:e.httpStatus},n),e.error}if(e instanceof eC)throw e;throw tV(to)}return no.postProcess(this.cacheManager,e,i,n),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(t6.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,n=await nn(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&nr(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&r8(t,e.tokenQueryParameters),rJ(t,e.correlationId),rB(t,e.correlationId,this.performanceClient),tY(t)}}function nc(e){return e&&(e.tid||e.tfp||e.acr)||null}class nl{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let n,i=new nl;t.authorityType===eL.Adfs?i.authorityType=G.ADFS_ACCOUNT_TYPE:t.protocolMode===t2.OIDC?i.authorityType=G.GENERIC_ACCOUNT_TYPE:i.authorityType=G.MSSTS_ACCOUNT_TYPE,e.clientInfo&&r&&(n=rq(e.clientInfo,r)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||t&&t.getPreferredCache();if(!o)throw tV(tI);i.environment=o,i.realm=n?.utid||nc(e.idTokenClaims)||"",i.localAccountId=n?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||s||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let t=rT(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[t]}return i}static createFromAccountInfo(e,t,r){let n=new nl;return n.authorityType=e.authorityType||G.GENERIC_ACCOUNT_TYPE,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.loginHint=e.loginHint,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n}static generateHomeAccountId(e,t,r,n,i){if(t!==eL.Adfs&&t!==eL.Dsts){if(e)try{let t=rq(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){let r=e.idTokenClaims||{},i=t.idTokenClaims||{};n=r.iat===i.iat&&r.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}let nu="no_tokens_found",nd="native_account_unavailable",nh="refresh_token_expired",np="ux_not_allowed",nf="bad_token",ng=["interaction_required","consent_required","login_required",nf,np],nm=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ny={[nu]:"No refresh token found in the cache. Please sign-in.",[nd]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[nh]:"Refresh token has expired.",[nf]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[np]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};ny[nu],ny[nd],ny[nf];class nv extends eC{constructor(e,t,r,n,i,o,a,s){super(e,t,r),Object.setPrototypeOf(this,nv.prototype),this.timestamp=n||N.EMPTY_STRING,this.traceId=i||N.EMPTY_STRING,this.correlationId=o||N.EMPTY_STRING,this.claims=a||N.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function nE(e){return new nv(e,ny[e])}class nT{static setRequestState(e,t,r){let n=nT.generateLibraryState(e,r);return t?`${n}${N.RESOURCE_DELIM}${t}`:n}static generateLibraryState(e,t){if(!e)throw tV(tw);let r={id:e.createNewGuid()};t&&(r.meta=t);let n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw tV(tw);if(!t)throw tV(tc);try{let r=t.split(N.RESOURCE_DELIM),n=r[0],i=r.length>1?r.slice(1).join(N.RESOURCE_DELIM):N.EMPTY_STRING,o=e.base64Decode(n),a=JSON.parse(o);return{userRequestState:i||N.EMPTY_STRING,libraryState:a}}catch(e){throw tV(tc)}}}let nb={SW:"sw"};class nA{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(t6.PopTokenGenerateCnf,e.correlationId);let r=await t8(this.generateKid.bind(this),t6.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(t6.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:nb.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){let{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:a,shrNonce:s,shrOptions:c}=r,l=o?new tW(o):void 0,u=l?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:rt(),m:i?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...n},t,c,r.correlationId)}}class nC{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class nS{constructor(e,t,r,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||N.NOT_AVAILABLE} - Timestamp: ${e.timestamp||N.NOT_AVAILABLE} - Description: ${e.error_description||N.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||N.NOT_AVAILABLE} - Trace ID: ${e.trace_id||N.NOT_AVAILABLE}`,n=e.error_codes?.length?e.error_codes[0]:void 0,i=new eD(e.error,r,e.suberror,n,e.status);if(t&&e.status&&e.status>=M.SERVER_ERROR_RANGE_START&&e.status<=M.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);if(t&&e.status&&e.status>=M.CLIENT_ERROR_RANGE_START&&e.status<=M.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);if(function(e,t,r){let n=!!e&&ng.indexOf(e)>-1,i=!!r&&nm.indexOf(r)>-1,o=!!t&&ng.some(e=>t.indexOf(e)>-1);return n||o||i}(e.error,e.error_description,e.suberror))throw new nv(e.error,e.error_description,e.suberror,e.timestamp||N.EMPTY_STRING,e.trace_id||N.EMPTY_STRING,e.correlation_id||N.EMPTY_STRING,e.claims||N.EMPTY_STRING,n);throw i}}async handleServerTokenResponse(e,t,r,n,i,o,a,s,c){let l,u,d;if(this.performanceClient?.addQueueMeasurement(t6.HandleServerTokenResponse,e.correlation_id),e.id_token){if(l=t7(e.id_token||N.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw tV(td);if(n.maxAge||0===n.maxAge){let e=l.auth_time;if(!e)throw tV(th);re(e,n.maxAge)}}this.homeAccountIdentifier=nl.generateHomeAccountId(e.client_info||N.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),i&&i.state&&(u=nT.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||n.sshKid||void 0;let h=this.generateCacheRecord(e,t,r,n,l,o,i);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),d=new nC(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(d)),a&&!s&&h.account){let e=this.cacheStorage.generateAccountKey(h.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,n.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await nS.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,u,void 0,c)}await this.cacheStorage.saveCacheRecord(h,n.correlationId,n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&d&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(d))}return nS.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,l,u,e,c)}generateCacheRecord(e,t,r,n,i,o,a){let s,c,l=t.getPreferredCache();if(!l)throw tV(tI);let u=nc(i);if(e.id_token&&i){var d,h,p,f;d=this.homeAccountIdentifier,h=e.id_token,p=this.clientId,f=u||"",s={credentialType:V.ID_TOKEN,homeAccountId:d,environment:l,clientId:p,secret:h,realm:f,lastUpdatedAt:Date.now().toString()},c=function(e,t,r,n,i,o,a,s,c,l,u,d){d?.verbose("setCachedAccount called");let h=e.getAccountKeys().find(e=>e.startsWith(r)),p=null;h&&(p=e.getAccount(h,i));let f=p||nl.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:s,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},t,n),g=f.tenantProfiles||[],m=c||f.realm;if(m&&!g.find(e=>e.tenantId===m)){let e=rT(r,f.localAccountId,m,o);g.push(e)}return f.tenantProfiles=g,f}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,i,e.client_info,l,u,a,void 0,this.logger)}let g=null;if(e.access_token){let i=e.scope?rv.fromString(e.scope):new rv(n.scopes||[]),a=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,s=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,c=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=r+a;g=function(e,t,r,n,i,o,a,s,c,l,u,d,h,p,f){let g={homeAccountId:e,credentialType:V.ACCESS_TOKEN,secret:r,cachedAt:rt().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:i,target:o,tokenType:u||J.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),l&&(g.refreshOn=l.toString()),p&&(g.requestedClaims=p,g.requestedClaimsHash=f),g.tokenType?.toLowerCase()!==J.BEARER.toLowerCase())switch(g.credentialType=V.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case J.POP:let m=t7(r,c);if(!m?.cnf?.kid)throw tV(tD);g.keyId=m.cnf.kid;break;case J.SSH:g.keyId=h}return g}(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||t.tenant||"",i.printScopes(),d,d+s,this.cryptoObj.base64Decode,c&&c>0?r+c:void 0,e.token_type,o,e.key_id,n.claims,n.requestedClaimsHash)}let m=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),m=function(e,t,r,n,i,o,a){let s={credentialType:V.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return o&&(s.userAssertionHash=o),i&&(s.familyId=i),a&&(s.expiresOn=a.toString()),s}(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:l,familyId:e.foci}),{account:c,idToken:s,accessToken:g,refreshToken:m,appMetadata:y}}static async generateAuthenticationResult(e,t,r,n,i,o,a,s,c){let l,u,d=N.EMPTY_STRING,h=[],p=null,f=N.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==J.POP||i.popKid)d=r.accessToken.secret;else{let t=new nA(e),{secret:n,keyId:o}=r.accessToken;if(!o)throw tV(t$);d=await t.signPopToken(n,o,i)}h=rv.fromString(r.accessToken.target).asArray(),p=rr(r.accessToken.expiresOn),l=rr(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(u=rr(r.accessToken.refreshOn))}r.appMetadata&&(f="1"===r.appMetadata.familyId?"1":"");let g=o?.oid||o?.sub||"",m=o?.tid||"";s?.spa_accountid&&r.account&&(r.account.nativeAccountId=s?.spa_accountid);let y=r.account?rb(r.account.getAccountInfo(),void 0,o,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:g,tenantId:m,scopes:h,account:y,idToken:r?.idToken?.secret||"",idTokenClaims:o||{},accessToken:d,fromCache:n,expiresOn:p,extExpiresOn:l,refreshOn:u,correlationId:i.correlationId,requestId:c||N.EMPTY_STRING,familyId:f,tokenType:r.accessToken?.tokenType||N.EMPTY_STRING,state:a?a.userRequestState:N.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||N.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||N.EMPTY_STRING,code:s?.spa_code,fromNativeBroker:!1}}}async function n_(e,t,r){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:r})}class nI extends ns{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(t6.AuthClientAcquireToken,e.correlationId),!e.code)throw tV(ty);let r=rt(),n=await t8(this.executeTokenRequest.bind(this),t6.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=n.headers?.[L.X_MS_REQUEST_ID],o=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(n.body),t8(o.handleServerTokenResponse.bind(o),t6.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw e9(ez);let t=this.createLogoutUrlQueryString(e);return tW.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){let r;this.performanceClient?.addQueueMeasurement(t6.AuthClientExecuteTokenRequest,t.correlationId);let n=this.createTokenQueryParameters(t),i=tW.appendQueryString(e.tokenEndpoint,n),o=await t8(this.createTokenRequestBody.bind(this),t6.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);if(t.clientInfo)try{let e=rq(t.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${e.uid}${z.CLIENT_INFO_SEPARATOR}${e.utid}`,type:rj.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}let a=this.createTokenRequestHeaders(r||t.ccsCredential),s=ni(this.config.authOptions.clientId,t);return t8(this.executePostToTokenEndpoint.bind(this),t6.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(i,o,a,s,t.correlationId,t6.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var t,r,n;let i;this.performanceClient?.addQueueMeasurement(t6.AuthClientCreateTokenRequestBody,e.correlationId);let o=new Map;if(rz(o,e.embeddedClientId||e.tokenBodyParameters?.[e_]||this.config.authOptions.clientId),this.includeRedirectUri)t=e.redirectUri,o.set(eI,t);else if(!e.redirectUri)throw e9(eU);if(rG(o,e.scopes,!0,this.oidcDefaultScopes),r=e.code,o.set("code",r),rQ(o,this.config.libraryInfo),rZ(o,this.config.telemetry.application),nt(o),this.serverTelemetryManager&&!r$(this.config)&&ne(o,this.serverTelemetryManager),e.codeVerifier&&(n=e.codeVerifier,o.set("code_verifier",n)),this.config.clientCredentials.clientSecret&&r1(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;r2(o,await n_(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r3(o,t.assertionType)}if(r6(o,H.AUTHORIZATION_CODE_GRANT),r4(o),e.authenticationScheme===J.POP){let t,r=new nA(this.cryptoUtils,this.performanceClient);r9(o,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await t8(r.generateCnf.bind(r),t6.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===J.SSH)if(e.sshJwk)r7(o,e.sshJwk);else throw e9(eJ);if((!e7.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(o,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{let t=rq(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${t.uid}${z.CLIENT_INFO_SEPARATOR}${t.utid}`,type:rj.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case rj.HOME_ACCOUNT_ID:try{let e=rF(i.credential);rY(o,e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rj.UPN:rK(o,i.credential)}return e.embeddedClientId&&nr(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&r8(o,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[eO]||r8(o,{[eO]:"1"}),rB(o,e.correlationId,this.performanceClient),tY(o)}createLogoutUrlQueryString(e){var t,r,n;let i=new Map;return e.postLogoutRedirectUri&&(t=e.postLogoutRedirectUri,i.set("post_logout_redirect_uri",t)),e.correlationId&&rJ(i,e.correlationId),e.idTokenHint&&(r=e.idTokenHint,i.set("id_token_hint",r)),e.state&&r0(i,e.state),e.logoutHint&&(n=e.logoutHint,i.set("logout_hint",n)),e.extraQueryParameters&&r8(i,e.extraQueryParameters),this.config.authOptions.instanceAware&&r5(i),tY(i,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}class nR extends ns{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(t6.RefreshTokenClientAcquireToken,e.correlationId);let t=rt(),r=await t8(this.executeTokenRequest.bind(this),t6.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[L.X_MS_REQUEST_ID],i=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),t8(i.handleServerTokenResponse.bind(i),t6.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw e9(eG);if(this.performanceClient?.addQueueMeasurement(t6.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw tV(tS);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await t8(this.acquireTokenWithCachedRefreshToken.bind(this),t6.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let e=r instanceof nv&&r.errorCode===nu,t=r instanceof eD&&r.errorCode===Z.INVALID_GRANT_ERROR&&r.subError===Z.CLIENT_MISMATCH_ERROR;if(e||t);else throw r}return t8(this.acquireTokenWithCachedRefreshToken.bind(this),t6.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(t6.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=t5(this.cacheManager.getRefreshToken.bind(this.cacheManager),t6.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw nE(nu);if(r.expiresOn&&rn(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),nE(nh);let n={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||J.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:rj.HOME_ACCOUNT_ID}};try{return await t8(this.acquireToken.bind(this),t6.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(n)}catch(t){if(t instanceof nv&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),t.subError===nf)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let t=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(t6.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),n=tW.appendQueryString(t.tokenEndpoint,r),i=await t8(this.createTokenRequestBody.bind(this),t6.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=ni(this.config.authOptions.clientId,e);return t8(this.executePostToTokenEndpoint.bind(this),t6.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(n,i,o,a,e.correlationId,t6.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var t,r;this.performanceClient?.addQueueMeasurement(t6.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let n=new Map;if(rz(n,e.embeddedClientId||e.tokenBodyParameters?.[e_]||this.config.authOptions.clientId),e.redirectUri&&(t=e.redirectUri,n.set(eI,t)),rG(n,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),r6(n,H.REFRESH_TOKEN_GRANT),r4(n),rQ(n,this.config.libraryInfo),rZ(n,this.config.telemetry.application),nt(n),this.serverTelemetryManager&&!r$(this.config)&&ne(n,this.serverTelemetryManager),r=e.refreshToken,n.set("refresh_token",r),this.config.clientCredentials.clientSecret&&r1(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;r2(n,await n_(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r3(n,t.assertionType)}if(e.authenticationScheme===J.POP){let t,r=new nA(this.cryptoUtils,this.performanceClient);r9(n,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await t8(r.generateCnf.bind(r),t6.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===J.SSH)if(e.sshJwk)r7(n,e.sshJwk);else throw e9(eJ);if((!e7.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case rj.HOME_ACCOUNT_ID:try{let t=rF(e.ccsCredential.credential);rY(n,t)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case rj.UPN:rK(n,e.ccsCredential.credential)}return e.embeddedClientId&&nr(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&r8(n,e.tokenBodyParameters),rB(n,e.correlationId,this.performanceClient),tY(n)}}class nw extends ns{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(t6.SilentFlowClientAcquireCachedToken,e.correlationId);let t=en.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!e7.isEmptyObj(e.claims))throw this.setCacheOutcome(en.FORCE_REFRESH_OR_CLAIMS,e.correlationId),tV(tN);if(!e.account)throw tV(tS);let r=e.account.tenantId||function(e){let t=new tW(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case U.COMMON:case U.ORGANIZATIONS:case U.CONSUMERS:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,n,r);if(i)if(Number(i.cachedAt)>rt()||rn(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(en.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),tV(tN);else i.refreshOn&&rn(i.refreshOn,0)&&(t=en.PROACTIVELY_REFRESHED);else throw this.setCacheOutcome(en.NO_CACHED_ACCESS_TOKEN,e.correlationId),tV(tN);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,n,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await t8(this.generateResultFromCacheRecord.bind(this),t6.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==en.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(t6.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(r=t7(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){let e=r?.auth_time;if(!e)throw tV(th);re(e,t.maxAge)}return nS.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class nO{static getNetworkResponse(e,t,r){return{headers:e,body:t,status:r}}static urlToHttpOptions(e){let t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}var nk=r(81630),nP=r(55591);class nN{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,r){return this.proxyUrl?nM(e,this.proxyUrl,ed.GET,t,this.customAgentOptions,r):nD(e,ed.GET,t,this.customAgentOptions,r)}async sendPostRequestAsync(e,t){return this.proxyUrl?nM(e,this.proxyUrl,ed.POST,t,this.customAgentOptions):nD(e,ed.POST,t,this.customAgentOptions)}}let nM=(e,t,r,n,i,o)=>{let a=new URL(e),s=new URL(t),c=n?.headers||{},l={host:s.hostname,port:s.port,method:"CONNECT",path:a.hostname,headers:c};i&&Object.keys(i).length&&(l.agent=new nk.Agent(i));let u="";if(r===ed.POST){let e=n?.body||"";u=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${e.length}\r
\r
${e}`}else o&&(l.timeout=o);let d=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+u+"\r\n";return new Promise((e,t)=>{let r=nk.request(l);o&&r.on("timeout",()=>{r.destroy(),t(Error("Request time out"))}),r.end(),r.on("connect",(n,i)=>{let o=n?.statusCode||eh.SERVER_ERROR;(o<eh.SUCCESS_RANGE_START||o>eh.SUCCESS_RANGE_END)&&(r.destroy(),i.destroy(),t(Error(`Error connecting to proxy. Http status code: ${n.statusCode}. Http status message: ${n?.statusMessage||"Unknown"}`))),i.write(d);let a=[];i.on("data",e=>{a.push(e)}),i.on("end",()=>{let t=Buffer.concat([...a]).toString().split("\r\n"),n=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],s=t.slice(1,t.length-2),c=new Map;s.forEach(e=>{let t=e.split(new RegExp(/:\s(.*)/s)),r=t[0],n=t[1];try{let e=JSON.parse(n);e&&"object"==typeof e&&(n=e)}catch(e){}c.set(r,n)});let l=Object.fromEntries(c),u=nO.getNetworkResponse(l,nx(n,i,l,o),n);(n<M.SUCCESS_RANGE_START||n>M.SUCCESS_RANGE_END)&&u.body.error!==em.AUTHORIZATION_PENDING&&r.destroy(),e(u)}),i.on("error",e=>{r.destroy(),i.destroy(),t(Error(e.toString()))})}),r.on("error",e=>{r.destroy(),t(Error(e.toString()))})})},nD=(e,t,r,n,i)=>{let o=t===ed.POST,a=r?.body||"",s=new URL(e),c={method:t,headers:r?.headers||{},...nO.urlToHttpOptions(s)};return n&&Object.keys(n).length&&(c.agent=new nP.Agent(n)),o?c.headers={...c.headers,"Content-Length":a.length}:i&&(c.timeout=i),new Promise((e,t)=>{let r;r="http:"===c.protocol?nk.request(c):nP.request(c),o&&r.write(a),i&&r.on("timeout",()=>{r.destroy(),t(Error("Request time out"))}),r.end(),r.on("response",t=>{let n=t.headers,i=t.statusCode,o=t.statusMessage,a=[];t.on("data",e=>{a.push(e)}),t.on("end",()=>{let t=Buffer.concat([...a]).toString(),s=nO.getNetworkResponse(n,nx(i,o,n,t),i);(i<M.SUCCESS_RANGE_START||i>M.SUCCESS_RANGE_END)&&s.body.error!==em.AUTHORIZATION_PENDING&&r.destroy(),e(s)})}),r.on("error",e=>{r.destroy(),t(Error(e.toString()))})})},nx=(e,t,r,n)=>{let i;try{i=JSON.parse(n)}catch(a){let n,o;e>=M.CLIENT_ERROR_RANGE_START&&e<=M.CLIENT_ERROR_RANGE_END?(n="client_error",o="A client"):e>=M.SERVER_ERROR_RANGE_START&&e<=M.SERVER_ERROR_RANGE_END?(n="server_error",o="A server"):(n="unknown_error",o="An unknown"),i={error:n,error_description:`${o} error occured.
Http status code: ${e}
Http status message: ${t||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},nL="invalid_file_extension",nU="invalid_file_path",n$="invalid_managed_identity_id_type",nj="invalid_secret",nq="platform_not_supported",nF="unable_to_create_azure_arc",nB="unable_to_create_cloud_shell",nH="unable_to_create_source",nG="unable_to_read_secret_file",nz="www_authenticate_header_missing",nV="www_authenticate_header_unsupported_format",nK={[ec.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[ec.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[ec.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[ec.MSI_ENDPOINT]:"msi_endpoint_url_malformed"},nY={[nL]:"The file path in the WWW-Authenticate header does not contain a .key file.",[nU]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[n$]:"More than one ManagedIdentityIdType was provided.",[nj]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[nq]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",missing_client_id:"A ManagedIdentityId id was not provided.",[nK.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${ec.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[nK.IDENTITY_ENDPOINT]:`The Managed Identity's '${ec.IDENTITY_ENDPOINT}' environment variable is malformed.`,[nK.IMDS_ENDPOINT]:`The Managed Identity's '${ec.IMDS_ENDPOINT}' environment variable is malformed.`,[nK.MSI_ENDPOINT]:`The Managed Identity's '${ec.MSI_ENDPOINT}' environment variable is malformed.`,network_unavailable:"Authentication unavailable. The request to the managed identity endpoint timed out.",[nF]:"Azure Arc Managed Identities can only be system assigned.",[nB]:"Cloud Shell Managed Identities can only be system assigned.",[nH]:"Unable to create a Managed Identity source based on environment variables.",[nG]:"Unable to read the secret file.",user_assigned_not_available_at_runtime:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[nz]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[nV]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class nW extends eC{constructor(e){super(e,nY[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,nW.prototype)}}function nX(e){return new nW(e)}class nJ{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let t=e?.userAssignedClientId,r=e?.userAssignedResourceId,n=e?.userAssignedObjectId;if(t){if(r||n)throw nX(n$);this.id=t,this.idType=eu.USER_ASSIGNED_CLIENT_ID}else if(r){if(t||n)throw nX(n$);this.id=r,this.idType=eu.USER_ASSIGNED_RESOURCE_ID}else if(n){if(t||r)throw nX(n$);this.id=n,this.idType=eu.USER_ASSIGNED_OBJECT_ID}else this.id="system_assigned_managed_identity",this.idType=eu.SYSTEM_ASSIGNED}}let nQ={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}};class nZ extends eC{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new nZ(nQ.invalidLoopbackAddressType.code,`${nQ.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new nZ(nQ.unableToLoadRedirectUri.code,`${nQ.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new nZ(nQ.noAuthCodeInResponse.code,`${nQ.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new nZ(nQ.noLoopbackServerExists.code,`${nQ.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new nZ(nQ.loopbackServerAlreadyExists.code,`${nQ.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new nZ(nQ.loopbackServerTimeout.code,`${nQ.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new nZ(nQ.stateNotFoundError.code,nQ.stateNotFoundError.desc)}static createThumbprintMissingError(){return new nZ(nQ.thumbprintMissing.code,nQ.thumbprintMissing.desc)}}let n0={clientId:N.EMPTY_STRING,authority:N.DEFAULT_AUTHORITY,clientSecret:N.EMPTY_STRING,clientAssertion:N.EMPTY_STRING,clientCertificate:{thumbprint:N.EMPTY_STRING,thumbprintSha256:N.EMPTY_STRING,privateKey:N.EMPTY_STRING,x5c:N.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:N.EMPTY_STRING,authorityMetadata:N.EMPTY_STRING,clientCapabilities:[],protocolMode:t2.AAD,azureCloudOptions:{azureCloudInstance:t3.None,tenant:N.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},n1={claimsBasedCachingEnabled:!1},n2={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:T.Info},n3={loggerOptions:n2,networkClient:new nN,proxyUrl:N.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},n6={application:{appName:N.EMPTY_STRING,appVersion:N.EMPTY_STRING}};var n4=r(55511),n5=r.n(n4);let n8=new Uint8Array(256),n9=n8.length,n7=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ie=[];for(let e=0;e<256;++e)ie.push((e+256).toString(16).substr(1));let it=function(e,t=0){let r=(ie[e[t+0]]+ie[e[t+1]]+ie[e[t+2]]+ie[e[t+3]]+"-"+ie[e[t+4]]+ie[e[t+5]]+"-"+ie[e[t+6]]+ie[e[t+7]]+"-"+ie[e[t+8]]+ie[e[t+9]]+"-"+ie[e[t+10]]+ie[e[t+11]]+ie[e[t+12]]+ie[e[t+13]]+ie[e[t+14]]+ie[e[t+15]]).toLowerCase();if(!("string"==typeof r&&n7.test(r)))throw TypeError("Stringified UUID is invalid");return r},ir=function(e,t,r){let n=(e=e||{}).random||(e.rng||function(){return n9>n8.length-16&&(n5().randomFillSync(n8),n9=0),n8.slice(n9,n9+=16)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return it(n)};class ii{generateGuid(){return ir()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class io{static base64Encode(e,t){return Buffer.from(e,t).toString(ei.BASE64)}static base64EncodeUrl(e,t){return io.base64Encode(e,t).replace(/=/g,N.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,ei.BASE64).toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return io.base64Decode(t)}}class ia{sha256(e){return n4.createHash(ep.SHA256).update(e).digest()}}class is{constructor(){this.hashUtils=new ia}async generatePkceCodes(){let e=this.generateCodeVerifier(),t=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:t}}generateCodeVerifier(){let e=[],t=256-256%ef.CV_CHARSET.length;for(;e.length<=32;){let r=n4.randomBytes(1)[0];if(r>=t)continue;let n=r%ef.CV_CHARSET.length;e.push(ef.CV_CHARSET[n])}let r=e.join(N.EMPTY_STRING);return io.base64EncodeUrl(r)}generateCodeChallengeFromVerifier(e){return io.base64EncodeUrl(this.hashUtils.sha256(e).toString(ei.BASE64),ei.BASE64)}}class ic{constructor(){this.pkceGenerator=new is,this.guidGenerator=new ii,this.hashUtils=new ia}base64UrlEncode(){throw Error("Method not implemented.")}encodeKid(){throw Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return io.base64Encode(e)}base64Decode(e){return io.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw Error("Method not implemented.")}removeTokenBindingKey(){throw Error("Method not implemented.")}clearKeystore(){throw Error("Method not implemented.")}signJwt(){throw Error("Method not implemented.")}async hashString(e){return io.base64EncodeUrl(this.hashUtils.sha256(e).toString(ei.BASE64),ei.BASE64)}}class il{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,realm:n.realm,localAccountId:n.local_account_id,username:n.username,authorityType:n.authority_type,name:n.name,clientInfo:n.client_info,lastModificationTime:n.last_modification_time,lastModificationApp:n.last_modification_app,tenantProfiles:n.tenantProfiles?.map(e=>JSON.parse(e)),lastUpdatedAt:Date.now().toString()},o=new nl;rI.toObject(o,i),t[r]=o}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,realm:n.realm,target:n.target,cachedAt:n.cached_at,expiresOn:n.expires_on,extendedExpiresOn:n.extended_expires_on,refreshOn:n.refresh_on,keyId:n.key_id,tokenType:n.token_type,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r],i={homeAccountId:n.home_account_id,environment:n.environment,credentialType:n.credential_type,clientId:n.client_id,secret:n.secret,familyId:n.family_id,target:n.target,realm:n.realm,lastUpdatedAt:Date.now().toString()};t[r]=i}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(r){let n=e[r];t[r]={clientId:n.client_id,environment:n.environment,familyId:n.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}class iu{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,realm:n.realm,local_account_id:n.localAccountId,username:n.username,authority_type:n.authorityType,name:n.name,client_info:n.clientInfo,last_modification_time:n.lastModificationTime,last_modification_app:n.lastModificationApp,tenantProfiles:n.tenantProfiles?.map(e=>JSON.stringify(e))}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,realm:n.realm,target:n.target,cached_at:n.cachedAt,expires_on:n.expiresOn,extended_expires_on:n.extendedExpiresOn,refresh_on:n.refreshOn,key_id:n.keyId,token_type:n.tokenType,requestedClaims:n.requestedClaims,requestedClaimsHash:n.requestedClaimsHash,userAssertionHash:n.userAssertionHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={home_account_id:n.homeAccountId,environment:n.environment,credential_type:n.credentialType,client_id:n.clientId,secret:n.secret,family_id:n.familyId,target:n.target,realm:n.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(r){let n=e[r];t[r]={client_id:n.clientId,environment:n.environment,family_id:n.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}class id extends rI{constructor(e,t,r,n){super(t,r,e,new rO,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let r in e){let n=e[r];if("object"==typeof n)if(n instanceof nl)t.accounts[r]=n;else if(ra(n))t.idTokens[r]=n;else if(ro(n))t.accessTokens[r]=n;else if(rs(n))t.refreshTokens[r]=n;else{if(!rc(r,n))continue;t.appMetadata[r]=n}}return t}inMemoryCacheToCache(e){let t=this.getCache();return{...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata}}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);let r=this.getCache();r[e]=t,this.setCache(r)}generateCredentialKey(e){let t=e.credentialType===V.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==J.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(eg.KEY_SEPARATOR).toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment,t||e.tenantId||""].join(eg.KEY_SEPARATOR).toLowerCase()}getAccountKeys(){return Object.keys(this.getInMemoryCache().accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new nl,this.getItem(e)):null}async setAccount(e){let t=this.generateAccountKey(e.getAccountInfo());this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return ra(t)?t:null}async setIdTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return ro(t)?t:null}async setAccessTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return rs(t)?t:null}async setRefreshTokenCredential(e){let t=this.generateCredentialKey(e);this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return rc(e,t)?t:null}setAppMetadata(e){let t=function({environment:e,clientId:t}){return[K,e,t].join(z.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&function(e,t){let r=0===e.indexOf(X.CACHE_KEY),n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&t&&0===e.indexOf(Y.CACHE_KEY)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t,r,n=this.getItem(e);return n&&(t=!1,e&&(t=0===e.indexOf(Q.THROTTLING_PREFIX)),r=!0,n&&(r=n.hasOwnProperty("throttleTime")),t&&r)?n:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1,r=this.getCache();return r[e]&&(delete r[e],t=!0),t&&(this.setCache(r),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){return this.logger.trace("Retrieving all cache keys"),[...Object.keys(this.getCache())]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(e=>{this.removeItem(e)}),this.emitChange()}static generateInMemoryCache(e){return il.deserializeAllCache(il.deserializeJSONBlob(e))}static generateJsonCache(e){return iu.serializeAllCache(e)}updateCredentialCacheKey(e,t){let r=this.generateCredentialKey(t);if(e!==r){let n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}let ih={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}};class ip{constructor(e,t,r){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),r&&(this.persistence=r),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=iu.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let e=il.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=id.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new ic().createNewGuid()){let t;this.logger.trace("getAllAccounts called");try{return this.persistence&&(t=new nC(this,!1),await this.persistence.beforeCacheAccess(t)),this.storage.getAllAccounts({},e)}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(t=>t.localAccountId===e)[0]||null}async removeAccount(e,t){let r;this.logger.trace("removeAccount called");try{this.persistence&&(r=new nC(this,!0),await this.persistence.beforeCacheAccess(r)),this.storage.removeAccount(e,t||new ii().generateGuid())}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async overwriteCache(){if(!this.persistence)return void this.logger.info("No persistence layer specified, cache cannot be overwritten");this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new nC(this,!1);await this.persistence.beforeCacheAccess(e);let t=this.getCacheSnapshot();this.storage.setCache(t),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let r=this.mergeRemovals(e,t);return this.mergeUpdates(r,t)}mergeUpdates(e,t){return Object.keys(t).forEach(r=>{let n=t[r];if(e.hasOwnProperty(r)){let t=null!==n,i="object"==typeof n,o=!Array.isArray(n),a=void 0!==e[r]&&null!==e[r];t&&i&&o&&a?this.mergeUpdates(e[r],n):e[r]=n}else null!==n&&(e[r]=n)}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let r=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,n=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:r,AccessToken:n,RefreshToken:i,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,t){let r={...e};return Object.keys(e).forEach(e=>{t&&t.hasOwnProperty(e)||delete r[e]}),r}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...ih.Account,...e.Account},IdToken:{...ih.IdToken,...e.IdToken},AccessToken:{...ih.AccessToken,...e.AccessToken},RefreshToken:{...ih.RefreshToken,...e.RefreshToken},AppMetadata:{...ih.AppMetadata,...e.AppMetadata}}}}var ig=r(82634);class im{static fromAssertion(e){let t=new im;return t.jwt=e,t}static fromCertificate(e,t,r){let n=new im;return n.privateKey=t,n.thumbprint=e,n.useSha256=!1,r&&(n.publicCertificate=this.parseCertificate(r)),n}static fromCertificateWithSha256Thumbprint(e,t,r){let n=new im;return n.privateKey=t,n.thumbprint=e,n.useSha256=!0,r&&(n.publicCertificate=this.parseCertificate(r)),n}getJwt(e,t,r){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&r===this.jwtAudience?this.jwt:this.createJwt(e,t,r);if(this.jwt)return this.jwt;throw tV(tk)}createJwt(e,t,r){this.issuer=t,this.jwtAudience=r;let n=rt();this.expirationTime=n+600;let i={alg:this.useSha256?ev.PSS_256:ev.RSA_256};Object.assign(i,{[this.useSha256?ev.X5T_256:ev.X5T]:io.base64EncodeUrl(this.thumbprint,ei.HEX)}),this.publicCertificate&&Object.assign(i,{[ev.X5C]:this.publicCertificate});let o={[ev.AUDIENCE]:this.jwtAudience,[ev.EXPIRATION_TIME]:this.expirationTime,[ev.ISSUER]:this.issuer,[ev.SUBJECT]:this.issuer,[ev.NOT_BEFORE]:n,[ev.JWT_ID]:e.createNewGuid()};return this.jwt=ig.sign(o,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<rt()}static parseCertificate(e){let t,r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[];for(;null!==(t=r.exec(e));)n.push(t[1].replace(/\r*\n/g,N.EMPTY_STRING));return n}}let iy="@azure/msal-node",iv="3.7.0";class iE extends ns{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let t=rt(),r=await this.executeTokenRequest(this.authority,e),n=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return n.validateTokenResponse(r.body),n.handleServerTokenResponse(r.body,this.authority,t,e)}async executeTokenRequest(e,t){let r=this.createTokenQueryParameters(t),n=tW.appendQueryString(e.tokenEndpoint,r),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:rj.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(n,i,o,a,t.correlationId)}async createTokenRequestBody(e){var t,r;let n=new Map;rz(n,this.config.authOptions.clientId),t=e.username,n.set(ee.username,t),r=e.password,n.set(ee.password,r),rG(n,e.scopes),rH(n,F.IDTOKEN_TOKEN),r6(n,H.RESOURCE_OWNER_PASSWORD_GRANT),r4(n),rQ(n,this.config.libraryInfo),rZ(n,this.config.telemetry.application),nt(n),this.serverTelemetryManager&&ne(n,this.serverTelemetryManager),rJ(n,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&r1(n,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(r2(n,await n_(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r3(n,i.assertionType)),(!e7.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&rK(n,e.username),tY(n)}}class iT{constructor(e){this.config=function({auth:e,broker:t,cache:r,system:n,telemetry:i}){let o={...n3,networkClient:new nN(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||n2,disableInternalRetries:n?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw nZ.createStateNotFoundError();return{auth:{...n0,...e},broker:{...t},cache:{...n1,...r},system:{...o,...n},telemetry:{...n6,...i}}}(e),this.cryptoProvider=new ic,this.logger=new ex(this.config.system.loggerOptions,iy,iv),this.storage=new id(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){let t,r=e.cloudDiscoveryMetadata;if(r)try{t=JSON.parse(r)}catch(e){throw e9(eY)}return{canonicalAuthority:e.authority?rf(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth)),this.tokenCache=new ip(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||B.QUERY,authenticationScheme:J.BEARER,state:e.state||"",nonce:e.nonce||""},r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions);return function(e,t,r,n){let i=function(e,t,r,n){var i,o,a,s,c,l,u;let d=t.correlationId,h=new Map;if(rz(h,t.embeddedClientId||t.extraQueryParameters?.[e_]||e.clientId),rG(h,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),i=t.redirectUri,h.set(eI,i),rJ(h,d),o=t.responseMode,h.set("response_mode",o||B.QUERY),r4(h),t.prompt&&(a=t.prompt,h.set("prompt",a)),t.domainHint&&(s=t.domainHint,h.set("domain_hint",s)),t.prompt!==j.SELECT_ACCOUNT)if(t.sid&&t.prompt===j.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),rW(h,t.sid),n?.addFields({sidFromRequest:!0},d);else if(t.account){let e=(l=t.account,l.idTokenClaims?.sid||null),i=(u=t.account).loginHint||u.idTokenClaims?.login_hint||null;if(i&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),i=null),i){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),rV(h,i),n?.addFields({loginHintFromClaim:!0},d);try{let e=rF(t.account.homeAccountId);rY(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===j.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),rW(h,e),n?.addFields({sidFromClaim:!0},d);try{let e=rF(t.account.homeAccountId);rY(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),rV(h,t.loginHint),rK(h,t.loginHint),n?.addFields({loginHintFromRequest:!0},d);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),rV(h,t.account.username),n?.addFields({loginHintFromUpn:!0},d);try{let e=rF(t.account.homeAccountId);rY(h,e)}catch(e){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),rV(h,t.loginHint),rK(h,t.loginHint),n?.addFields({loginHintFromRequest:!0},d));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&(c=t.nonce,h.set("nonce",c)),t.state&&r0(h,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&rX(h,t.claims,e.clientCapabilities),t.embeddedClientId&&nr(h,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(eM)||r5(h),h}({...e.auth,authority:t,redirectUri:r.redirectUri||""},r,n);return rQ(i,{sku:em.MSAL_SKU,version:iv,cpu:process.arch||"",os:process.platform||""}),e.auth.protocolMode!==t2.OIDC&&rZ(i,e.telemetry.application),rH(i,F.CODE),r.codeChallenge&&r.codeChallengeMethod&&function(e,t,r){if(t&&r)e.set("code_challenge",t),e.set("code_challenge_method",r);else throw e9(eK)}(i,r.codeChallenge,r.codeChallengeMethod),r8(i,r.extraQueryParameters||{}),function(e,t,r,n){let i=tY(t,r,n);return tW.appendQueryString(e.authorizationEndpoint,i)}(t,i,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}(this.config,r,t,this.logger)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:J.BEARER},n=this.initializeServerTelemetryManager(ey.acquireTokenByCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri,n),a=new nI(o);return this.logger.verbose("Auth code client created",r.correlationId),await a.acquireToken(r,t)}catch(e){throw e instanceof eC&&e.setCorrelationId(r.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:J.BEARER},r=this.initializeServerTelemetryManager(ey.acquireTokenByRefreshToken,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new nR(i);return this.logger.verbose("Refresh token client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof eC&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},r=this.initializeServerTelemetryManager(ey.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,t.redirectUri||"",r),o=new nw(i);this.logger.verbose("Silent flow client created",t.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(t,o,i)}catch(e){if(e instanceof tz&&e.errorCode===tN)return new nR(i).acquireTokenByRefreshToken(t);throw e}}catch(e){throw e instanceof eC&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireCachedTokenSilent(e,t,r){let[n,i]=await t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...D]});if(i===en.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let t=new nR(r);try{await t.acquireTokenByRefreshToken(e)}catch{}}return n}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},r=this.initializeServerTelemetryManager(ey.acquireTokenByUsernamePassword,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new iE(i);return this.logger.verbose("Username password client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof eC&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw nZ.createStateNotFoundError();if(e!==t)throw tV(tl)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,r,n){return this.logger.verbose("buildOauthClientConfiguration called",t),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:r},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:em.MSAL_SKU,version:iv,cpu:process.arch||N.EMPTY_STRING,os:process.platform||N.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=im.fromAssertion(await n_(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:em.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===J.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=J.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!e7.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...D],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,r){return new eS({clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:r||!1},this.storage)}async createAuthority(e,t,r,n){this.logger.verbose("createAuthority called",t);let i=rp.generateAuthority(e,n||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:r,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return nn(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class ib{async listenForAuthCode(e,t){if(this.server)throw nZ.createLoopbackServerAlreadyExistsError();return new Promise((r,n)=>{this.server=nk.createServer((i,o)=>{let a=i.url;if(a){if(a===N.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.")}else{o.end(t||"Error occurred loading redirectUrl"),n(nZ.createUnableToLoadRedirectUrlError());return}let s=this.getRedirectUri(),c=tK(new URL(a,s).search)||{};c.code&&(o.writeHead(M.REDIRECT,{location:s}),o.end()),c.error&&o.end(t||`Error occurred: ${c.error}`),r(c)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw nZ.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),nZ.createInvalidLoopbackAddressTypeError();let t=e&&e.port;return`${em.HTTP_PROTOCOL}${em.LOCALHOST}:${t}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class iA extends ns{constructor(e){super(e)}async acquireToken(e){let t=await this.getDeviceCode(e);e.deviceCodeCallback(t);let r=rt(),n=await this.acquireTokenWithDeviceCode(e,t),i=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n),i.handleServerTokenResponse(n,this.authority,r,e)}async getDeviceCode(e){let t=this.createExtraQueryParameters(e),r=tW.appendQueryString(this.authority.deviceCodeEndpoint,t),n=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(r,n,i,o,e.correlationId)}createExtraQueryParameters(e){let t=new Map;return e.extraQueryParameters&&r8(t,e.extraQueryParameters),tY(t)}async executePostRequestToDeviceCodeEndpoint(e,t,r,n,i){let{body:{user_code:o,device_code:a,verification_uri:s,expires_in:c,interval:l,message:u}}=await this.sendPostRequest(n,e,{body:t,headers:r},i);return{userCode:o,deviceCode:a,verificationUri:s,expiresIn:c,interval:l,message:u}}createQueryString(e){let t=new Map;return rG(t,e.scopes),rz(t,this.config.authOptions.clientId),e.extraQueryParameters&&r8(t,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(t,e.claims,this.config.authOptions.clientCapabilities),tY(t)}continuePolling(e,t,r){if(r)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),tV(tb);if(t&&t<e&&rt()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),tV(tM);if(rt()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),tV(tA);return!0}async acquireTokenWithDeviceCode(e,t){let r=this.createTokenQueryParameters(e),n=tW.appendQueryString(this.authority.tokenEndpoint,r),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),a=e.timeout?rt()+e.timeout:void 0,s=rt()+t.expiresIn,c=1e3*t.interval;for(;this.continuePolling(s,a,e.cancel);){let t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},r=await this.executePostToTokenEndpoint(n,i,o,t,e.correlationId);if(!r.body||!r.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),r.body;if(r.body.error===N.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await function(e,t){return new Promise(t=>setTimeout(()=>t(void 0),e))}(c);else{var l;throw this.logger.info("Unexpected error in polling from the server"),new eC(eb,(l=r.body.error)?`${eA[eb]} ${l}`:eA[eb])}}throw this.logger.error("Polling stopped for unknown reasons."),tV(tC)}createTokenRequestBody(e,t){var r;let n=new Map;return rG(n,e.scopes),rz(n,this.config.authOptions.clientId),r6(n,H.DEVICE_CODE_GRANT),r=t.deviceCode,n.set("device_code",r),rJ(n,e.correlationId||this.config.cryptoInterface.createNewGuid()),r4(n),rQ(n,this.config.libraryInfo),rZ(n,this.config.telemetry.application),nt(n),this.serverTelemetryManager&&ne(n,this.serverTelemetryManager),(!e7.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(n,e.claims,this.config.authOptions.clientCapabilities),tY(n)}}class iC extends iT{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=eS.makeExtraSkuString({libraryName:em.MSAL_SKU,libraryVersion:iv})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let t=Object.assign(e,await this.initializeBaseRequest(e)),r=this.initializeServerTelemetryManager(ey.acquireTokenByDeviceCode,t.correlationId);try{let n=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,t.correlationId,"",r),o=new iA(i);return this.logger.verbose("Device code client created",t.correlationId),await o.acquireToken(t)}catch(e){throw e instanceof eC&&e.setCorrelationId(t.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);let{openBrowser:r,successTemplate:n,errorTemplate:i,windowHandle:o,loopbackClient:a,...s}=e;if(this.nativeBrokerPlugin){let r={...s,clientId:this.config.auth.clientId,scopes:e.scopes||D,redirectUri:`${em.HTTP_PROTOCOL}${em.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...s.extraQueryParameters,...s.tokenQueryParameters,[ek]:this.skus},accountId:s.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(r,o)}let{verifier:c,challenge:l}=await this.cryptoProvider.generatePkceCodes(),u=a||new ib,d={},h=null;try{let o=u.listenForAuthCode(n,i).then(e=>{d=e}).catch(e=>{h=e}),a=await this.waitForRedirectUri(u),p={...s,correlationId:t,scopes:e.scopes||D,redirectUri:a,responseMode:B.QUERY,codeChallenge:l,codeChallengeMethod:q.S256},f=await this.getAuthCodeUrl(p);if(await r(f),await o,h)throw h;if(d.error)throw new eD(d.error,d.error_description,d.suberror);if(!d.code)throw nZ.createNoAuthCodeInResponseError();let g=d.client_info,m={code:d.code,codeVerifier:c,clientInfo:g||N.EMPTY_STRING,...p};return await this.acquireTokenByCode(m)}finally{u.closeServer()}}async acquireTokenSilent(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){let r={...e,clientId:this.config.auth.clientId,scopes:e.scopes||D,redirectUri:`${em.HTTP_PROTOCOL}${em.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[ek]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(r)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,r)=>{let n=0,i=setInterval(()=>{if(eE.TIMEOUT_MS/eE.INTERVAL_MS<n){clearInterval(i),r(nZ.createLoopbackServerTimeoutError());return}try{let r=e.getRedirectUri();clearInterval(i),t(r);return}catch(e){if(e instanceof eC&&e.errorCode===nQ.noLoopbackServerExists.code)return void n++;clearInterval(i),r(e);return}},eE.INTERVAL_MS)})}}class iS extends ns{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[t,r]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return t?(r===en.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),t):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,r,n,i,o){let a,s=en.NOT_APPLICABLE;t.serializableCache&&t.persistencePlugin&&(a=new nC(t.serializableCache,!1),await t.persistencePlugin.beforeCacheAccess(a));let c=this.readAccessTokenFromCache(n,t.managedIdentityId?.id||t.authOptions.clientId,new rv(e.scopes||[]),i,e.correlationId);return(t.serializableCache&&t.persistencePlugin&&a&&await t.persistencePlugin.afterCacheAccess(a),c)?rn(c.expiresOn,t.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(en.CACHED_ACCESS_TOKEN_EXPIRED),[null,en.CACHED_ACCESS_TOKEN_EXPIRED]):(c.refreshOn&&rn(c.refreshOn.toString(),0)&&(s=en.PROACTIVELY_REFRESHED,o?.setCacheOutcome(en.PROACTIVELY_REFRESHED)),[await nS.generateAuthenticationResult(r,n,{account:null,idToken:null,accessToken:c,refreshToken:null,appMetadata:null},!0,e),s]):(o?.setCacheOutcome(en.NO_CACHED_ACCESS_TOKEN),[null,en.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,t,r,n,i){let o={homeAccountId:N.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:V.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:rv.createSearchScopes(r.asArray())},a=n.getAccessTokensByFilter(o,i);if(a.length<1)return null;if(a.length>1)throw tV(tf);return a[0]}async executeTokenRequest(e,t,r){let n,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=rt();let r=await this.appTokenProvider(t);n={access_token:r.accessToken,expires_in:r.expiresInSeconds,refresh_in:r.refreshInSeconds,token_type:J.BEARER}}else{let r=this.createTokenQueryParameters(e),o=tW.appendQueryString(t.tokenEndpoint,r),a=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=rt();let l=await this.executePostToTokenEndpoint(o,a,s,c,e.correlationId);(n=l.body).status=l.status}let o=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n,r),await o.handleServerTokenResponse(n,this.authority,i,e)}async createTokenRequestBody(e){let t=new Map;rz(t,this.config.authOptions.clientId),rG(t,e.scopes,!1),r6(t,H.CLIENT_CREDENTIALS_GRANT),rQ(t,this.config.libraryInfo),rZ(t,this.config.telemetry.application),nt(t),this.serverTelemetryManager&&ne(t,this.serverTelemetryManager),rJ(t,e.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&r1(t,this.config.clientCredentials.clientSecret);let r=e.clientAssertion||this.config.clientCredentials.clientAssertion;return r&&(r2(t,await n_(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r3(t,r.assertionType)),(!e7.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(t,e.claims,this.config.authOptions.clientCapabilities),tY(t)}}class i_ extends ns{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new rv(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let t,r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(rn(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(en.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),tV(tN)}else throw this.serverTelemetryManager?.setCacheOutcome(en.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),tV(tN);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i=null;if(n){let r=(t=t7(n.secret,io.base64Decode)).oid||t.sub,o={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:N.EMPTY_STRING,localAccountId:r||N.EMPTY_STRING};i=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(o),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),nS.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,t)}readIdTokenFromCacheForOBO(e,t){let r={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:V.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(r,t);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,t){let r=t.authenticationScheme||J.BEARER,n={credentialType:r&&r.toLowerCase()!==J.BEARER.toLowerCase()?V.ACCESS_TOKEN_WITH_AUTH_SCHEME:V.ACCESS_TOKEN,clientId:e,target:rv.createSearchScopes(this.scopeSet.asArray()),tokenType:r,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(n,t.correlationId),o=i.length;if(o<1)return null;if(o>1)throw tV(tf);return i[0]}async executeTokenRequest(e,t,r){let n=this.createTokenQueryParameters(e),i=tW.appendQueryString(t.tokenEndpoint,n),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),s={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=rt(),l=await this.executePostToTokenEndpoint(i,o,a,s,e.correlationId),u=new nS(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return u.validateTokenResponse(l.body),await u.handleServerTokenResponse(l.body,this.authority,c,e,void 0,r)}async createTokenRequestBody(e){var t;let r=new Map;rz(r,this.config.authOptions.clientId),rG(r,e.scopes),r6(r,H.JWT_BEARER),r4(r),rQ(r,this.config.libraryInfo),rZ(r,this.config.telemetry.application),nt(r),this.serverTelemetryManager&&ne(r,this.serverTelemetryManager),rJ(r,e.correlationId||this.config.cryptoInterface.createNewGuid()),r.set("requested_token_use","on_behalf_of"),t=e.oboAssertion,r.set("assertion",t),this.config.clientCredentials.clientSecret&&r1(r,this.config.clientCredentials.clientSecret);let n=this.config.clientCredentials.clientAssertion;return n&&(r2(r,await n_(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r3(r,n.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rX(r,e.claims,this.config.authOptions.clientCapabilities),tY(r)}}class iI extends iT{constructor(e){super(e);let t=!!this.config.auth.clientSecret,r=!!this.config.auth.clientAssertion,n=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(this.appTokenProvider)return;if(t&&r||r&&n||t&&n)throw tV(tP);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(n)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?im.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):im.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw tV(tP);this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t,r;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await n_(e.clientAssertion,this.config.auth.clientId),assertionType:em.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(e=>!D.includes(e))},o={...e,...i,clientAssertion:t},a=new tW(o.authority).getUrlComponents().PathSegments[0];if(Object.values(U).includes(a))throw tV(tF);let s=process.env.MSAL_FORCE_REGION;"DisableMsalForceRegion"!==o.azureRegion&&(r=!o.azureRegion&&s?s:o.azureRegion);let c={azureRegion:r,environmentRegion:process.env.REGION_NAME},l=this.initializeServerTelemetryManager(ey.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let t=await this.createAuthority(o.authority,o.correlationId,c,e.azureCloudOptions),r=await this.buildOauthClientConfiguration(t,o.correlationId,"",l),n=new iS(r,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await n.acquireToken(o)}catch(e){throw e instanceof eC&&e.setCorrelationId(o.correlationId),l.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)};try{let r=await this.createAuthority(t.authority,t.correlationId,void 0,e.azureCloudOptions),n=await this.buildOauthClientConfiguration(r,t.correlationId,"",void 0),i=new i_(n);return this.logger.verbose("On behalf of client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof eC&&e.setCorrelationId(t.correlationId),e}}}class iR{constructor(e,t,r){this.httpClientNoRetries=e,this.retryPolicy=t,this.logger=r}async sendNetworkRequestAsyncHelper(e,t,r){return e===ed.GET?this.httpClientNoRetries.sendGetRequestAsync(t,r):this.httpClientNoRetries.sendPostRequestAsync(t,r)}async sendNetworkRequestAsync(e,t,r){let n=await this.sendNetworkRequestAsyncHelper(e,t,r);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let i=0;for(;await this.retryPolicy.pauseForRetry(n.status,i,this.logger,n.headers[L.RETRY_AFTER]);)n=await this.sendNetworkRequestAsyncHelper(e,t,r),i++;return n}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(ed.GET,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(ed.POST,e,t)}}let iw={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"};class iO{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async getServerTokenResponseAsync(e,t,r,n){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,r;return e.body.expires_on&&(function(e){if("string"!=typeof e)return!1;let t=new Date(e);return!isNaN(t.getTime())&&t.toISOString()===e}(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),(r=e.body.expires_on-rt())>7200&&(t=r/2)),{status:e.status,access_token:e.body.access_token,expires_in:r,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,r,n){let i,o=this.createRequest(e.resource,t);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[es.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let t=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${t}`),o.queryParameters[es.XMS_CC]=t}let a=o.headers;a[L.CONTENT_TYPE]=N.URL_FORM_CONTENT_TYPE;let s={headers:a};Object.keys(o.bodyParameters).length&&(s.body=o.computeParametersBodyString());let c=this.disableInternalRetries?this.networkClient:new iR(this.networkClient,o.retryPolicy,this.logger),l=rt();try{i=o.httpMethod===ed.POST?await c.sendPostRequestAsync(o.computeUri(),s):await c.sendGetRequestAsync(o.computeUri(),s)}catch(e){if(e instanceof eC)throw e;throw tV(to)}let u=new nS(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(i,c,o,s);return u.validateTokenResponse(d,n),u.handleServerTokenResponse(d,r,l,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,t,r){switch(e){case eu.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${r?"2017+":"2019+"}] Adding user assigned client id to the request.`),r?iw.MANAGED_IDENTITY_CLIENT_ID_2017:iw.MANAGED_IDENTITY_CLIENT_ID;case eu.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),t?iw.MANAGED_IDENTITY_RESOURCE_ID_IMDS:iw.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case eu.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),iw.MANAGED_IDENTITY_OBJECT_ID;default:throw nX(n$)}}}iO.getValidatedEnvVariableUrlString=(e,t,r,n)=>{try{return new tW(t).urlString}catch(t){throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${e}' environment variable is malformed.`),nX(nK[e])}};class ik{calculateDelay(e,t){if(!e)return t;let r=Math.round(1e3*parseFloat(e));return isNaN(r)&&(r=new Date(e).valueOf()-new Date().valueOf()),Math.max(t,r)}}let iP=[M.NOT_FOUND,M.REQUEST_TIMEOUT,M.TOO_MANY_REQUESTS,M.SERVER_ERROR,M.SERVICE_UNAVAILABLE,M.GATEWAY_TIMEOUT];class iN{constructor(){this.linearRetryStrategy=new ik}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return 1e3}async pauseForRetry(e,t,r,n){if(iP.includes(e)&&t<3){let e=this.linearRetryStrategy.calculateDelay(n,iN.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return r.verbose(`Retrying request in ${e}ms (retry attempt: ${t+1})`),await new Promise(t=>setTimeout(t,e)),!0}return!1}}class iM{constructor(e,t,r){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=r||new iN}computeUri(){let e=new Map;this.queryParameters&&r8(e,this.queryParameters);let t=tY(e);return tW.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&r8(e,this.bodyParameters),tY(e)}}class iD extends iO{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){return[process.env[ec.IDENTITY_ENDPOINT],process.env[ec.IDENTITY_HEADER]]}static tryCreate(e,t,r,n,i){let[o,a]=iD.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${el.APP_SERVICE} managed identity is unavailable because one or both of the '${ec.IDENTITY_HEADER}' and '${ec.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let s=iD.getValidatedEnvVariableUrlString(ec.IDENTITY_ENDPOINT,o,el.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${el.APP_SERVICE} managed identity. Endpoint URI: ${s}. Creating ${el.APP_SERVICE} managed identity.`),new iD(e,t,r,n,i,o,a)}createRequest(e,t){let r=new iM(ed.GET,this.identityEndpoint);return r.headers[ea.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,r.queryParameters[es.API_VERSION]="2019-08-01",r.queryParameters[es.RESOURCE]=e,t.idType!==eu.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}var ix=r(29021),iL=r(33873);let iU="http://127.0.0.1:40342/metadata/identity/oauth2/token",i$="N/A: himds executable exists",ij={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},iq={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class iF extends iO{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static getEnvironmentVariables(){let e=process.env[ec.IDENTITY_ENDPOINT],t=process.env[ec.IMDS_ENDPOINT];if(!e||!t){let r=iq[process.platform];try{(0,ix.accessSync)(r,ix.constants.F_OK|ix.constants.R_OK),e=iU,t=i$}catch(e){}}return[e,t]}static tryCreate(e,t,r,n,i,o){let[a,s]=iF.getEnvironmentVariables();if(!a||!s)return e.info(`[Managed Identity] ${el.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${ec.IDENTITY_ENDPOINT}' and '${ec.IMDS_ENDPOINT}' are not defined. ${el.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(s===i$)e.info(`[Managed Identity] ${el.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${el.AZURE_ARC} endpoint: ${iU}. Creating ${el.AZURE_ARC} managed identity.`);else{let t=iF.getValidatedEnvVariableUrlString(ec.IDENTITY_ENDPOINT,a,el.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),iF.getValidatedEnvVariableUrlString(ec.IMDS_ENDPOINT,s,el.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${el.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${el.AZURE_ARC} managed identity.`)}if(o.idType!==eu.SYSTEM_ASSIGNED)throw nX(nF);return new iF(e,t,r,n,i,a)}createRequest(e){let t=new iM(ed.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[ea.METADATA_HEADER_NAME]="true",t.queryParameters[es.API_VERSION]="2019-11-01",t.queryParameters[es.RESOURCE]=e,t}async getServerTokenResponseAsync(e,t,r,n){let i;if(e.status===M.UNAUTHORIZED){let o,a,s=e.headers["www-authenticate"];if(!s)throw nX(nz);if(!s.includes("Basic realm="))throw nX(nV);let c=s.split("Basic realm=")[1];if(!ij.hasOwnProperty(process.platform))throw nX(nq);let l=ij[process.platform],u=iL.basename(c);if(!u.endsWith(".key"))throw nX(nL);if(l+u!==c)throw nX(nU);try{o=await (0,ix.statSync)(c).size}catch(e){throw nX(nG)}if(o>4096)throw nX(nj);try{a=(0,ix.readFileSync)(c,ei.UTF8)}catch(e){throw nX(nG)}let d=`Basic ${a}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),r.headers[ea.AUTHORIZATION_HEADER_NAME]=d;try{i=await t.sendGetRequestAsync(r.computeUri(),n)}catch(e){if(e instanceof eC)throw e;throw tV(to)}}return this.getServerTokenResponse(i||e)}}class iB extends iO{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.msiEndpoint=o}static getEnvironmentVariables(){return[process.env[ec.MSI_ENDPOINT]]}static tryCreate(e,t,r,n,i,o){let[a]=iB.getEnvironmentVariables();if(!a)return e.info(`[Managed Identity] ${el.CLOUD_SHELL} managed identity is unavailable because the '${ec.MSI_ENDPOINT} environment variable is not defined.`),null;let s=iB.getValidatedEnvVariableUrlString(ec.MSI_ENDPOINT,a,el.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${el.CLOUD_SHELL} managed identity. Endpoint URI: ${s}. Creating ${el.CLOUD_SHELL} managed identity.`),o.idType!==eu.SYSTEM_ASSIGNED)throw nX(nB);return new iB(e,t,r,n,i,a)}createRequest(e){let t=new iM(ed.POST,this.msiEndpoint);return t.headers[ea.METADATA_HEADER_NAME]="true",t.bodyParameters[es.RESOURCE]=e,t}}class iH{constructor(e,t,r){this.minExponentialBackoff=e,this.maxExponentialBackoff=t,this.exponentialDeltaBackoff=r}calculateDelay(e){return 0===e?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}}let iG=[M.NOT_FOUND,M.REQUEST_TIMEOUT,M.GONE,M.TOO_MANY_REQUESTS];class iz{constructor(){this.exponentialRetryStrategy=new iH(iz.MIN_EXPONENTIAL_BACKOFF_MS,iz.MAX_EXPONENTIAL_BACKOFF_MS,iz.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return 1e3}static get MAX_EXPONENTIAL_BACKOFF_MS(){return 4e3}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return 2e3}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return 1e4}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,t,r){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===M.GONE?7:3),(iG.includes(e)||e>=M.SERVER_ERROR_RANGE_START&&e<=M.SERVER_ERROR_RANGE_END&&t<this.maxRetries)&&t<this.maxRetries){let n=e===M.GONE?iz.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(t);return r.verbose(`Retrying request in ${n}ms (retry attempt: ${t+1})`),await new Promise(e=>setTimeout(e,n)),!0}return!1}}let iV="/metadata/identity/oauth2/token",iK=`http://169.254.169.254${iV}`;class iY extends iO{constructor(e,t,r,n,i,o){super(e,t,r,n,i),this.identityEndpoint=o}static tryCreate(e,t,r,n,i){let o;return process.env[ec.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${ec.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${el.IMDS} returned endpoint: ${process.env[ec.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),o=iY.getValidatedEnvVariableUrlString(ec.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[ec.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${iV}`,el.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${ec.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${el.IMDS}, using the default endpoint.`),o=iK),new iY(e,t,r,n,i,o)}createRequest(e,t){let r=new iM(ed.GET,this.identityEndpoint);return r.headers[ea.METADATA_HEADER_NAME]="true",r.queryParameters[es.API_VERSION]="2018-02-01",r.queryParameters[es.RESOURCE]=e,t.idType!==eu.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!0)]=t.id),r.retryPolicy=new iz,r}}class iW extends iO{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.identityEndpoint=o,this.identityHeader=a}static getEnvironmentVariables(){let e=process.env[ec.IDENTITY_ENDPOINT];return[e,process.env[ec.IDENTITY_HEADER],process.env[ec.IDENTITY_SERVER_THUMBPRINT]]}static tryCreate(e,t,r,n,i,o){let[a,s,c]=iW.getEnvironmentVariables();if(!a||!s||!c)return e.info(`[Managed Identity] ${el.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${ec.IDENTITY_HEADER}', '${ec.IDENTITY_ENDPOINT}' or '${ec.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let l=iW.getValidatedEnvVariableUrlString(ec.IDENTITY_ENDPOINT,a,el.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${el.SERVICE_FABRIC} managed identity. Endpoint URI: ${l}. Creating ${el.SERVICE_FABRIC} managed identity.`),o.idType!==eu.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${el.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new iW(e,t,r,n,i,a,s)}createRequest(e,t){let r=new iM(ed.GET,this.identityEndpoint);return r.headers[ea.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,r.queryParameters[es.API_VERSION]="2019-07-01-preview",r.queryParameters[es.RESOURCE]=e,t.idType!==eu.SYSTEM_ASSIGNED&&(r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),r}}let iX=`Only client id is supported for user-assigned managed identity in ${el.MACHINE_LEARNING}.`;class iJ extends iO{constructor(e,t,r,n,i,o,a){super(e,t,r,n,i),this.msiEndpoint=o,this.secret=a}static getEnvironmentVariables(){return[process.env[ec.MSI_ENDPOINT],process.env[ec.MSI_SECRET]]}static tryCreate(e,t,r,n,i){let[o,a]=iJ.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${el.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${ec.MSI_ENDPOINT}' and '${ec.MSI_SECRET}' environment variables are not defined.`),null;let s=iJ.getValidatedEnvVariableUrlString(ec.MSI_ENDPOINT,o,el.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${el.MACHINE_LEARNING} managed identity. Endpoint URI: ${s}. Creating ${el.MACHINE_LEARNING} managed identity.`),new iJ(e,t,r,n,i,o,a)}createRequest(e,t){let r=new iM(ed.GET,this.msiEndpoint);if(r.headers[ea.METADATA_HEADER_NAME]="true",r.headers[ea.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,r.queryParameters[es.API_VERSION]="2017-09-01",r.queryParameters[es.RESOURCE]=e,t.idType===eu.SYSTEM_ASSIGNED)r.queryParameters[iw.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[ec.DEFAULT_IDENTITY_CLIENT_ID];else if(t.idType===eu.USER_ASSIGNED_CLIENT_ID)r.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType,!1,!0)]=t.id;else throw Error(iX);return r}}class iQ{constructor(e,t,r,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=r,this.cryptoProvider=n,this.disableInternalRetries=i}async sendManagedIdentityTokenRequest(e,t,r,n){return iQ.identitySource||(iQ.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,t)),iQ.identitySource.acquireTokenWithManagedIdentity(e,t,r,n)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(e=>void 0!==e)}getManagedIdentitySource(){return iQ.sourceName=this.allEnvironmentVariablesAreDefined(iW.getEnvironmentVariables())?el.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(iD.getEnvironmentVariables())?el.APP_SERVICE:this.allEnvironmentVariablesAreDefined(iJ.getEnvironmentVariables())?el.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(iB.getEnvironmentVariables())?el.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(iF.getEnvironmentVariables())?el.AZURE_ARC:el.DEFAULT_TO_IMDS,iQ.sourceName}selectManagedIdentitySource(e,t,r,n,i,o){let a=iW.tryCreate(e,t,r,n,i,o)||iD.tryCreate(e,t,r,n,i)||iJ.tryCreate(e,t,r,n,i)||iB.tryCreate(e,t,r,n,i,o)||iF.tryCreate(e,t,r,n,i,o)||iY.tryCreate(e,t,r,n,i);if(!a)throw nX(nH);return a}}let iZ=[el.SERVICE_FABRIC];class i0{constructor(e){this.config=function({clientCapabilities:e,managedIdentityIdParams:t,system:r}){let n,i=new nJ(t);return{clientCapabilities:e||[],managedIdentityId:i,system:{loggerOptions:r?.loggerOptions||n2,networkClient:r?.networkClient?r.networkClient:new nN(r?.proxyUrl,r?.customAgentOptions)},disableInternalRetries:r?.disableInternalRetries||!1}}(e||{}),this.logger=new ex(this.config.system.loggerOptions,iy,iv);let t={canonicalAuthority:N.DEFAULT_AUTHORITY};i0.nodeStorage||(i0.nodeStorage=new id(this.logger,this.config.managedIdentityId.id,rg,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new ic;let r={protocolMode:t2.AAD,knownAuthorities:[eo],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new rp(eo,this.networkClient,i0.nodeStorage,r,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new iS({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new iQ(this.logger,i0.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new ia}async acquireToken(e){if(!e.resource)throw e9(eF);let t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(t.forceRefresh)return this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority);let[r,n]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,i0.nodeStorage);if(t.claims){let e=this.managedIdentityClient.getManagedIdentitySource();return r&&iZ.includes(e)&&(t.revokedTokenSha256Hash=this.hashUtils.sha256(r.accessToken).toString(ei.HEX)),this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}return r?(n===en.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority,!0)),r):this.acquireTokenFromManagedIdentity(t,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,t,r,n){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,t,r,n)}getManagedIdentitySource(){return iQ.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}var i1=r(82813),i2=r(26364);let i3=w("IdentityUtils");function i6(e,t,r){let n=t=>(i3.getToken.info(t),new v({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:t}));if(!t)throw n("No response");if(!t.expiresOn)throw n('Response had no "expiresOn" property.');if(!t.accessToken)throw n('Response had no "accessToken" property.')}function i4(e){let t=e?.authorityHost;return!t&&i1.qx&&(t=process.env.AZURE_AUTHORITY_HOST),t??u}function i5(e,t){return(t||(t=u),RegExp(`${e}/?$`).test(t))?t:t.endsWith("/")?t+e:`${t}/${e}`}let i8=(e,t=i1.Ll?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case T.Error:e.info(`MSAL ${t} V2 error: ${n}`);return;case T.Info:e.info(`MSAL ${t} V2 info message: ${n}`);return;case T.Verbose:e.info(`MSAL ${t} V2 verbose message: ${n}`);return;case T.Warning:e.info(`MSAL ${t} V2 warning: ${n}`);return}};function i9(e){switch(e){case"error":return T.Error;case"info":default:return T.Info;case"verbose":return T.Verbose;case"warning":return T.Warning}}function i7(e,t,r){if("AuthError"===t.name||"ClientAuthError"===t.name||"BrowserAuthError"===t.name)switch(t.errorCode){case"endpoints_resolution_error":return i3.info(I(e,t.message)),new p(t.message);case"device_code_polling_cancelled":return new i2.l("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":i3.info(I(e,`Authentication returned errorCode ${t.errorCode}`));break;default:i3.info(I(e,`Failed to acquire token: ${t.message}`))}return"ClientConfigurationError"===t.name||"BrowserConfigurationAuthError"===t.name||"AbortError"===t.name||"AuthenticationError"===t.name?t:"NativeAuthError"===t.name?(i3.info(I(e,`Error from the native broker: ${t.message} with status code: ${t.statusCode}`)),t):new v({scopes:e,getTokenOptions:r,message:t.message})}function oe(e){let t=[],r="";if(e)for(let n of e.split("."))"\\"===n.charAt(n.length-1)?r+=n.substr(0,n.length-1)+".":(r+=n,t.push(r),r="");return t}function ot(e,t,r){let n=t.type.className;if(!n)throw Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[n]}function or(e,t,r){let n=t.type.modelProperties;if(!n){let i=ot(e,t,r);if(!i)throw Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(!(n=null==i?void 0:i.type.modelProperties))throw Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${t.type.className}" for object "${r}".`)}return n}function on(e,t,r,n){if(!r||!e.xmlNamespace)return t;let i={[e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns"]:e.xmlNamespace};if(["Composite"].includes(e.type.name))if(t[XML_ATTRKEY])return t;else{let e=Object.assign({},t);return e[XML_ATTRKEY]=i,e}let o={};return o[n.xml.xmlCharKey]=t,o[XML_ATTRKEY]=i,o}function oi(e,t,r,n){var i;let o=oo(e,t);if(o){let a=o[n];if(a){"serializedName"===n&&(a=a.replace(/\\/gi,""));let o=r[a],s=null!=(i=t.type.uberParent)?i:t.type.className;if("string"==typeof o&&s){let r=function(e,t,r){let n=[r];for(;n.length;){let r=n.shift(),i=t===r?t:r+"."+t;if(Object.prototype.hasOwnProperty.call(e,i))return e[i];for(let[t,i]of Object.entries(e))t.startsWith(r+".")&&i.type.uberParent===r&&i.type.className&&n.push(i.type.className)}}(e.modelMappers.discriminators,o,s);r&&(t=r)}}}return t}function oo(e,t){return t.type.polymorphicDiscriminator||oa(e,t.type.uberParent)||oa(e,t.type.className)}function oa(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}let os={Sequence:"Sequence",String:"String",Stream:"Stream"};var oc=r(81905);let ol=r(31461).w;function ou(e,t,r){let n,i=t.parameterPath,o=t.mapper;if("string"==typeof i&&(i=[i]),Array.isArray(i)){if(i.length>0)if(o.isConstant)n=o.defaultValue;else{let t=od(e,i);!t.propertyFound&&r&&(t=od(r,i));let a=!1;t.propertyFound||(a=o.required||"options"===i[0]&&2===i.length),n=a?o.defaultValue:t.propertyValue}}else for(let t in o.required&&(n={}),i){let a=o.type.modelProperties[t],s=ou(e,{parameterPath:i[t],mapper:a},r);void 0!==s&&(n||(n={}),n[t]=s)}return n}function od(e,t){let r={propertyFound:!1},n=0;for(;n<t.length;++n){let r=t[n];if(e&&r in e)e=e[r];else break}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}let oh=Symbol.for("@azure/core-client original request");function op(e){if(oh in e)return op(e[oh]);let t=ol.operationRequestMap.get(e);return t||(t={},ol.operationRequestMap.set(e,t)),t}let of=["application/json","text/json"],og=["application/xml","application/atom+xml"];async function om(e,t,r,n,i){let o=await oy(e,t,r,n,i);if(!function(e){let t,r=op(e.request),n=null==r?void 0:r.shouldDeserialize;return void 0===n||("boolean"==typeof n?n:n(e))}(o))return o;let a=op(o.request),s=null==a?void 0:a.operationSpec;if(!s||!s.responses)return o;let c=function(e){let t,r=op(e.request),n=null==r?void 0:r.operationSpec;return n&&(t=(null==r?void 0:r.operationResponseGetter)?null==r?void 0:r.operationResponseGetter(n,e):n.responses[e.status]),t}(o),{error:l,shouldReturnResponse:u}=function(e,t,r,n){var i,o,a,s,c;let l=200<=e.status&&e.status<300;if(!function(e){let t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?!!r:l){if(!r)return{error:null,shouldReturnResponse:!1};else if(!r.isError)return{error:null,shouldReturnResponse:!1}}let u=null!=r?r:t.responses.default,d=(null==(i=e.request.streamResponseStatusCodes)?void 0:i.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,h=new oc.pj(d,{statusCode:e.status,request:e.request,response:e});if(!u&&!((null==(a=null==(o=e.parsedBody)?void 0:o.error)?void 0:a.code)&&(null==(c=null==(s=e.parsedBody)?void 0:s.error)?void 0:c.message)))throw h;let p=null==u?void 0:u.bodyMapper,f=null==u?void 0:u.headersMapper;try{if(e.parsedBody){let r,i=e.parsedBody;if(p){let e=i;if(t.isXML&&p.type.name===os.Sequence){e=[];let t=p.xmlElementName;"object"==typeof i&&t&&(e=i[t])}r=t.serializer.deserialize(p,e,"error.response.parsedBody",n)}let o=i.error||r||i;h.code=o.code,o.message&&(h.message=o.message),p&&(h.response.parsedBody=r)}e.headers&&f&&(h.response.parsedHeaders=t.serializer.deserialize(f,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){h.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:h,shouldReturnResponse:!1}}(o,s,c,n);if(l)throw l;if(u)return o;if(c){if(c.bodyMapper){let e=o.parsedBody;s.isXML&&c.bodyMapper.type.name===os.Sequence&&(e="object"==typeof e?e[c.bodyMapper.xmlElementName]:[]);try{o.parsedBody=s.serializer.deserialize(c.bodyMapper,e,"operationRes.parsedBody",n)}catch(e){throw new oc.pj(`Error ${e} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else"HEAD"===s.httpMethod&&(o.parsedBody=r.status>=200&&r.status<300);c.headersMapper&&(o.parsedHeaders=s.serializer.deserialize(c.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}async function oy(e,t,r,n,i){var o;if(!(null==(o=r.request.streamResponseStatusCodes)?void 0:o.has(r.status))&&r.bodyAsText){let o=r.bodyAsText,a=r.headers.get("Content-Type")||"",s=a?a.split(";").map(e=>e.toLowerCase()):[];try{if(0===s.length||s.some(t=>-1!==e.indexOf(t)))r.parsedBody=JSON.parse(o);else if(s.some(e=>-1!==t.indexOf(e))){if(!i)throw Error("Parsing XML not supported.");r.parsedBody=await i(o,n.xml)}}catch(n){let e=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,t=n.code||oc.pj.PARSE_ERROR;throw new oc.pj(e,{code:t,statusCode:r.status,request:r.request,response:r})}}return r}function ov(e){let t,{parameterPath:r,mapper:n}=e;return"string"==typeof r?r:Array.isArray(r)?r.join("."):n.serializedName}function oE(e,t){let r=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},r),{body:e.parsedBody});let n=t&&t.bodyMapper,i=!!(null==n?void 0:n.nullable),o=null==n?void 0:n.type.name;if("Stream"===o)return Object.assign(Object.assign({},r),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});let a="Composite"===o&&n.type.modelProperties||{},s=Object.keys(a).some(e=>""===a[e].serializedName);if("Sequence"===o||s){let t=null!=(c=e.parsedBody)?c:[];for(let r of Object.keys(a))a[r].serializedName&&(t[r]=null==(l=e.parsedBody)?void 0:l[r]);if(r)for(let e of Object.keys(r))t[e]=r[e];return!i||e.parsedBody||r||0!==Object.getOwnPropertyNames(a).length?t:null}var c,l,u,d={body:e.parsedBody,headers:r,hasNullableType:i,shouldWrapBody:(u=e.parsedBody,"Composite"!==o&&"Dictionary"!==o&&("string"==typeof u||"number"==typeof u||"boolean"==typeof u||(null==o?void 0:o.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))!==null||null==u))};let h=Object.assign(Object.assign({},d.headers),d.body);return d.hasNullableType&&0===Object.getOwnPropertyNames(h).length?d.shouldWrapBody?{body:null}:null:d.shouldWrapBody?Object.assign(Object.assign({},d.headers),{body:d.body}):h}let oT={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function ob(e,t){let r=e;for(let[e,n]of t)r=r.split(e).join(n);return r}let oA=(0,A.KV)("core-client");class oC{constructor(e={}){var t,r;if(this._requestContentType=e.requestContentType,this._endpoint=null!=(t=e.endpoint)?t:e.baseUri,e.baseUri&&oA.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(n||(n=(0,oc.fl)()),n),this.pipeline=e.pipeline||function(e){let t=function(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(e),r=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return function(e={}){let t=(0,oc.Fp)(null!=e?e:{});return e.credentialOptions&&t.addPolicy((0,oc.N$)({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(function(e={}){let t=e.stringifyXML;return{name:"serializationPolicy",async sendRequest(e,r){let n=op(e),i=null==n?void 0:n.operationSpec,o=null==n?void 0:n.operationArguments;return i&&o&&(function(e,t,r){var n,i;if(r.headerParameters)for(let n of r.headerParameters){let i=ou(t,n);if(null!=i||n.mapper.required){i=r.serializer.serialize(n.mapper,i,ov(n));let t=n.mapper.headerCollectionPrefix;if(t)for(let r of Object.keys(i))e.headers.set(t+r,i[r]);else e.headers.set(n.mapper.serializedName||ov(n),i)}}let o=null==(i=null==(n=t.options)?void 0:n.requestOptions)?void 0:i.customHeaders;if(o)for(let t of Object.keys(o))e.headers.set(t,o[t])}(e,o,i),function(e,t,r,n=function(){throw Error("XML serialization unsupported!")}){var i,o,a,s,c;let l=null==(i=t.options)?void 0:i.serializerOptions,u={xml:{rootName:null!=(o=null==l?void 0:l.xml.rootName)?o:"",includeRoot:null!=(a=null==l?void 0:l.xml.includeRoot)&&a,xmlCharKey:null!=(s=null==l?void 0:l.xml.xmlCharKey)?s:"_"}},d=u.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){e.body=ou(t,r.requestBody);let i=r.requestBody.mapper,{required:o,serializedName:a,xmlName:s,xmlElementName:l,xmlNamespace:h,xmlNamespacePrefix:p,nullable:f}=i,g=i.type.name;try{if(void 0!==e.body&&null!==e.body||f&&null===e.body||o){let t=ov(r.requestBody);e.body=r.serializer.serialize(i,e.body,t,u);let o=g===os.Stream;if(r.isXML){let t=p?`xmlns:${p}`:"xmlns",r=function(e,t,r,n,i){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){let r={};return r[i.xml.xmlCharKey]=n,r.$={[t]:e},r}return n}(h,t,g,e.body,u);g===os.Sequence?e.body=n(function(e,t,r,n){if(Array.isArray(e)||(e=[e]),!r||!n)return{[t]:e};let i={[t]:e};return i.$={[r]:n},i}(r,l||s||a,t,h),{rootName:s||a,xmlCharKey:d}):o||(e.body=n(r,{rootName:s||a,xmlCharKey:d}))}else{if(g===os.String&&((null==(c=r.contentType)?void 0:c.match("text/plain"))||"text"===r.mediaType))return;o||(e.body=JSON.stringify(e.body))}}}catch(e){throw Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(a,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0)for(let n of(e.formData={},r.formDataParameters)){let i=ou(t,n);if(null!=i){let t=n.mapper.serializedName||ov(n);e.formData[t]=r.serializer.serialize(n.mapper,i,ov(n),u)}}}(e,o,i,t)),r(e)}}}(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(function(e={}){var t,r,n,i,o,a,s;let c=null!=(r=null==(t=e.expectedContentTypes)?void 0:t.json)?r:of,l=null!=(i=null==(n=e.expectedContentTypes)?void 0:n.xml)?i:og,u=e.parseXML,d=e.serializerOptions,h={xml:{rootName:null!=(o=null==d?void 0:d.xml.rootName)?o:"",includeRoot:null!=(a=null==d?void 0:d.xml.includeRoot)&&a,xmlCharKey:null!=(s=null==d?void 0:d.xml.xmlCharKey)?s:"_"}};return{name:"deserializationPolicy",sendRequest:async(e,t)=>om(c,l,await t(e),h,u)}}(e.deserializationOptions),{phase:"Deserialize"}),t}(Object.assign(Object.assign({},e),{credentialOptions:r}))}(e),null==(r=e.additionalPolicies)?void 0:r.length)for(let{policy:t,position:r}of e.additionalPolicies){let e="perRetry"===r?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let r=t.baseUrl||this._endpoint;if(!r)throw Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let n=function(e,t,r,n){let i=function(e,t,r){var n;let i=new Map;if(null==(n=e.urlParameters)?void 0:n.length)for(let n of e.urlParameters){let o=ou(t,n,r),a=ov(n);o=e.serializer.serialize(n.mapper,o,a),n.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${n.mapper.serializedName||a}}`,o)}return i}(t,r,n),o=!1,a=ob(e,i);if(t.path){let e=ob(t.path,i);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),e.includes("://")?(a=e,o=!0):a=function(e,t){if(!t)return e;let r=new URL(e),n=r.pathname;n.endsWith("/")||(n=`${n}/`),t.startsWith("/")&&(t=t.substring(1));let i=t.indexOf("?");if(-1!==i){let e=t.substring(0,i),o=t.substring(i+1);n+=e,o&&(r.search=r.search?`${r.search}&${o}`:o)}else n+=t;return r.pathname=n,r.toString()}(a,e)}let{queryParams:s,sequenceParams:c}=function(e,t,r){var n;let i=new Map,o=new Set;if(null==(n=e.queryParameters)?void 0:n.length)for(let n of e.queryParameters){"Sequence"===n.mapper.type.name&&n.mapper.serializedName&&o.add(n.mapper.serializedName);let a=ou(t,n,r);if(null!=a||n.mapper.required){a=e.serializer.serialize(n.mapper,a,ov(n));let t=n.collectionFormat?oT[n.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(e=>null==e?"":e)),"Multi"===n.collectionFormat&&0===a.length)continue;Array.isArray(a)&&("SSV"===n.collectionFormat||"TSV"===n.collectionFormat)&&(a=a.join(t)),n.skipEncoding||(a=Array.isArray(a)?a.map(e=>encodeURIComponent(e)):encodeURIComponent(a)),Array.isArray(a)&&("CSV"===n.collectionFormat||"Pipes"===n.collectionFormat)&&(a=a.join(t)),i.set(n.mapper.serializedName||ov(n),a)}}return{queryParams:i,sequenceParams:o}}(t,r,n);return function(e,t,r,n=!1){if(0===t.size)return e;let i=new URL(e),o=function(e){let t=new Map;if(!e||"?"!==e[0])return t;for(let r of(e=e.slice(1)).split("&")){let[e,n]=r.split("=",2),i=t.get(e);i?Array.isArray(i)?i.push(n):t.set(e,[i,n]):t.set(e,n)}return t}(i.search);for(let[e,i]of t){let t=o.get(e);if(Array.isArray(t))if(Array.isArray(i)){t.push(...i);let r=new Set(t);o.set(e,Array.from(r))}else t.push(i);else t?(Array.isArray(i)?i.unshift(t):r.has(e)&&o.set(e,[t,i]),n||o.set(e,i)):o.set(e,i)}let a=[];for(let[e,t]of o)if("string"==typeof t)a.push(`${e}=${t}`);else if(Array.isArray(t))for(let r of t)a.push(`${e}=${r}`);else a.push(`${e}=${t}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}(a,s,c,o)}(r,t,e,this),i=(0,oc.G6)({url:n});i.method=t.httpMethod;let o=op(i);o.operationSpec=t,o.operationArguments=e;let a=t.contentType||this._requestContentType;a&&t.requestBody&&i.headers.set("Content-Type",a);let s=e.options;if(s){let e=s.requestOptions;e&&(e.timeout&&(i.timeout=e.timeout),e.onUploadProgress&&(i.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(i.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(o.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(i.allowInsecureConnection=!0)),s.abortSignal&&(i.abortSignal=s.abortSignal),s.tracingOptions&&(i.tracingOptions=s.tracingOptions)}this._allowInsecureConnection&&(i.allowInsecureConnection=!0),void 0===i.streamResponseStatusCodes&&(i.streamResponseStatusCodes=function(e){let t=new Set;for(let r in e.responses){let n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===os.Stream&&t.add(Number(r))}return t}(t));try{let e=await this.sendRequest(i),r=oE(e,t.responses[e.status]);return(null==s?void 0:s.onResponse)&&s.onResponse(e,r),r}catch(e){if("object"==typeof e&&(null==e?void 0:e.response)){let r=e.response,n=oE(r,t.responses[e.statusCode]||t.responses.default);e.details=n,(null==s?void 0:s.onResponse)&&s.onResponse(r,n,e)}throw e}}}let oS="/.default";function o_(e){let t="";if(Array.isArray(e)){if(1!==e.length)return;t=e[0]}else"string"==typeof e&&(t=e);return t.endsWith(oS)?t.substr(0,t.lastIndexOf(oS)):t}let oI="noCorrelationId";class oR extends oC{authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(e){let t=`azsdk-js-identity/${c}`,r=e?.userAgentOptions?.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${t}`:`${t}`,n=function(e){let t=e?.authorityHost;return i1.Ll&&(t=t??process.env.AZURE_AUTHORITY_HOST),t??u}(e);if(!n.startsWith("https:"))throw Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...e,userAgentOptions:{userAgentPrefix:r},baseUri:n}),this.authorityHost=n,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=e?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...e},e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){C.info(`IdentityClient: sending token request to [${e.url}]`);let t=await this.sendRequest(e);if(t.bodyAsText&&(200===t.status||201===t.status)){let r=JSON.parse(t.bodyAsText);if(!r.access_token)return null;this.logIdentifiers(t);let n={accessToken:{token:r.access_token,expiresOnTimestamp:function(e){if("number"==typeof e.expires_on)return 1e3*e.expires_on;if("string"==typeof e.expires_on){let t=+e.expires_on;if(!isNaN(t))return 1e3*t;let r=Date.parse(e.expires_on);if(!isNaN(r))return r}if("number"==typeof e.expires_in)return Date.now()+1e3*e.expires_in;throw Error(`Failed to parse token expiration from body. expires_in="${e.expires_in}", expires_on="${e.expires_on}"`)}(r),refreshAfterTimestamp:function(e){if(e.refresh_on){if("number"==typeof e.refresh_on)return 1e3*e.refresh_on;if("string"==typeof e.refresh_on){let t=+e.refresh_on;if(!isNaN(t))return 1e3*t;let r=Date.parse(e.refresh_on);if(!isNaN(r))return r}throw Error(`Failed to parse refresh_on from body. refresh_on="${e.refresh_on}"`)}}(r),tokenType:"Bearer"},refreshToken:r.refresh_token};return C.info(`IdentityClient: [${e.url}] token acquired, expires on ${n.accessToken.expiresOnTimestamp}`),n}{let e=new g(t.status,t.bodyAsText);throw C.warning(`IdentityClient: authentication error. HTTP status: ${t.status}, ${e.errorResponse.errorDescription}`),e}}async refreshAccessToken(e,t,r,n,i,o={}){if(void 0===n)return null;C.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${r} started`);let a={grant_type:"refresh_token",client_id:t,refresh_token:n,scope:r};void 0!==i&&(a.client_secret=i);let s=new URLSearchParams(a);return O.withSpan("IdentityClient.refreshAccessToken",o,async r=>{try{let n=(0,oc.G6)({url:`${this.authorityHost}/${e}/${"adfs"===e?"oauth2/token":"oauth2/v2.0/token"}`,method:"POST",body:s.toString(),abortSignal:o.abortSignal,headers:(0,oc.Nc)({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:r.tracingOptions}),i=await this.sendTokenRequest(n);return C.info(`IdentityClient: refreshed token for client ID: ${t}`),i}catch(e){if(e.name===f&&"interaction_required"===e.errorResponse.error)return C.info(`IdentityClient: interaction required for client ID: ${t}`),null;throw C.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${e}`),e}})}generateAbortSignal(e){let t=new AbortController,r=this.abortControllers.get(e)||[];r.push(t),this.abortControllers.set(e,r);let n=t.signal.onabort;return t.signal.onabort=(...r)=>{this.abortControllers.set(e,void 0),n&&n.apply(t.signal,r)},t.signal}abortRequests(e){let t=e||oI,r=[...this.abortControllers.get(t)||[],...this.abortControllers.get(oI)||[]];if(r.length){for(let e of r)e.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){let t=e?.body?.split("&").map(e=>e.split("=")).find(([e])=>"client-request-id"===e);return t&&t.length&&t[1]||oI}async sendGetRequestAsync(e,t){let r=(0,oc.G6)({url:e,method:"GET",body:t?.body,allowInsecureConnection:this.allowInsecureConnection,headers:(0,oc.Nc)(t?.headers),abortSignal:this.generateAbortSignal(oI)}),n=await this.sendRequest(r);return this.logIdentifiers(n),{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}async sendPostRequestAsync(e,t){let r=(0,oc.G6)({url:e,method:"POST",body:t?.body,headers:(0,oc.Nc)(t?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),n=await this.sendRequest(r);return this.logIdentifiers(n),{body:n.bodyAsText?JSON.parse(n.bodyAsText):void 0,headers:n.headers.toJSON(),status:n.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(this.allowLoggingAccountIdentifiers&&e.bodyAsText)try{let t=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!t)return;let r=t.split(".")[1],{appid:n,upn:i,tid:o,oid:a}=JSON.parse(Buffer.from(r,"base64").toString("utf8"));C.info(`[Authenticated account] Client ID: ${n}. Tenant ID: ${o}. User Principal Name: ${i||"No User Principal Name available"}. Object ID (user): ${a}`)}catch(e){C.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",e.message)}}}function ow(e){let t=e;return(void 0===t&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(t=process.env.AZURE_REGIONAL_AUTHORITY_NAME),t===b.AutoDiscoverRegion)?"AUTO_DISCOVER":t}function oO(e,t,r=[],n){let i;if(i=process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||"adfs"===e?e:t?.tenantId??e,e&&i!==e&&!r.includes("*")&&!r.some(e=>0===e.localeCompare(i))){let e=`The current credential is not configured to acquire tokens for tenant ${i}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`;throw n?.info(e),new p(e)}return i}function ok(e,t){if(!t.match(/^[0-9a-zA-Z-.]+$/)){let t=Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw e.info(I("",t)),t}}function oP(e,t,r){return t?(ok(e,t),t):(r||(r=l),r!==l)?"common":"organizations"}function oN(e){return e&&0!==e.length?e.includes("*")?d:e:[]}!function(e){e.AutoDiscoverRegion="AutoDiscoverRegion",e.USWest="westus",e.USWest2="westus2",e.USCentral="centralus",e.USEast="eastus",e.USEast2="eastus2",e.USNorthCentral="northcentralus",e.USSouthCentral="southcentralus",e.USWestCentral="westcentralus",e.CanadaCentral="canadacentral",e.CanadaEast="canadaeast",e.BrazilSouth="brazilsouth",e.EuropeNorth="northeurope",e.EuropeWest="westeurope",e.UKSouth="uksouth",e.UKWest="ukwest",e.FranceCentral="francecentral",e.FranceSouth="francesouth",e.SwitzerlandNorth="switzerlandnorth",e.SwitzerlandWest="switzerlandwest",e.GermanyNorth="germanynorth",e.GermanyWestCentral="germanywestcentral",e.NorwayWest="norwaywest",e.NorwayEast="norwayeast",e.AsiaEast="eastasia",e.AsiaSouthEast="southeastasia",e.JapanEast="japaneast",e.JapanWest="japanwest",e.AustraliaEast="australiaeast",e.AustraliaSouthEast="australiasoutheast",e.AustraliaCentral="australiacentral",e.AustraliaCentral2="australiacentral2",e.IndiaCentral="centralindia",e.IndiaSouth="southindia",e.IndiaWest="westindia",e.KoreaSouth="koreasouth",e.KoreaCentral="koreacentral",e.UAECentral="uaecentral",e.UAENorth="uaenorth",e.SouthAfricaNorth="southafricanorth",e.SouthAfricaWest="southafricawest",e.ChinaNorth="chinanorth",e.ChinaEast="chinaeast",e.ChinaNorth2="chinanorth2",e.ChinaEast2="chinaeast2",e.GermanyCentral="germanycentral",e.GermanyNorthEast="germanynortheast",e.GovernmentUSVirginia="usgovvirginia",e.GovernmentUSIowa="usgoviowa",e.GovernmentUSArizona="usgovarizona",e.GovernmentUSTexas="usgovtexas",e.GovernmentUSDodEast="usdodeast",e.GovernmentUSDodCentral="usdodcentral"}(b||(b={}));let oM=w("MsalClient");function oD(e,t,n={}){var i;let o={msalConfig:function(e,t,r={}){var n;let i=oP(r.logger??oM,t,e),o=i5(i,i4(r)),a=new oR({...r.tokenCredentialOptions,authorityHost:o,loggingOptions:r.loggingOptions});return{auth:{clientId:e,authority:o,knownAuthorities:(n=r.disableInstanceDiscovery,"adfs"===i&&o||n?[o]:[])},system:{networkClient:a,loggerOptions:{loggerCallback:i8(r.logger??oM),logLevel:i9((0,A.XM)()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging}}}}(e,t,n),cachedAccount:n.authenticationRecord?{localAccountId:(i=n.authenticationRecord).homeAccountId,environment:i.authority,username:i.username,homeAccountId:i.homeAccountId,tenantId:i.tenantId}:null,pluginConfiguration:h.generatePluginConfiguration(n),logger:n.logger??oM},a=new Map;async function s(e={}){let t=e.enableCae?"CAE":"default",r=a.get(t);if(r)return o.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),r;o.logger.getToken.info(`Creating new PublicClientApplication with CAE ${e.enableCae?"enabled":"disabled"}.`);let n=e.enableCae?o.pluginConfiguration.cache.cachePluginCae:o.pluginConfiguration.cache.cachePlugin;return o.msalConfig.auth.clientCapabilities=e.enableCae?["cp1"]:void 0,r=new iC({...o.msalConfig,broker:{nativeBrokerPlugin:o.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await n}}),a.set(t,r),r}let c=new Map;async function l(e={}){let t=e.enableCae?"CAE":"default",r=c.get(t);if(r)return o.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),r;o.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${e.enableCae?"enabled":"disabled"}.`);let n=e.enableCae?o.pluginConfiguration.cache.cachePluginCae:o.pluginConfiguration.cache.cachePlugin;return o.msalConfig.auth.clientCapabilities=e.enableCae?["cp1"]:void 0,r=new iI({...o.msalConfig,broker:{nativeBrokerPlugin:o.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await n}}),c.set(t,r),r}async function u(e,t,r={}){if(null===o.cachedAccount)throw o.logger.getToken.info("No cached account found in local state."),new v({scopes:t});r.claims&&(o.cachedClaims=r.claims);let n={account:o.cachedAccount,scopes:t,claims:o.cachedClaims};o.pluginConfiguration.broker.isEnabled&&(n.tokenQueryParameters||={},o.pluginConfiguration.broker.enableMsaPassthrough&&(n.tokenQueryParameters.msal_request_type="consumer_passthrough")),r.proofOfPossessionOptions&&(n.shrNonce=r.proofOfPossessionOptions.nonce,n.authenticationScheme="pop",n.resourceRequestMethod=r.proofOfPossessionOptions.resourceRequestMethod,n.resourceRequestUri=r.proofOfPossessionOptions.resourceRequestUrl),o.logger.getToken.info("Attempting to acquire token silently");try{return await e.acquireTokenSilent(n)}catch(e){throw i7(t,e,r)}}function d(e){return e?.tenantId?i5(e.tenantId,i4(n)):o.msalConfig.auth.authority}async function p(e,t,r,n){let i=null;try{i=await u(e,t,r)}catch(e){if("AuthenticationRequiredError"!==e.name)throw e;if(r.disableAutomaticAuthentication)throw new v({scopes:t,getTokenOptions:r,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(null===i)try{i=await n()}catch(e){throw i7(t,e,r)}return i6(t,i,r),o.cachedAccount=i?.account??null,o.logger.getToken.info(_(t)),{token:i.accessToken,expiresOnTimestamp:i.expiresOn.getTime(),refreshAfterTimestamp:i.refreshOn?.getTime(),tokenType:i.tokenType}}function f(e,t){return{openBrowser:async e=>{let t=await r.e(692).then(r.bind(r,15311));await t.default(e,{newInstance:!0})},scopes:e,authority:d(t),claims:t?.claims,loginHint:t?.loginHint,errorTemplate:t?.browserCustomizationOptions?.errorMessage,successTemplate:t?.browserCustomizationOptions?.successMessage,prompt:t?.loginHint?"login":"select_account"}}async function g(e,t,r={}){oM.verbose("Authentication will resume through the broker");let n=await s(r),i=f(e,r);o.pluginConfiguration.broker.parentWindowHandle?i.windowHandle=Buffer.from(o.pluginConfiguration.broker.parentWindowHandle):oM.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),o.pluginConfiguration.broker.enableMsaPassthrough&&((i.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),t?(i.prompt="none",oM.verbose("Attempting broker authentication using the default broker account")):oM.verbose("Attempting broker authentication without the default broker account"),r.proofOfPossessionOptions&&(i.shrNonce=r.proofOfPossessionOptions.nonce,i.authenticationScheme="pop",i.resourceRequestMethod=r.proofOfPossessionOptions.resourceRequestMethod,i.resourceRequestUri=r.proofOfPossessionOptions.resourceRequestUrl);try{return await n.acquireTokenInteractive(i)}catch(n){if(oM.verbose(`Failed to authenticate through the broker: ${n.message}`),r.disableAutomaticAuthentication)throw new v({scopes:e,getTokenOptions:r,message:"Cannot silently authenticate with default broker account."});if(t)return g(e,!1,r);throw n}}return{getActiveAccount:function(){if(o.cachedAccount){var t;return{authority:(t=o.cachedAccount).environment??"login.microsoftonline.com",homeAccountId:t.homeAccountId,tenantId:t.tenantId||"common",username:t.username,clientId:e,version:"1.0"}}},getBrokeredToken:async function(e,t,r={}){oM.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${t}`);let n=await g(e,t,r);return i6(e,n,r),o.cachedAccount=n?.account??null,o.logger.getToken.info(_(e)),{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime(),refreshAfterTimestamp:n.refreshOn?.getTime(),tokenType:n.tokenType}},getTokenByClientSecret:async function e(t,r,n={}){o.logger.getToken.info("Attempting to acquire token using client secret"),o.msalConfig.auth.clientSecret=r;let i=await l(n);try{let e=await i.acquireTokenByClientCredential({scopes:t,authority:d(n),azureRegion:ow(),claims:n?.claims});return i6(t,e,n),o.logger.getToken.info(_(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw i7(t,e,n)}},getTokenByClientAssertion:async function e(t,r,n={}){o.logger.getToken.info("Attempting to acquire token using client assertion"),o.msalConfig.auth.clientAssertion=r;let i=await l(n);try{let e=await i.acquireTokenByClientCredential({scopes:t,authority:d(n),azureRegion:ow(),claims:n?.claims,clientAssertion:r});return i6(t,e,n),o.logger.getToken.info(_(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw i7(t,e,n)}},getTokenByClientCertificate:async function e(t,r,n={}){o.logger.getToken.info("Attempting to acquire token using client certificate"),o.msalConfig.auth.clientCertificate=r;let i=await l(n);try{let e=await i.acquireTokenByClientCredential({scopes:t,authority:d(n),azureRegion:ow(),claims:n?.claims});return i6(t,e,n),o.logger.getToken.info(_(t)),{token:e.accessToken,expiresOnTimestamp:e.expiresOn.getTime(),refreshAfterTimestamp:e.refreshOn?.getTime(),tokenType:e.tokenType}}catch(e){throw i7(t,e,n)}},getTokenByDeviceCode:async function e(t,r,n={}){o.logger.getToken.info("Attempting to acquire token using device code");let i=await s(n);return p(i,t,n,()=>{let e={scopes:t,cancel:n?.abortSignal?.aborted??!1,deviceCodeCallback:r,authority:d(n),claims:n?.claims},o=i.acquireTokenByDeviceCode(e);return n.abortSignal&&n.abortSignal.addEventListener("abort",()=>{e.cancel=!0}),o})},getTokenByUsernamePassword:async function e(t,r,n,i={}){o.logger.getToken.info("Attempting to acquire token using username and password");let a=await s(i);return p(a,t,i,()=>{let e={scopes:t,username:r,password:n,authority:d(i),claims:i?.claims};return a.acquireTokenByUsernamePassword(e)})},getTokenByAuthorizationCode:async function(e,t,r,n,i={}){let a;return o.logger.getToken.info("Attempting to acquire token using authorization code"),n?(o.msalConfig.auth.clientSecret=n,a=await l(i)):a=await s(i),p(a,e,i,()=>a.acquireTokenByCode({scopes:e,redirectUri:t,code:r,authority:d(i),claims:i?.claims}))},getTokenOnBehalfOf:async function(e,t,r,n={}){oM.getToken.info("Attempting to acquire token on behalf of another user"),"string"==typeof r?(oM.getToken.info("Using client secret for on behalf of flow"),o.msalConfig.auth.clientSecret=r):"function"==typeof r?(oM.getToken.info("Using client assertion callback for on behalf of flow"),o.msalConfig.auth.clientAssertion=r):(oM.getToken.info("Using client certificate for on behalf of flow"),o.msalConfig.auth.clientCertificate=r);let i=await l(n);try{let r=await i.acquireTokenOnBehalfOf({scopes:e,authority:d(n),claims:n.claims,oboAssertion:t});return i6(e,r,n),oM.getToken.info(_(e)),{token:r.accessToken,expiresOnTimestamp:r.expiresOn.getTime(),refreshAfterTimestamp:r.refreshOn?.getTime(),tokenType:r.tokenType}}catch(t){throw i7(e,t,n)}},getTokenByInteractiveRequest:async function(e,t={}){oM.getToken.info("Attempting to acquire token interactively");let r=await s(t);return p(r,e,t,async()=>{let n=f(e,t);return o.pluginConfiguration.broker.isEnabled?g(e,o.pluginConfiguration.broker.useDefaultBrokerAccount??!1,t):(t.proofOfPossessionOptions&&(n.shrNonce=t.proofOfPossessionOptions.nonce,n.authenticationScheme="pop",n.resourceRequestMethod=t.proofOfPossessionOptions.resourceRequestMethod,n.resourceRequestUri=t.proofOfPossessionOptions.resourceRequestUrl),r.acquireTokenInteractive(n))})}}}var ox=r(77598),oL=r(51455);let oU="ClientCertificateCredential",o$=w(oU);class oj{tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(e,t,r,n={}){if(!e||!t)throw Error(`${oU}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=oN(n?.additionallyAllowedTenants),this.sendCertificateChain=n.sendCertificateChain,this.certificateConfiguration={..."string"==typeof r?{certificatePath:r}:r};let i=this.certificateConfiguration.certificate,o=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(i||o))throw Error(`${oU}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(i&&o)throw Error(`${oU}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=oD(t,e,{...n,logger:o$,tokenCredentialOptions:n})}async getToken(e,t={}){return O.withSpan(`${oU}.getToken`,t,async t=>{t.tenantId=oO(this.tenantId,t,this.additionallyAllowedTenantIds,o$);let r=Array.isArray(e)?e:[e],n=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(r,n,t)})}async buildClientCertificate(){let e,t=await oq(this.certificateConfiguration,this.sendCertificateChain??!1);return e=void 0!==this.certificateConfiguration.certificatePassword?(0,ox.createPrivateKey)({key:t.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():t.certificateContents,{thumbprint:t.thumbprint,thumbprintSha256:t.thumbprintSha256,privateKey:e,x5c:t.x5c}}}async function oq(e,t){let r,n=e.certificate,i=e.certificatePath,o=n||await (0,oL.readFile)(i,"utf8"),a=t?o:void 0,s=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[];do(r=s.exec(o))&&c.push(r[3]);while(r);if(0===c.length)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let l=(0,ox.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:o,thumbprintSha256:(0,ox.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),thumbprint:l,x5c:a}}function oF(e){return Array.isArray(e)?e:[e]}function oB(e,t){if(!e.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=Error("Invalid scope was specified by the user or calling client");throw t.getToken.info(I(e,r)),r}}function oH(e){return e.replace(/\/.default$/,"")}let oG=w("ClientSecretCredential");class oz{tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(e,t,r,n={}){if(!e)throw new p("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!t)throw new p("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new p("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=r,this.tenantId=e,this.additionallyAllowedTenantIds=oN(n?.additionallyAllowedTenants),this.msalClient=oD(t,e,{...n,logger:oG,tokenCredentialOptions:n})}async getToken(e,t={}){return O.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=oO(this.tenantId,t,this.additionallyAllowedTenantIds,oG);let r=oF(e);return this.msalClient.getTokenByClientSecret(r,this.clientSecret,t)})}}let oV=w("UsernamePasswordCredential");class oK{tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(e,t,r,n,i={}){if(!e)throw new p("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!t)throw new p("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new p("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new p("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=oN(i?.additionallyAllowedTenants),this.username=r,this.password=n,this.msalClient=oD(t,this.tenantId,{...i,tokenCredentialOptions:i??{}})}async getToken(e,t={}){return O.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=oO(this.tenantId,t,this.additionallyAllowedTenantIds,oV);let r=oF(e);return this.msalClient.getTokenByUsernamePassword(r,this.username,this.password,t)})}}let oY=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"],oW="EnvironmentCredential",oX=w(oW);class oJ{_credential=void 0;constructor(e){let t=S(oY).assigned.join(", ");oX.info(`Found the following environment variables: ${t}`);let r=process.env.AZURE_TENANT_ID,n=process.env.AZURE_CLIENT_ID,i=process.env.AZURE_CLIENT_SECRET,o=(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";"),a=function(){let e=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),t="true"===e||"1"===e;return oX.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${t}`),t}(),s={...e,additionallyAllowedTenantIds:o,sendCertificateChain:a};if(r&&ok(oX,r),r&&n&&i){oX.info(`Invoking ClientSecretCredential with tenant ID: ${r}, clientId: ${n} and clientSecret: [REDACTED]`),this._credential=new oz(r,n,i,s);return}let c=process.env.AZURE_CLIENT_CERTIFICATE_PATH,l=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(r&&n&&c){oX.info(`Invoking ClientCertificateCredential with tenant ID: ${r}, clientId: ${n} and certificatePath: ${c}`),this._credential=new oj(r,n,{certificatePath:c,certificatePassword:l},s);return}let u=process.env.AZURE_USERNAME,d=process.env.AZURE_PASSWORD;r&&n&&u&&d&&(oX.info(`Invoking UsernamePasswordCredential with tenant ID: ${r}, clientId: ${n} and username: ${u}`),oX.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new oK(r,n,u,d,s))}async getToken(e,t={}){return O.withSpan(`${oW}.getToken`,t,async t=>{if(this._credential)try{let r=await this._credential.getToken(e,t);return oX.getToken.info(_(e)),r}catch(r){let t=new g(400,{error:`${oW} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:r.message.toString().split("More details:").join("")});throw oX.getToken.info(I(e,t)),t}throw new p(`${oW} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}}let oQ="ManagedIdentityCredential - IMDS",oZ=w(oQ),o0={name:"imdsMsi",async isAvailable(e){let{scopes:t,identityClient:r,getTokenOptions:n}=e,i=o_(t);if(!i)return oZ.info(`${oQ}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw Error("Missing IdentityClient");let o=function(e){if(!o_(e))throw Error(`${oQ}: Multiple scopes are not supported.`);let t=new URL("/metadata/identity/oauth2/token",process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??"http://169.254.169.254");return{url:`${t}`,method:"GET",headers:(0,oc.Nc)({Accept:"application/json"})}}(i);return O.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async e=>{let t;o.tracingOptions=e.tracingOptions;let n=(0,oc.G6)(o);n.timeout=e.requestOptions?.timeout||1e3,n.allowInsecureConnection=!0;try{oZ.info(`${oQ}: Pinging the Azure IMDS endpoint`),t=await r.sendRequest(n)}catch(e){return(0,i1.bJ)(e)&&oZ.verbose(`${oQ}: Caught error ${e.name}: ${e.message}`),oZ.info(`${oQ}: The Azure IMDS endpoint is unavailable`),!1}return 403===t.status&&t.bodyAsText?.includes("unreachable")?(oZ.info(`${oQ}: The Azure IMDS endpoint is unavailable`),oZ.info(`${oQ}: ${t.bodyAsText}`),!1):(oZ.info(`${oQ}: The Azure IMDS endpoint is available`),!0)})}},o1=w("ClientAssertionCredential");class o2{msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(e,t,r,n={}){if(!e)throw new p("ClientAssertionCredential: tenantId is a required parameter.");if(!t)throw new p("ClientAssertionCredential: clientId is a required parameter.");if(!r)throw new p("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=oN(n?.additionallyAllowedTenants),this.options=n,this.getAssertion=r,this.msalClient=oD(t,e,{...n,logger:o1,tokenCredentialOptions:this.options})}async getToken(e,t={}){return O.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=oO(this.tenantId,t,this.additionallyAllowedTenantIds,o1);let r=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(r,this.getAssertion,t)})}}let o3="WorkloadIdentityCredential",o6=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],o4=w(o3);class o5{client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(e){let t=S(o6).assigned.join(", ");o4.info(`Found the following environment variables: ${t}`);let r=e??{},n=r.tenantId||process.env.AZURE_TENANT_ID,i=r.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=r.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,n&&ok(o4,n),!i)throw new p(`${o3}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!n)throw new p(`${o3}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new p(`${o3}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);o4.info(`Invoking ClientAssertionCredential with tenant ID: ${n}, clientId: ${r.clientId} and federated token path: [REDACTED]`),this.client=new o2(n,i,this.readFileContents.bind(this),e)}async getToken(e,t){if(!this.client){let e=`${o3}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw o4.info(e),new p(e)}return o4.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,t)}async readFileContents(){if(void 0!==this.cacheDate&&Date.now()-this.cacheDate>=3e5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new p(`${o3}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let e=(await (0,oL.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(e)this.azureFederatedTokenFileContent=e,this.cacheDate=Date.now();else throw new p(`${o3}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}}let o8="ManagedIdentityCredential - Token Exchange",o9=w(o8),o7={name:"tokenExchangeMsi",async isAvailable(e){let t=process.env,r=!!((e||t.AZURE_CLIENT_ID)&&t.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||o9.info(`${o8}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(e,t={}){let{scopes:r,clientId:n}=e;return new o5({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...{},disableInstanceDiscovery:!0}).getToken(r,t)}},ae=w("ManagedIdentityCredential");class at{managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;constructor(e,t){let r;"string"==typeof e?(this.clientId=e,r=t??{}):(this.clientId=e?.clientId,r=e??{}),this.resourceId=r?.resourceId,this.objectId=r?.objectId;let n=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(e=>e.value);if(n.length>1)throw Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);r.allowInsecureConnection=!0,r.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=r.retryOptions.maxRetries),this.identityClient=new oR({...r,additionalPolicies:[{policy:function(e){return(0,oc.Jb)([{name:"imdsRetryPolicy",retry:({retryCount:t,response:r})=>{if(r?.status!==404&&r?.status!==410)return{skipStrategy:!0};let n=r?.status===410?Math.max(3e3,e.startDelayInMs):e.startDelayInMs;return(0,i1.gE)(t,{retryDelayInMs:n,maxRetryDelayInMs:64e3})}}],{maxRetries:e.maxRetries})}(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new i0({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:i9((0,A.XM)()),piiLoggingEnabled:r.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:i8(ae)}}}),this.isAvailableIdentityClient=new oR({...r,retryOptions:{maxRetries:0}});let i=this.managedIdentityApp.getManagedIdentitySource();if("CloudShell"===i&&(this.clientId||this.resourceId||this.objectId))throw ae.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new p("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if("ServiceFabric"===i&&(this.clientId||this.resourceId||this.objectId))throw ae.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new p("ManagedIdentityCredential: Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information");if(ae.info(`Using ${i} managed identity.`),1===n.length){let{key:e,value:t}=n[0];ae.info(`${i} with ${e}: ${t}`)}}async getToken(e,t={}){ae.getToken.info("Using the MSAL provider for Managed Identity.");let r=o_(e);if(!r)throw new p(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return O.withSpan("ManagedIdentityCredential.getToken",t,async()=>{try{let n=await o7.isAvailable(this.clientId),i=this.managedIdentityApp.getManagedIdentitySource();if(ae.getToken.info(`MSAL Identity source: ${i}`),n){ae.getToken.info("Using the token exchange managed identity.");let t=await o7.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(null===t)throw new p("Attempted to use the token exchange managed identity, but received a null response.");return t}if(("DefaultToImds"===i||"Imds"===i)&&(ae.getToken.info("Using the IMDS endpoint to probe for availability."),!await o0.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:t,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new p("Attempted to use the IMDS endpoint, but it is not available.");ae.getToken.info("Calling into MSAL for managed identity token.");let o=await this.managedIdentityApp.acquireToken({resource:r});return this.ensureValidMsalToken(e,o,t),ae.getToken.info(_(e)),{expiresOnTimestamp:o.expiresOn.getTime(),token:o.accessToken,refreshAfterTimestamp:o.refreshOn?.getTime(),tokenType:"Bearer"}}catch(t){var n;if(ae.getToken.error(I(e,t)),"AuthenticationRequiredError"===t.name)throw t;if("network_error"===(n=t).errorCode||"ENETUNREACH"===n.code||"EHOSTUNREACH"===n.code||(403===n.statusCode||403===n.code)&&n.message.includes("unreachable"))throw new p(`ManagedIdentityCredential: Network unreachable. Message: ${t.message}`,{cause:t});throw new p(`ManagedIdentityCredential: Authentication failed. Message ${t.message}`,{cause:t})}})}ensureValidMsalToken(e,t,r){let n=t=>(ae.getToken.info(t),new v({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:t}));if(!t)throw n("No response.");if(!t.expiresOn)throw n('Response had no "expiresOn" property.');if(!t.accessToken)throw n('Response had no "accessToken" property.')}}var ar=r(79646);let an=w("AzureDeveloperCliCredential"),ai={getSafeWorkingDir(){if("win32"!==process.platform)return"/bin";{let e=process.env.SystemRoot||process.env.SYSTEMROOT;return e||(an.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),e="C:\\Windows"),e}},async getAzdAccessToken(e,t,r){let n=[];return t&&(n=["--tenant-id",t]),new Promise((t,i)=>{try{let i=["auth","token","--output","json",...e.reduce((e,t)=>e.concat("--scope",t),[]),...n],o=["azd",...i].join(" ");ar.exec(o,{cwd:ai.getSafeWorkingDir(),timeout:r},(e,r,n)=>{t({stdout:r,stderr:n,error:e})})}catch(e){i(e)}})}};class ao{tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(ok(an,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=oN(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let r,n=oO(this.tenantId,t,this.additionallyAllowedTenantIds);return n&&ok(an,n),r="string"==typeof e?[e]:e,an.getToken.info(`Using the scopes ${e}`),O.withSpan(`${this.constructor.name}.getToken`,t,async()=>{try{r.forEach(e=>{oB(e,an)});let t=await ai.getAzdAccessToken(r,n,this.timeout),i=t.stderr?.match("not logged in, run `azd login` to login")||t.stderr?.match("not logged in, run `azd auth login` to login");if(t.stderr?.match("azd:(.*)not found")||t.stderr?.startsWith("'azd' is not recognized")||t.error&&"ENOENT"===t.error.code){let t=new p("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw an.getToken.info(I(e,t)),t}if(i){let t=new p("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw an.getToken.info(I(e,t)),t}try{let r=JSON.parse(t.stdout);return an.getToken.info(_(e)),{token:r.token,expiresOnTimestamp:new Date(r.expiresOn).getTime(),tokenType:"Bearer"}}catch(e){if(t.stderr)throw new p(t.stderr);throw e}}catch(r){let t="CredentialUnavailableError"===r.name?r:new p(r.message||"Unknown error while trying to retrieve the access token");throw an.getToken.info(I(e,t)),t}})}}function aa(e,t){if(!t.match(/^[0-9a-zA-Z-._ ]+$/)){let r=Error(`Subscription '${t}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw e.info(I("",r)),r}}let as=w("AzureCliCredential"),ac={getSafeWorkingDir(){if("win32"!==process.platform)return"/bin";{let e=process.env.SystemRoot||process.env.SYSTEMROOT;return e||(as.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),e="C:\\Windows"),e}},async getAzureCliAccessToken(e,t,r,n){let i=[],o=[];return t&&(i=["--tenant",t]),r&&(o=["--subscription",`"${r}"`]),new Promise((t,r)=>{try{let r=["account","get-access-token","--output","json","--resource",e,...i,...o],a=["az",...r].join(" ");ar.exec(a,{cwd:ac.getSafeWorkingDir(),timeout:n},(e,r,n)=>{t({stdout:r,stderr:n,error:e})})}catch(e){r(e)}})}};class al{tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(e){e?.tenantId&&(ok(as,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(aa(as,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=oN(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let r=oO(this.tenantId,t,this.additionallyAllowedTenantIds);r&&ok(as,r),this.subscription&&aa(as,this.subscription);let n="string"==typeof e?e:e[0];return as.getToken.info(`Using the scope ${n}`),O.withSpan(`${this.constructor.name}.getToken`,t,async()=>{try{oB(n,as);let t=oH(n),i=await ac.getAzureCliAccessToken(t,r,this.subscription,this.timeout),o=i.stderr?.match("(.*)az login --scope(.*)"),a=i.stderr?.match("(.*)az login(.*)")&&!o;if(i.stderr?.match("az:(.*)not found")||i.stderr?.startsWith("'az' is not recognized")){let t=new p("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw as.getToken.info(I(e,t)),t}if(a){let t=new p("Please run 'az login' from a command prompt to authenticate before using this credential.");throw as.getToken.info(I(e,t)),t}try{let t=i.stdout,r=this.parseRawResponse(t);return as.getToken.info(_(e)),r}catch(e){if(i.stderr)throw new p(i.stderr);throw e}}catch(r){let t="CredentialUnavailableError"===r.name?r:new p(r.message||"Unknown error while trying to retrieve the access token");throw as.getToken.info(I(e,t)),t}})}parseRawResponse(e){let t=JSON.parse(e),r=t.accessToken,n=1e3*Number.parseInt(t.expires_on,10);if(!isNaN(n))return as.getToken.info("expires_on is available and is valid, using it"),{token:r,expiresOnTimestamp:n,tokenType:"Bearer"};if(isNaN(n=new Date(t.expiresOn).getTime()))throw new p(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${t.expiresOn}"`);return{token:r,expiresOnTimestamp:n,tokenType:"Bearer"}}}var au=r(31421);let ad={execFile:(e,t,r)=>new Promise((n,i)=>{au.execFile(e,t,r,(e,t,r)=>{Buffer.isBuffer(t)&&(t=t.toString("utf8")),Buffer.isBuffer(r)&&(r=r.toString("utf8")),r||e?i(r?Error(r):e):n(t)})})},ah=w("AzurePowerShellCredential"),ap="win32"===process.platform;function af(e){return ap?`${e}.exe`:e}async function ag(e,t){let r=[];for(let n of e){let[e,...i]=n,o=await ad.execFile(e,i,{encoding:"utf8",timeout:t});r.push(o)}return r}let am={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},ay={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:"The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: \"Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force\".",troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},av=e=>e.message.match(`(.*)${am.login}(.*)`),aE=e=>e.message.match(am.installed),aT=[af("pwsh")];ap&&aT.push(af("powershell"));class ab{tenantId;additionallyAllowedTenantIds;timeout;constructor(e){e?.tenantId&&(ok(ah,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=oN(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,t,r){for(let n of[...aT]){try{await ag([[n,"/?"]],r)}catch(e){aT.shift();continue}return aA((await ag([[n,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${t??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0])}throw Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,t={}){return O.withSpan(`${this.constructor.name}.getToken`,t,async()=>{let r=oO(this.tenantId,t,this.additionallyAllowedTenantIds),n="string"==typeof e?e:e[0];r&&ok(ah,r);try{oB(n,ah),ah.getToken.info(`Using the scope ${n}`);let t=oH(n),i=await this.getAzurePowerShellAccessToken(t,r,this.timeout);return ah.getToken.info(_(e)),{token:i.Token,expiresOnTimestamp:new Date(i.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(t){if(aE(t)){let e=new p(ay.installed);throw ah.getToken.info(I(n,e)),e}if(av(t)){let e=new p(ay.login);throw ah.getToken.info(I(n,e)),e}let e=new p(`${t}. ${ay.troubleshoot}`);throw ah.getToken.info(I(n,e)),e}})}}async function aA(e){let t=e.match(/{[^{}]*}/g),r=e;if(t)try{for(let e of t)try{let t=JSON.parse(e);if(t?.Token)return(r=r.replace(e,""))&&ah.getToken.warning(r),t}catch(e){continue}}catch(t){throw Error(`Unable to parse the output of PowerShell. Received output: ${e}`)}throw Error(`No access token found in the output. Received output: ${e}`)}let aC=w("VisualStudioCodeCredential"),aS={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};class a_{tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(e){this.options=e||{},e&&e.tenantId?(ok(aC,e.tenantId),this.tenantId=e.tenantId):this.tenantId="common",this.additionallyAllowedTenantIds=oN(e?.additionallyAllowedTenants),function(e){let t=aS[e];if(t)throw new p(t)}(this.tenantId)}async prepare(e){let t=oO(this.tenantId,this.options,this.additionallyAllowedTenantIds,aC)||this.tenantId;if(void 0===a||void 0===s||!a)throw new p("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let r=await this.loadAuthRecord(a,e);this.msalClient=oD("aebc6443-996d-45c2-90f0-388ff96faa56",t,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:r})}preparePromise;prepareOnce(e){return this.preparePromise||(this.preparePromise=this.prepare(e)),this.preparePromise}async getToken(e,t){let r=oF(e);if(await this.prepareOnce(r),!this.msalClient)throw new p("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(r,t||{})}async loadAuthRecord(e,t){try{var r=await (0,oL.readFile)(e,{encoding:"utf8"});let t=JSON.parse(r);if(t.version&&"1.0"!==t.version)throw Error("Unsupported AuthenticationRecord version");return t}catch(e){throw aC.getToken.info(I(t,e)),new p("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}}let aI=w("BrokerCredential");class aR{brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(e){this.brokerTenantId=oP(aI,e.tenantId),this.brokerAdditionallyAllowedTenantIds=oN(e?.additionallyAllowedTenants);let t={...e,tokenCredentialOptions:e,logger:aI,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=oD(l,this.brokerTenantId,t)}async getToken(e,t={}){return O.withSpan(`${this.constructor.name}.getToken`,t,async t=>{t.tenantId=oO(this.brokerTenantId,t,this.brokerAdditionallyAllowedTenantIds,aI);let r=oF(e);try{return this.brokerMsalClient.getBrokeredToken(r,!0,{...t,disableAutomaticAuthentication:!0})}catch(e){throw aI.getToken.info(I(r,e)),new p("Failed to acquire token using broker authentication",{cause:e})}})}}function aw(e={}){return new aR(e)}function aO(e={}){return new a_(e)}function ak(e={}){e.retryOptions??={maxRetries:5,retryDelayInMs:800};let t=e?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=e?.workloadIdentityClientId??t,n=e?.managedIdentityResourceId,i=process.env.AZURE_FEDERATED_TOKEN_FILE,o=e?.tenantId??process.env.AZURE_TENANT_ID;return n?new at({...e,resourceId:n}):i&&r?new at(r,{...e,tenantId:o}):new at(t?{...e,clientId:t}:e)}function aP(e){let t=e?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,r=e?.workloadIdentityClientId??t,n=process.env.AZURE_FEDERATED_TOKEN_FILE,i=e?.tenantId??process.env.AZURE_TENANT_ID;return new o5(n&&r?{...e,tenantId:i,clientId:r,tokenFilePath:n}:i?{...e,tenantId:i}:e)}function aN(e={}){return new ao(e)}function aM(e={}){return new al(e)}function aD(e={}){return new ab(e)}function ax(e={}){return new oJ(e)}let aL=w("DefaultAzureCredential");class aU{credentialUnavailableErrorMessage;credentialName;constructor(e,t){this.credentialName=e,this.credentialUnavailableErrorMessage=t}getToken(){return aL.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}}class a$ extends P{constructor(e){let t=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,r=[aO,aM,aD,aN,aw],n=[ax,aP,ak],i=[];if(t)switch(t){case"dev":i=r;break;case"prod":i=n;break;case"environmentcredential":i=[ax];break;case"workloadidentitycredential":i=[aP];break;case"managedidentitycredential":i=[ak];break;case"visualstudiocodecredential":i=[aO];break;case"azureclicredential":i=[aM];break;case"azurepowershellcredential":i=[aD];break;case"azuredeveloperclicredential":i=[aN];break;default:{let e=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential.`;throw aL.warning(e),Error(e)}}else i=[...n,...r];super(...i.map(t=>{try{return t(e)}catch(e){return aL.warning(`Skipped ${t.name} because of an error creating the credential: ${e}`),new aU(t.name,e.message)}}))}}w("InteractiveBrowserCredential"),w("DeviceCodeCredential"),w("AzurePipelinesCredential"),w("AuthorizationCodeCredential"),w("OnBehalfOfCredential")},73214:e=>{(()=>{"use strict";var t={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),o=r(930),a="context",s=new n.NoopContextManager;class c{constructor(){}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(a,e,o.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(a)||s}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(a,o.DiagAPI.instance())}}t.ContextAPI=c},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),o=r(957),a=r(172);class s{constructor(){function e(e){return function(...t){let r=(0,a.getGlobal)("diag");if(r)return r[e](...t)}}let t=this;t.setLogger=(e,r={logLevel:o.DiagLogLevel.INFO})=>{var n,s,c;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let l=(0,a.getGlobal)("diag"),u=(0,i.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:o.DiagLogLevel.INFO,e);if(l&&!r.suppressOverrideMessage){let e=null!=(c=Error().stack)?c:"<failed to generate stacktrace>";l.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,a.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,a.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),o=r(930),a="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(a,e,o.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(a)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(a,o.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),o=r(194),a=r(277),s=r(369),c=r(930),l="propagation",u=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(l,e,c.DiagAPI.instance())}inject(e,t,r=o.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=o.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(l,c.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(l)||u}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),o=r(139),a=r(607),s=r(930),c="trace";class l{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=o.wrapSpanContext,this.isSpanContextValid=o.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(c,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(c)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(c,s.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=l},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function o(e){return e.getValue(i)||void 0}t.getBaggage=o,t.getActiveBaggage=function(){return o(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),o=r(830),a=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:o.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);class i{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=i},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);class i{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return o("debug",this._namespace,e)}error(...e){return o("error",this._namespace,e)}info(...e){return o("info",this._namespace,e)}warn(...e){return o("warn",this._namespace,e)}verbose(...e){return o("verbose",this._namespace,e)}}function o(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=i},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class n{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}t.DiagConsoleLogger=n},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),o=r(130),a=i.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${a}`),c=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var o;let a=c[s]=null!=(o=c[s])?o:{version:i.VERSION};if(!n&&a[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(a.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${a.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return a[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=c[s])?void 0:t.version;if(n&&(0,o.isCompatible)(n))return null==(r=c[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=c[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return a(e);let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease||o.major!==s.major)return a(e);if(0===o.major)return o.minor===s.minor&&o.patch<=s.patch?(t.add(e),!0):a(e);return o.minor<=s.minor?(t.add(e),!0):a(e)}}t._makeCompatibilityCheck=o,t.isCompatible=o(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class o extends n{add(e,t){}}t.NoopUpDownCounterMetric=o;class a extends n{record(e,t){}}t.NoopHistogramMetric=a;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class c extends s{}t.NoopObservableCounterMetric=c;class l extends s{}t.NoopObservableGaugeMetric=l;class u extends s{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new a,t.NOOP_UP_DOWN_COUNTER_METRIC=new o,t.NOOP_OBSERVABLE_COUNTER_METRIC=new c,t.NOOP_OBSERVABLE_GAUGE_METRIC=new l,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:global},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class r{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=r},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);class i{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=i},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),o=r(403),a=r(139),s=n.ContextAPI.getInstance();class c{startSpan(e,t,r=s.active()){var n;if(null==t?void 0:t.root)return new o.NonRecordingSpan;let c=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=c)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,a.isSpanContextValid)(c)?new o.NonRecordingSpan(c):new o.NonRecordingSpan}startActiveSpan(e,t,r,n){let o,a,c;if(arguments.length<2)return;2==arguments.length?c=t:3==arguments.length?(o=t,c=r):(o=t,a=r,c=n);let l=null!=a?a:s.active(),u=this.startSpan(e,o,l),d=(0,i.setSpan)(l,u);return s.with(d,c,void 0,u)}}t.NoopTracer=c},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);class i{getTracer(e,t,r){return new n.NoopTracer}}t.NoopTracerProvider=i},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;class i{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}t.ProxyTracer=i},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;class o{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}t.ProxyTracerProvider=o},996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),o=r(491),a=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(a)||void 0}function c(e,t){return e.setValue(a,t)}t.getSpan=s,t.getActiveSpan=function(){return s(o.ContextAPI.getInstance().active())},t.setSpan=c,t.deleteSpan=function(e){return e.deleteValue(a)},t.setSpanContext=function(e,t){return c(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let o=r.slice(0,i),a=r.slice(i+1,t.length);(0,n.validateKey)(o)&&(0,n.validateValue)(a)&&e.set(o,a)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,o=RegExp(`^(?:${n}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return o.test(e)},t.validateValue=function(e){return a.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),o=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function s(e){return o.test(e)&&e!==n.INVALID_TRACEID}function c(e){return a.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=c,t.isSpanContextValid=function(e){return s(e.traceId)&&c(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}},a=!0;try{t[e].call(o.exports,o,o.exports,n),a=!1}finally{a&&delete r[e]}return o.exports}n.ab=__dirname+"/";var i={};(()=>{Object.defineProperty(i,"__esModule",{value:!0}),i.trace=i.propagation=i.metrics=i.diag=i.context=i.INVALID_SPAN_CONTEXT=i.INVALID_TRACEID=i.INVALID_SPANID=i.isValidSpanId=i.isValidTraceId=i.isSpanContextValid=i.createTraceState=i.TraceFlags=i.SpanStatusCode=i.SpanKind=i.SamplingDecision=i.ProxyTracerProvider=i.ProxyTracer=i.defaultTextMapSetter=i.defaultTextMapGetter=i.ValueType=i.createNoopMeter=i.DiagLogLevel=i.DiagConsoleLogger=i.ROOT_CONTEXT=i.createContextKey=i.baggageEntryMetadataFromString=void 0;var e=n(369);Object.defineProperty(i,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=n(780);Object.defineProperty(i,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(i,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=n(972);Object.defineProperty(i,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var o=n(957);Object.defineProperty(i,"DiagLogLevel",{enumerable:!0,get:function(){return o.DiagLogLevel}});var a=n(102);Object.defineProperty(i,"createNoopMeter",{enumerable:!0,get:function(){return a.createNoopMeter}});var s=n(901);Object.defineProperty(i,"ValueType",{enumerable:!0,get:function(){return s.ValueType}});var c=n(194);Object.defineProperty(i,"defaultTextMapGetter",{enumerable:!0,get:function(){return c.defaultTextMapGetter}}),Object.defineProperty(i,"defaultTextMapSetter",{enumerable:!0,get:function(){return c.defaultTextMapSetter}});var l=n(125);Object.defineProperty(i,"ProxyTracer",{enumerable:!0,get:function(){return l.ProxyTracer}});var u=n(846);Object.defineProperty(i,"ProxyTracerProvider",{enumerable:!0,get:function(){return u.ProxyTracerProvider}});var d=n(996);Object.defineProperty(i,"SamplingDecision",{enumerable:!0,get:function(){return d.SamplingDecision}});var h=n(357);Object.defineProperty(i,"SpanKind",{enumerable:!0,get:function(){return h.SpanKind}});var p=n(847);Object.defineProperty(i,"SpanStatusCode",{enumerable:!0,get:function(){return p.SpanStatusCode}});var f=n(475);Object.defineProperty(i,"TraceFlags",{enumerable:!0,get:function(){return f.TraceFlags}});var g=n(98);Object.defineProperty(i,"createTraceState",{enumerable:!0,get:function(){return g.createTraceState}});var m=n(139);Object.defineProperty(i,"isSpanContextValid",{enumerable:!0,get:function(){return m.isSpanContextValid}}),Object.defineProperty(i,"isValidTraceId",{enumerable:!0,get:function(){return m.isValidTraceId}}),Object.defineProperty(i,"isValidSpanId",{enumerable:!0,get:function(){return m.isValidSpanId}});var y=n(476);Object.defineProperty(i,"INVALID_SPANID",{enumerable:!0,get:function(){return y.INVALID_SPANID}}),Object.defineProperty(i,"INVALID_TRACEID",{enumerable:!0,get:function(){return y.INVALID_TRACEID}}),Object.defineProperty(i,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return y.INVALID_SPAN_CONTEXT}});let v=n(67);Object.defineProperty(i,"context",{enumerable:!0,get:function(){return v.context}});let E=n(506);Object.defineProperty(i,"diag",{enumerable:!0,get:function(){return E.diag}});let T=n(886);Object.defineProperty(i,"metrics",{enumerable:!0,get:function(){return T.metrics}});let b=n(939);Object.defineProperty(i,"propagation",{enumerable:!0,get:function(){return b.propagation}});let A=n(845);Object.defineProperty(i,"trace",{enumerable:!0,get:function(){return A.trace}}),i.default={context:v.context,diag:E.diag,metrics:T.metrics,propagation:b.propagation,trace:A.trace}})(),e.exports=i})()},73686:(e,t,r)=>{"use strict";let n=r(91680),i=r(39335);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||-1===a.compare(e))&&(a=new n(o=e,r))}),o}},74450:e=>{"use strict";e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},74484:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseProxyResponse=void 0;let i=(0,n(r(5415)).default)("https-proxy-agent:parse-proxy-response");t.parseProxyResponse=function(e){return new Promise((t,r)=>{let n=0,o=[];function a(){let c=e.read();c?function(c){o.push(c),n+=c.length;let l=Buffer.concat(o,n),u=l.indexOf("\r\n\r\n");if(-1===u){i("have not received end of HTTP headers yet..."),a();return}let d=l.slice(0,u).toString("ascii").split("\r\n"),h=d.shift();if(!h)return e.destroy(),r(Error("No header received from proxy CONNECT response"));let p=h.split(" "),f=+p[1],g=p.slice(2).join(" "),m={};for(let t of d){if(!t)continue;let n=t.indexOf(":");if(-1===n)return e.destroy(),r(Error(`Invalid header from proxy CONNECT response: "${t}"`));let i=t.slice(0,n).toLowerCase(),o=t.slice(n+1).trimStart(),a=m[i];"string"==typeof a?m[i]=[a,o]:Array.isArray(a)?a.push(o):m[i]=o}i("got proxy server response: %o %o",h,m),s(),t({connect:{statusCode:f,statusText:g,headers:m},buffered:l})}(c):e.once("readable",a)}function s(){e.removeListener("end",c),e.removeListener("error",l),e.removeListener("readable",a)}function c(){s(),i("onend"),r(Error("Proxy connection ended before receiving CONNECT response"))}function l(e){s(),i("onerror %o",e),r(e)}e.on("error",l),e.on("end",c),a()})}},74756:(e,t,r)=>{"use strict";let n=r(14494);e.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},74864:(e,t,r)=>{"use strict";function n(e,t){var r,n;let i=t.retryDelayInMs*Math.pow(2,e),o=Math.min(t.maxRetryDelayInMs,i);return{retryAfterInMs:o/2+(r=0,n=o/2,r=Math.ceil(r),Math.floor(Math.random()*((n=Math.floor(n))-r+1))+r)}}r.d(t,{g:()=>n})},74932:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},75124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Postpone:function(){return S},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return T},accessedDynamicData:function(){return N},annotateDynamicAccess:function(){return $},consumeDynamicAccess:function(){return M},createDynamicTrackingState:function(){return h},createDynamicValidationState:function(){return p},createHangingInputAbortSignal:function(){return U},createPostponedAbortSignal:function(){return L},formatDynamicAPIAccesses:function(){return D},getFirstDynamicReason:function(){return f},isDynamicPostpone:function(){return R},isPrerenderInterruptedError:function(){return P},markCurrentScopeAsDynamic:function(){return g},postponeWithTracking:function(){return _},throwIfDisallowedDynamic:function(){return z},throwToInterruptStaticGeneration:function(){return y},trackAllowedDynamicAccess:function(){return G},trackDynamicDataInDynamicRender:function(){return v},trackFallbackParamAccessed:function(){return m},trackSynchronousPlatformIOAccessInDev:function(){return b},trackSynchronousRequestDataAccessInDev:function(){return C},useDynamicRouteParams:function(){return j}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(7153)),i=r(38248),o=r(66224),a=r(63033),s=r(29294),c=r(37461),l=r(70830),u=r(97748),d="function"==typeof n.default.unstable_postpone;function h(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicExpression:void 0,syncDynamicErrorWithStack:null}}function p(){return{hasSuspendedDynamic:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasSyncDynamicErrors:!1,dynamicErrors:[]}}function f(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function g(e,t,r){if((!t||"cache"!==t.type&&"unstable-cache"!==t.type)&&!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t){if("prerender-ppr"===t.type)_(e.route,r,t.dynamicTracking);else if("prerender-legacy"===t.type){t.revalidate=0;let n=Object.defineProperty(new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}}function m(e,t){let r=a.workUnitAsyncStorage.getStore();r&&"prerender-ppr"===r.type&&_(e.route,t,r.dynamicTracking)}function y(e,t,r){let n=Object.defineProperty(new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function v(e,t){t&&"cache"!==t.type&&"unstable-cache"!==t.type&&("prerender"===t.type||"prerender-legacy"===t.type)&&(t.revalidate=0)}function E(e,t,r){let n=k(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function T(e,t,r,n){let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r),E(e,t,n)}function b(e){e.prerenderPhase=!1}function A(e,t,r,n){if(!1===n.controller.signal.aborted){let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r,!0===n.validating&&(i.syncDynamicLogged=!0)),E(e,t,n)}throw k(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}let C=b;function S({reason:e,route:t}){let r=a.workUnitAsyncStorage.getStore();_(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function _(e,t,r){x(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(I(e,t))}function I(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function R(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&w(e.message)}function w(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===w(I("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let O="NEXT_PRERENDER_INTERRUPTED";function k(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=O,t}function P(e){return"object"==typeof e&&null!==e&&e.digest===O&&"name"in e&&"message"in e&&e instanceof Error}function N(e){return e.length>0}function M(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function D(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function x(){if(!d)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}function L(e){x();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}function U(e){let t=new AbortController;return e.cacheSignal?e.cacheSignal.inputReady().then(()=>{t.abort()}):(0,u.scheduleOnNextTick)(()=>t.abort()),t.signal}function $(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function j(e){let t=s.workAsyncStorage.getStore();if(t&&t.isStaticGeneration&&t.fallbackRouteParams&&t.fallbackRouteParams.size>0){let r=a.workUnitAsyncStorage.getStore();r&&("prerender"===r.type?n.default.use((0,c.makeHangingPromise)(r.renderSignal,e)):"prerender-ppr"===r.type?_(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&y(e,t,r))}}let q=/\n\s+at Suspense \(<anonymous>\)/,F=RegExp(`\\n\\s+at ${l.METADATA_BOUNDARY_NAME}[\\n\\s]`),B=RegExp(`\\n\\s+at ${l.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),H=RegExp(`\\n\\s+at ${l.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function G(e,t,r,n,i){if(!H.test(t)){if(F.test(t)){r.hasDynamicMetadata=!0;return}if(B.test(t)){r.hasDynamicViewport=!0;return}if(q.test(t)){r.hasSuspendedDynamic=!0;return}else if(n.syncDynamicErrorWithStack||i.syncDynamicErrorWithStack){r.hasSyncDynamicErrors=!0;return}else{let n=function(e,t){let r=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r.stack="Error: "+e+t,r}(`Route "${e}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,t);r.dynamicErrors.push(n);return}}}function z(e,t,r,n){let i,a,s;if(r.syncDynamicErrorWithStack?(i=r.syncDynamicErrorWithStack,a=r.syncDynamicExpression,s=!0===r.syncDynamicLogged):n.syncDynamicErrorWithStack?(i=n.syncDynamicErrorWithStack,a=n.syncDynamicExpression,s=!0===n.syncDynamicLogged):(i=null,a=void 0,s=!1),t.hasSyncDynamicErrors&&i)throw s||console.error(i),new o.StaticGenBailoutError;let c=t.dynamicErrors;if(c.length){for(let e=0;e<c.length;e++)console.error(c[e]);throw new o.StaticGenBailoutError}if(!t.hasSuspendedDynamic){if(t.hasDynamicMetadata){if(i)throw console.error(i),Object.defineProperty(new o.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`),"__NEXT_ERROR_CODE",{value:"E608",enumerable:!1,configurable:!0});throw Object.defineProperty(new o.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateMetadata\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`),"__NEXT_ERROR_CODE",{value:"E534",enumerable:!1,configurable:!0})}else if(t.hasDynamicViewport){if(i)throw console.error(i),Object.defineProperty(new o.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`),"__NEXT_ERROR_CODE",{value:"E573",enumerable:!1,configurable:!0});throw Object.defineProperty(new o.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateViewport\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`),"__NEXT_ERROR_CODE",{value:"E590",enumerable:!1,configurable:!0})}}}},75239:(e,t,r)=>{"use strict";function n(e){return e.toLowerCase()}r.d(t,{N:()=>o});class i{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(n(e),{name:e,value:String(t).trim()})}get(e){var t;return null==(t=this._headersMap.get(n(e)))?void 0:t.value}has(e){return this._headersMap.has(n(e))}delete(e){this._headersMap.delete(n(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let e of this._headersMap.values())t[e.name]=e.value;else for(let[e,r]of this._headersMap)t[e]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(let t of e.values())yield[t.name,t.value]}(this._headersMap)}}function o(e){return new i(e)}},75735:(e,t,r)=>{"use strict";r.d(t,{KV:()=>o,XM:()=>i});let n=(0,r(11882).MX)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function i(){return n.getLogLevel()}function o(e){return n.createClientLogger(e)}n.logger},76091:(e,t,r)=>{"use strict";let n=r(91680),i=r(39335),o=r(14964);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],a=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!a||o(t,a))&&(a=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),a&&(!r||o(r,a))&&(r=a)}return r&&e.test(r)?r:null}},76504:(e,t,r)=>{"use strict";function n(e){return void 0!==e&&(e instanceof Uint8Array||i(e)||"function"==typeof e||e instanceof Blob)}function i(e){return!!(e&&"function"==typeof e.pipe)||!!(e&&"function"==typeof e.getReader&&"function"==typeof e.tee)}function o(e){return"function"==typeof e.stream}r.d(t,{CY:()=>n,H1:()=>i,qf:()=>o})},77047:(e,t,r)=>{var n,i=r(91571).Buffer,o=r(55511),a=r(86394),s=r(28354),c="secret must be a string or buffer",l="key must be a string or a buffer",u="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e&&(!u||"object"!=typeof e||"string"!=typeof e.type||"string"!=typeof e.asymmetricKeyType||"function"!=typeof e.export))throw g(l)}function h(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw g("key must be a string, a buffer or an object")}function p(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function g(e){var t=[].slice.call(arguments,1);return TypeError(s.format.bind(s,e).apply(null,t))}function m(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,r){!function(e){if(!i.isBuffer(e)){if("string"!=typeof e){if(!u||"object"!=typeof e||"secret"!==e.type||"function"!=typeof e.export)throw g(c)}}}(r),t=m(t);var n=o.createHmac("sha"+e,r);return p((n.update(t),n.digest("base64")))}}u&&(l+=" or a KeyObject",c+="or a KeyObject");var v="timingSafeEqual"in o?function(e,t){return e.byteLength===t.byteLength&&o.timingSafeEqual(e,t)}:function(e,t){return n||(n=r(33901)),n(e,t)};function E(e){return function(t,r,n){var o=y(e)(t,n);return v(i.from(r),i.from(o))}}function T(e){return function(t,r){h(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign(r,"base64")))}}function b(e){return function(t,r,n){d(n),t=m(t),r=f(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function A(e){return function(t,r){h(r),t=m(t);var n=o.createSign("RSA-SHA"+e);return p((n.update(t),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function C(e){return function(t,r,n){d(n),t=m(t),r=f(r);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function S(e){var t=T(e);return function(){var r=t.apply(null,arguments);return a.derToJose(r,"ES"+e)}}function _(e){var t=b(e);return function(r,n,i){return t(r,n=a.joseToDer(n,"ES"+e).toString("base64"),i)}}function I(){return function(){return""}}function R(){return function(e,t){return""===t}}e.exports=function(e){var t=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!t)throw g('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var r=(t[1]||t[3]).toLowerCase(),n=t[2];return{sign:({hs:y,rs:T,ps:A,es:S,none:I})[r](n),verify:({hs:E,rs:b,ps:C,es:_,none:R})[r](n)}}},77537:(e,t,r)=>{"use strict";let n;r.d(t,{pj:()=>m,fl:()=>O,O8:()=>d,Nc:()=>o.N,G6:()=>c,t$:()=>Z,KU:()=>X,T0:()=>y,Iq:()=>Q});var i=r(70767);r(11882);var o=r(75239),a=r(28322);class s{constructor(e){var t,r,n,i,s,c,l;this.url=e.url,this.body=e.body,this.headers=null!=(t=e.headers)?t:(0,o.N)(),this.method=null!=(r=e.method)?r:"GET",this.timeout=null!=(n=e.timeout)?n:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=null!=(i=e.disableKeepAlive)&&i,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!=(s=e.withCredentials)&&s,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,a.N)(),this.allowInsecureConnection=null!=(c=e.allowInsecureConnection)&&c,this.enableBrowserStreams=null!=(l=e.enableBrowserStreams)&&l,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}}function c(e){return new s(e)}let l=new Set(["Deserialize","Serialize","Retry","Sign"]);class u{constructor(e){var t;this._policies=[],this._policies=null!=(t=null==e?void 0:e.slice(0))?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!l.has(t.phase))throw Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!l.has(t.afterPhase))throw Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(r=>(!e.name||r.policy.name!==e.name)&&(!e.phase||r.options.phase!==e.phase)||(t.push(r.policy),!1)),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((e,t)=>r=>t.sendRequest(r,e),t=>e.sendRequest(t))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new u(this._policies)}static create(){return new u}orderPolicies(){let e=[],t=new Map;function r(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let n=r("Serialize"),i=r("None"),o=r("Deserialize"),a=r("Retry"),s=r("Sign"),c=[n,i,o,a,s];function l(e){return"Retry"===e?a:"Serialize"===e?n:"Deserialize"===e?o:"Sign"===e?s:i}for(let e of this._policies){let r=e.policy,n=e.options,i=r.name;if(t.has(i))throw Error("Duplicate policy names not allowed in pipeline");let o={policy:r,dependsOn:new Set,dependants:new Set};n.afterPhase&&(o.afterPhase=l(n.afterPhase),o.afterPhase.hasAfterPolicies=!0),t.set(i,o),l(n.phase).policies.add(o)}for(let e of this._policies){let{policy:r,options:n}=e,i=r.name,o=t.get(i);if(!o)throw Error(`Missing node for policy ${i}`);if(n.afterPolicies)for(let e of n.afterPolicies){let r=t.get(e);r&&(o.dependsOn.add(r),r.dependants.add(o))}if(n.beforePolicies)for(let e of n.beforePolicies){let r=t.get(e);r&&(r.dependsOn.add(o),o.dependants.add(r))}}function u(r){for(let n of(r.hasRun=!0,r.policies))if((!n.afterPhase||n.afterPhase.hasRun&&!n.afterPhase.policies.size)&&0===n.dependsOn.size){for(let t of(e.push(n.policy),n.dependants))t.dependsOn.delete(n);t.delete(n.policy.name),r.policies.delete(n)}}let d=0;for(;t.size>0;){d++;let t=e.length;if(!function(){for(let e of c){if(u(e),e.policies.size>0&&e!==i){i.hasRun||u(i);return}e.hasAfterPolicies&&u(i)}}(),e.length<=t&&d>1)throw Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}function d(){return u.create()}var h=r(15044);let p=r(57975).inspect.custom;var f=r(46587);let g=new f.I;class m extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.defineProperty(this,p,{value:()=>`RestError: ${this.message} 
 ${g.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,enumerable:!1}),Object.setPrototypeOf(this,m.prototype)}}function y(e){return e instanceof m||(0,h.b)(e)&&"RestError"===e.name}m.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",m.PARSE_ERROR="PARSE_ERROR";var v=r(37067),E=r(44708),T=r(16141),b=r(57075),A=r(66175);let C={};function S(e){return e&&"function"==typeof e.pipe}function _(e){return!1===e.readable?Promise.resolve():new Promise(t=>{let r=()=>{t(),e.removeListener("close",r),e.removeListener("end",r),e.removeListener("error",r)};e.on("close",r),e.on("end",r),e.on("error",r)})}function I(e){return e&&"number"==typeof e.byteLength}class R extends b.Transform{_transform(e,t,r){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),r()}catch(e){r(e)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}}class w{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,r,n,a;let s,c,l,u=new AbortController;if(e.abortSignal){if(e.abortSignal.aborted)throw new i.l("The operation was aborted. Request has already been canceled.");s=e=>{"abort"===e.type&&u.abort()},e.abortSignal.addEventListener("abort",s)}e.timeout>0&&(c=setTimeout(()=>{let t=new f.I;A.v.info(`request to '${t.sanitizeUrl(e.url)}' timed out. canceling...`),u.abort()},e.timeout));let d=e.headers.get("Accept-Encoding"),h=(null==d?void 0:d.includes("gzip"))||(null==d?void 0:d.includes("deflate")),p="function"==typeof e.body?e.body():e.body;if(p&&!e.headers.has("Content-Length")){let t=function(e){if(!e)return 0;if(Buffer.isBuffer(e))return e.length;if(S(e))return null;if(I(e))return e.byteLength;if("string"==typeof e)return Buffer.from(e).length;else return null}(p);null!==t&&e.headers.set("Content-Length",t)}try{if(p&&e.onUploadProgress){let t=e.onUploadProgress,r=new R(t);r.on("error",e=>{A.v.error("Error in upload progress",e)}),S(p)?p.pipe(r):r.end(p),p=r}let i=await this.makeRequest(e,u,p);void 0!==c&&clearTimeout(c);let s=function(e){let t=(0,o.N)();for(let r of Object.keys(e.headers)){let n=e.headers[r];Array.isArray(n)?n.length>0&&t.set(r,n[0]):n&&t.set(r,n)}return t}(i),d={status:null!=(t=i.statusCode)?t:0,headers:s,request:e};if("HEAD"===e.method)return i.resume(),d;l=h?function(e,t){let r=t.get("Content-Encoding");if("gzip"===r){let t=T.createGunzip();return e.pipe(t),t}if("deflate"===r){let t=T.createInflate();return e.pipe(t),t}return e}(i,s):i;let f=e.onDownloadProgress;if(f){let e=new R(f);e.on("error",e=>{A.v.error("Error in download progress",e)}),l.pipe(e),l=e}return(null==(r=e.streamResponseStatusCodes)?void 0:r.has(Number.POSITIVE_INFINITY))||(null==(n=e.streamResponseStatusCodes)?void 0:n.has(d.status))?d.readableStreamBody=l:d.bodyAsText=await (a=l,new Promise((e,t)=>{let r=[];a.on("data",e=>{Buffer.isBuffer(e)?r.push(e):r.push(Buffer.from(e))}),a.on("end",()=>{e(Buffer.concat(r).toString("utf8"))}),a.on("error",e=>{e&&(null==e?void 0:e.name)==="AbortError"?t(e):t(new m(`Error reading response as text: ${e.message}`,{code:m.PARSE_ERROR}))})})),d}finally{if(e.abortSignal&&s){let t=Promise.resolve();S(p)&&(t=_(p));let r=Promise.resolve();S(l)&&(r=_(l)),Promise.all([t,r]).then(()=>{var t;s&&(null==(t=e.abortSignal)||t.removeEventListener("abort",s))}).catch(e=>{A.v.warning("Error when cleaning up abortListener on httpRequest",e)})}}}makeRequest(e,t,r){var n;let o=new URL(e.url),a="https:"!==o.protocol;if(a&&!e.allowInsecureConnection)throw Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let s=Object.assign({agent:null!=(n=e.agent)?n:this.getOrCreateAgent(e,a),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((n,o)=>{let c=a?v.request(s,n):E.request(s,n);c.once("error",t=>{var r;o(new m(t.message,{code:null!=(r=t.code)?r:m.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let e=new i.l("The operation was aborted. Rejecting from abort signal callback while making request.");c.destroy(e),o(e)}),r&&S(r)?r.pipe(c):r?"string"==typeof r||Buffer.isBuffer(r)?c.end(r):I(r)?c.end(ArrayBuffer.isView(r)?Buffer.from(r.buffer):Buffer.from(r)):(A.v.error("Unrecognized body type",r),o(new m("Unrecognized body type"))):c.end()})}getOrCreateAgent(e,t){var r;let n=e.disableKeepAlive;if(t)return n?v.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new v.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(n&&!e.tlsSettings)return E.globalAgent;let t=null!=(r=e.tlsSettings)?r:C,i=this.cachedHttpsAgents.get(t);return i&&!n===i.options.keepAlive||(A.v.info("No cached TLS Agent exist, creating a new Agent"),i=new E.Agent(Object.assign({keepAlive:!n},t)),this.cachedHttpsAgents.set(t,i)),i}}}function O(){return new w}var k=r(85148),P=r(20294),N=r(58650),M=r(18186),D=r(3213),x=r(30800),L=r(27017),U=r(64366),$=r(64285),j=r(56901),q=r(12323);let F=!1;function B(e,t){if(!e.url.toLowerCase().startsWith("https://"))if(function(e,t){if(t.allowInsecureConnection&&e.allowInsecureConnection){let t=new URL(e.url);if("localhost"===t.hostname||"127.0.0.1"===t.hostname)return!0}return!1}(e,t)){let e="Sending token over insecure transport. Assume any token issued is compromised.";A.v.warning(e),"function"!=typeof(null==process?void 0:process.emitWarning)||F||(F=!0,process.emitWarning(e))}else throw Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}var H=r(57004),G=r(76504);function z(e,t){if(e.headers){let r=Object.keys(e.headers).find(e=>e.toLowerCase()===t.toLowerCase());if(r)return e.headers[r]}}function V(e){return JSON.stringify(e)}function K(e){var t;let r=function(e){let t=z(e,"content-type");if(t)return t;if(null===e.contentType)return;if(e.contentType)return e.contentType;let{body:r}=e;if(null!=r)return"string"==typeof r||"number"==typeof r||"boolean"==typeof r?"text/plain; charset=UTF-8":r instanceof Blob?r.type||"application/octet-stream":(0,G.CY)(r)?"application/octet-stream":"application/json"}(e),n=function(e){var t;let r,n=z(e,"content-disposition");if(n)return n;if(void 0===e.dispositionType&&void 0===e.name&&void 0===e.filename)return;let i=null!=(t=e.dispositionType)?t:"form-data";if(e.name&&(i+=`; name=${V(e.name)}`),e.filename)r=e.filename;else if("undefined"!=typeof File&&e.body instanceof File){let t=e.body.name;""!==t&&(r=t)}return r&&(i+=`; filename=${V(r)}`),i}(e),i=(0,o.N)(null!=(t=e.headers)?t:{});return r&&i.set("content-type",r),n&&i.set("content-disposition",n),{headers:i,body:function(e,t){if(void 0===e)return new Uint8Array([]);if((0,G.CY)(e))return e;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return(0,H.A)(String(e),"utf-8");if(t&&/application\/(.+\+)?json(;.+)?/i.test(String(t)))return(0,H.A)(JSON.stringify(e),"utf-8");throw new m(`Unsupported body/content-type combination: ${e}, ${t}`)}(e.body,r)}}async function Y(e,t,r,i={},a){var s;let l=null!=a?a:(n||(n=O()),n),u=function(e,t,r={}){var n,i,a;let s=function(e={}){var t,r,n;return null!=(n=null!=(t=e.contentType)?t:null==(r=e.headers)?void 0:r["content-type"])?n:function(e){if(ArrayBuffer.isView(e))return"application/octet-stream";if("string"==typeof e)try{JSON.parse(e)}catch(e){return}return"application/json"}(e.body)}(r),{body:l,multipartBody:u}=function(e,t=""){if(void 0===e)return{body:void 0};if("undefined"!=typeof FormData&&e instanceof FormData||(0,G.H1)(e))return{body:e};if(ArrayBuffer.isView(e))return{body:e instanceof Uint8Array?e:JSON.stringify(e)};switch(t.split(";")[0]){case"application/json":return{body:JSON.stringify(e)};case"multipart/form-data":if(Array.isArray(e))return{multipartBody:{parts:e.map(K)}};return{body:JSON.stringify(e)};case"text/plain":return{body:String(e)};default:if("string"==typeof e)return{body:e};return{body:JSON.stringify(e)}}}(r.body,s),d=(0,o.N)(Object.assign(Object.assign(Object.assign({},r.headers?r.headers:{}),{accept:null!=(a=null!=(n=r.accept)?n:null==(i=r.headers)?void 0:i.accept)?a:"application/json"}),(void 0!==l||void 0!==u)&&s&&{"content-type":s}));return c({url:t,method:e,body:l,multipartBody:u,headers:d,allowInsecureConnection:r.allowInsecureConnection,abortSignal:r.abortSignal,onUploadProgress:r.onUploadProgress,onDownloadProgress:r.onDownloadProgress,timeout:r.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:r.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}(e,t,i);try{let e=await r.sendRequest(l,u),t=e.headers.toJSON(),n=null!=(s=e.readableStreamBody)?s:e.browserStreamBody,o=i.responseAsStream||void 0!==n?void 0:function(e){var t,r;let n=(null!=(t=e.headers.get("content-type"))?t:"").split(";")[0],i=null!=(r=e.bodyAsText)?r:"";if("text/plain"===n)return String(i);try{return i?JSON.parse(i):void 0}catch(t){if("application/json"===n)throw function(e,t){var r;let n=`Error "${t}" occurred while parsing the response body - ${e.bodyAsText}.`,i=null!=(r=t.code)?r:m.PARSE_ERROR;return new m(n,{code:i,statusCode:e.status,request:e.request,response:e})}(e,t);return String(i)}}(e),a=null!=n?n:o;return(null==i?void 0:i.onResponse)&&i.onResponse(Object.assign(Object.assign({},e),{request:u,rawHeaders:t,parsedBody:o})),{request:u,headers:t,status:`${e.status}`,body:a}}catch(e){if(y(e)&&e.response&&i.onResponse){let{response:t}=e,r=t.headers.toJSON();null==i||i.onResponse(Object.assign(Object.assign({},t),{request:u,rawHeaders:r}),e)}throw e}}function W(e,t,r,n){let i,o=(Array.isArray(n)?n:"object"==typeof n&&n.toString===Object.prototype.toString?Object.entries(n).flat():[n]).map(r=>{if(null==r)return"";if(!r.toString||"function"!=typeof r.toString)throw Error(`Query parameters must be able to be represented as string, ${e} can't`);let n=void 0!==r.toISOString?r.toISOString():r.toString();return t?n:encodeURIComponent(n)}).join("pipeDelimited"===r?"|":"spaceDelimited"===r?"%20":",");return`${t?e:encodeURIComponent(e)}=${o}`}function X(e,t={}){var r,n,i;let o=null!=(r=t.pipeline)?r:function(e={}){var t,r,n,i;let o=function(e){let t=d();return L.qx&&(e.agent&&t.addPolicy((0,$.e)(e.agent)),e.tlsOptions&&t.addPolicy((0,j.i)(e.tlsOptions)),t.addPolicy((0,U.Ll)(e.proxyOptions)),t.addPolicy((0,M.r)())),t.addPolicy((0,x.j)(),{beforePolicies:[q.u]}),t.addPolicy((0,N.z)(e.userAgentOptions)),t.addPolicy((0,q.J)(),{afterPhase:"Deserialize"}),t.addPolicy((0,D.u)(e.retryOptions),{phase:"Retry"}),L.qx&&t.addPolicy((0,P.x)(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,k.r)(e.loggingOptions),{afterPhase:"Sign"}),t}(e);o.addPolicy({name:"ApiVersionPolicy",sendRequest:(t,r)=>{let n=new URL(t.url);return!n.searchParams.get("api-version")&&e.apiVersion&&(t.url=`${t.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${e.apiVersion}`),r(t)}});let{credential:a,authSchemes:s,allowInsecureConnection:c}=e;return a&&("key"in a?o.addPolicy((t={authSchemes:s,credential:a,allowInsecureConnection:c},{name:"apiKeyAuthenticationPolicy",async sendRequest(e,r){var n,i;B(e,t);let o=null==(i=null!=(n=e.authSchemes)?n:t.authSchemes)?void 0:i.find(e=>"apiKey"===e.kind);if(!o)return r(e);if("header"!==o.apiKeyLocation)throw Error(`Unsupported API key location: ${o.apiKeyLocation}`);return e.headers.set(o.name,t.credential.key),r(e)}})):"username"in a&&"password"in a?o.addPolicy((r={authSchemes:s,credential:a,allowInsecureConnection:c},{name:"bearerAuthenticationPolicy",async sendRequest(e,t){var n,i;if(B(e,r),!(null==(i=null!=(n=e.authSchemes)?n:r.authSchemes)?void 0:i.find(e=>"http"===e.kind&&"basic"===e.scheme)))return t(e);let{username:o,password:a}=r.credential,s=(0,H.S)((0,H.A)(`${o}:${a}`,"utf-8"),"base64");return e.headers.set("Authorization",`Basic ${s}`),t(e)}})):"getBearerToken"in a?o.addPolicy((n={authSchemes:s,credential:a,allowInsecureConnection:c},{name:"bearerAuthenticationPolicy",async sendRequest(e,t){var r,i;if(B(e,n),!(null==(i=null!=(r=e.authSchemes)?r:n.authSchemes)?void 0:i.find(e=>"http"===e.kind&&"bearer"===e.scheme)))return t(e);let o=await n.credential.getBearerToken({abortSignal:e.abortSignal});return e.headers.set("Authorization",`Bearer ${o}`),t(e)}})):"getOAuth2Token"in a&&o.addPolicy((i={authSchemes:s,credential:a,allowInsecureConnection:c},{name:"oauth2AuthenticationPolicy",async sendRequest(e,t){var r,n;B(e,i);let o=null==(n=null!=(r=e.authSchemes)?r:i.authSchemes)?void 0:n.find(e=>"oauth2"===e.kind);if(!o)return t(e);let a=await i.credential.getOAuth2Token(o.flows,{abortSignal:e.abortSignal});return e.headers.set("Authorization",`Bearer ${a}`),t(e)}}))),o}(t);if(null==(n=t.additionalPolicies)?void 0:n.length)for(let{policy:e,position:r}of t.additionalPolicies){let t="perRetry"===r?"Sign":void 0;o.addPolicy(e,{afterPhase:t})}let{allowInsecureConnection:a,httpClient:s}=t,c=null!=(i=t.endpoint)?i:e,l=(e,...t)=>{let r=r=>(function(e,t,r,n={}){return t.startsWith("https://")||t.startsWith("http://")?t:(e=function(e,t){var r,n,i,o;if(!t.pathParameters)return e;for(let[a,s]of Object.entries(t.pathParameters)){if(null==s)throw Error(`Path parameters ${a} must not be undefined or null`);if(!s.toString||"function"!=typeof s.toString)throw Error(`Path parameters must be able to be represented as string, ${a} can't`);let c=void 0!==s.toISOString?s.toISOString():String(s);t.skipUrlEncoding||(c=encodeURIComponent(s)),e=null!=(n=e,i=`{${a}}`,o=c,r=n&&i?n.split(i).join(o||""):n)?r:""}return e}(e,n),t=function(e,t,r={}){var n;for(let i of t){let t="object"==typeof i&&null!=(n=i.allowReserved)&&n,o="object"==typeof i?i.value:i;r.skipUrlEncoding||t||(o=encodeURIComponent(o)),e=e.replace(/\{[\w-]+\}/,String(o))}return e}(t,r,n),new URL(function(e,t={}){var r,n,i,o;if(!t.queryParameters)return e;let a=new URL(e),s=t.queryParameters,c=[];for(let e of Object.keys(s)){let a=s[e];if(null==a)continue;let l=function(e){let t=e.value;return void 0!==t&&void 0!==t.toString&&"function"==typeof t.toString}(a),u=l?a.value:a,d=!!l&&null!=(r=a.explode)&&r,h=l&&a.style?a.style:"form";if(d)if(Array.isArray(u))for(let r of u)c.push(W(e,null!=(n=t.skipUrlEncoding)&&n,h,r));else if("object"==typeof u)for(let[e,r]of Object.entries(u))c.push(W(e,null!=(i=t.skipUrlEncoding)&&i,h,r));else throw Error("explode can only be set to true for objects and arrays");else c.push(W(e,null!=(o=t.skipUrlEncoding)&&o,h,u))}return""!==a.search&&(a.search+="&"),a.search+=c.join("&"),a.toString()}(`${e}/${t}`,n)).toString().replace(/([^:]\/)\/+/g,"$1"))})(c,e,t,Object.assign({allowInsecureConnection:a},r));return{get:(e={})=>J("GET",r(e),o,e,a,s),post:(e={})=>J("POST",r(e),o,e,a,s),put:(e={})=>J("PUT",r(e),o,e,a,s),patch:(e={})=>J("PATCH",r(e),o,e,a,s),delete:(e={})=>J("DELETE",r(e),o,e,a,s),head:(e={})=>J("HEAD",r(e),o,e,a,s),options:(e={})=>J("OPTIONS",r(e),o,e,a,s),trace:(e={})=>J("TRACE",r(e),o,e,a,s)}};return{path:l,pathUnchecked:l,pipeline:o}}function J(e,t,r,n,i,o){var a;return i=null!=(a=n.allowInsecureConnection)?a:i,{then:function(a,s){return Y(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i}),o).then(a,s)},async asBrowserStream(){if(!L.qx)return Y(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i,responseAsStream:!0}),o);throw Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.")},async asNodeStream(){if(L.qx)return Y(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i,responseAsStream:!0}),o);throw Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function Q(e){var t,r,n,i,o,a;return{allowInsecureConnection:null==(t=e.requestOptions)?void 0:t.allowInsecureConnection,timeout:null==(r=e.requestOptions)?void 0:r.timeout,skipUrlEncoding:null==(n=e.requestOptions)?void 0:n.skipUrlEncoding,abortSignal:e.abortSignal,onUploadProgress:null==(i=e.requestOptions)?void 0:i.onUploadProgress,onDownloadProgress:null==(o=e.requestOptions)?void 0:o.onDownloadProgress,headers:Object.assign({},null==(a=e.requestOptions)?void 0:a.headers),onResponse:e.onResponse}}function Z(e,t){var r,n,i,a,s;let c="string"==typeof e?t:e,l=null!=(n=null==(r=c.body)?void 0:r.error)?n:c.body;return new m("string"==typeof e?e:null!=(i=null==l?void 0:l.message)?i:`Unexpected status code: ${c.status}`,{statusCode:ee(c.status),code:null==l?void 0:l.code,request:c.request,response:(a=c,{headers:(0,o.N)(a.headers),request:a.request,status:null!=(s=ee(a.status))?s:-1})})}function ee(e){let t=Number.parseInt(e);return Number.isNaN(t)?void 0:t}},77553:e=>{var t=1/0,r=0/0,n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){var u,d,h,p,f=2,g=e;if("function"!=typeof g)throw TypeError("Expected a function");return h=(d=(u=f)?(u=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==c.call(t))return r;if(l(e)){var t,u="function"==typeof e.valueOf?e.valueOf():e;e=l(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var d=o.test(e);return d||a.test(e)?s(e.slice(2),d?2:8):i.test(e)?r:+e}(u))===t||u===-t?(u<0?-1:1)*17976931348623157e292:u==u?u:0:0===u?u:0)%1,f=d==d?h?d-h:d:0,function(){return--f>0&&(p=g.apply(this,arguments)),f<=1&&(g=void 0),p}}},78905:(e,t,r)=>{"use strict";let n=r(67548),i=r(74450),o=r(91680),a=r(42717),s=r(14494),c=r(21445),l=r(74756),u=r(27699),d=r(32276),h=r(98892),p=r(60928),f=r(2701),g=r(6035),m=r(3386),y=r(4658),v=r(47403),E=r(32977),T=r(48049),b=r(40041),A=r(14964),C=r(39393),S=r(20235),_=r(31495),I=r(84429),R=r(15378),w=r(57807),O=r(7270),k=r(95832),P=r(39335),N=r(1776),M=r(4215),D=r(73686),x=r(43368),L=r(76091),U=r(82526),$=r(59097),j=r(333),q=r(39730),F=r(98742);e.exports={parse:s,valid:c,clean:l,inc:u,diff:d,major:h,minor:p,patch:f,prerelease:g,compare:m,rcompare:y,compareLoose:v,compareBuild:E,sort:T,rsort:b,gt:A,lt:C,eq:S,neq:_,gte:I,lte:R,cmp:w,coerce:O,Comparator:k,Range:P,satisfies:N,toComparators:M,maxSatisfying:D,minSatisfying:x,minVersion:L,validRange:U,outside:$,gtr:j,ltr:q,intersects:F,simplifyRange:r(87637),subset:r(63726),SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},79535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return o},normalizeRscURL:function(){return a}});let n=r(90372),i=r(84212);function o(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},79737:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,e.exports=t},81299:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,P:()=>c});var n=r(15529);let i="Retry-After",o=["retry-after-ms","x-ms-retry-after-ms",i];function a(e){if(e&&[429,503].includes(e.status))try{for(let t of o){let r=(0,n.H)(e,t);if(0===r||r){let e=t===i?1e3:1;return r*e}}let t=e.headers.get(i);if(!t)return;let r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch(e){return}}function s(e){return Number.isFinite(a(e))}function c(){return{name:"throttlingRetryStrategy",retry({response:e}){let t=a(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}},81452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(4431).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81905:(e,t,r)=>{"use strict";r.d(t,{pj:()=>w,N$:()=>G,uQ:()=>j,fl:()=>N,Nc:()=>M,Fp:()=>P,G6:()=>D,Jb:()=>L});var n=r(77537),i=r(75735);let o=(0,i.KV)("core-rest-pipeline");var a=r(64285),s=r(18186),c=r(3213);r(86185);var l=r(96908);r(81299);var u=r(30800),d=r(85148),h=r(12323),p=r(64366),f=r(20294),g=r(56901);r(58650);var m=r(48161),y=r(1708),v=r.t(y,2);async function E(e){if(v&&y.versions){let t=y.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${m.arch()}-${m.type()}-${m.release()})`)}let T="1.22.0";async function b(e){let t=new Map;t.set("core-rest-pipeline",T),await E(t);let r=function(e){let t=[];for(let[r,n]of e){let e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}let A="User-Agent";var C=r(82813);let S=Symbol("rawContent");function _(e){return"function"==typeof e[S]}let I=h.u;var R=r(70436);let w=n.pj;var O=r(162);function k(e){if(e instanceof AbortSignal)return{abortSignal:e};if(e.aborted)return{abortSignal:AbortSignal.abort(e.reason)};let t=new AbortController,r=!0;function n(){r&&(e.removeEventListener("abort",i),r=!1)}function i(){t.abort(e.reason),n()}return e.addEventListener("abort",i),{abortSignal:t.signal,cleanup:n}}function P(e){var t,r,i,l;let m=(0,n.O8)();return C.qx&&(e.agent&&m.addPolicy((r=e.agent,(0,a.e)(r))),e.tlsOptions&&m.addPolicy((i=e.tlsOptions,(0,g.i)(i))),m.addPolicy((l=e.proxyOptions,(0,p.Ll)(l,void 0))),m.addPolicy((0,s.r)())),m.addPolicy({name:"wrapAbortSignalLikePolicy",sendRequest:async(e,t)=>{if(!e.abortSignal)return t(e);let{abortSignal:r,cleanup:n}=k(e.abortSignal);e.abortSignal=r;try{return await t(e)}finally{null==n||n()}}}),m.addPolicy((0,u.j)(),{beforePolicies:[I]}),m.addPolicy(function(e={}){let t=b(e.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:async(e,r)=>(e.headers.has(A)||e.headers.set(A,await t),r(e))}}(e.userAgentOptions)),m.addPolicy(function(e="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:async(t,r)=>(t.headers.has(e)||t.headers.set(e,t.requestId),r(t))}}(null==(t=e.telemetryOptions)?void 0:t.clientRequestIdHeaderName)),m.addPolicy(function(){let e=(0,h.J)();return{name:I,sendRequest:async(t,r)=>{if(t.multipartBody)for(let e of t.multipartBody.parts){var n;_(e.body)&&(e.body=_(n=e.body)?n[S]():n)}return e.sendRequest(t,r)}}}(),{afterPhase:"Deserialize"}),m.addPolicy(function(e={}){return(0,c.u)(e)}(e.retryOptions),{phase:"Retry"}),m.addPolicy(function(e={}){let t=b(e.userAgentPrefix),r=new O.If({additionalAllowedQueryParameters:e.additionalAllowedQueryParameters}),i=function(){try{return(0,R.y)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:T})}catch(e){o.warning(`Error when creating the TracingClient: ${(0,C.u1)(e)}`);return}}();return{name:"tracingPolicy",async sendRequest(e,a){var s;if(!i)return a(e);let c=await t,l={"http.url":r.sanitizeUrl(e.url),"http.method":e.method,"http.user_agent":c,requestId:e.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:d}=null!=(s=function(e,t,r){try{let{span:n,updatedOptions:i}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording())return void n.end();let o=e.createRequestHeaders(i.tracingOptions.tracingContext);for(let[e,r]of Object.entries(o))t.headers.set(e,r);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(e){o.warning(`Skipping creating a tracing span due to an error: ${(0,C.u1)(e)}`);return}}(i,e,l))?s:{};if(!u||!d)return a(e);try{let t=await i.withContext(d,a,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);let r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),t.status>=400&&e.setStatus({status:"error"}),e.end()}catch(e){o.warning(`Skipping tracing span processing due to an error: ${(0,C.u1)(e)}`)}}(u,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:(0,C.bJ)(t)?t:void 0}),(0,n.T0)(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){o.warning(`Skipping tracing span processing due to an error: ${(0,C.u1)(e)}`)}}(u,e),e}}}}(Object.assign(Object.assign({},e.userAgentOptions),e.loggingOptions)),{afterPhase:"Retry"}),C.qx&&m.addPolicy(function(e={}){return(0,f.x)(e)}(e.redirectOptions),{afterPhase:"Retry"}),m.addPolicy(function(e={}){return(0,d.r)(Object.assign({logger:o.info},e))}(e.loggingOptions),{afterPhase:"Sign"}),m}function N(){let e=(0,n.fl)();return{async sendRequest(t){let{abortSignal:r,cleanup:n}=t.abortSignal?k(t.abortSignal):{};try{return t.abortSignal=r,await e.sendRequest(t)}finally{null==n||n()}}}}function M(e){return(0,n.Nc)(e)}function D(e){return(0,n.G6)(e)}let x=(0,i.KV)("core-rest-pipeline retryPolicy");function L(e,t={maxRetries:3}){return(0,l.J)(e,Object.assign({logger:x},t))}let U={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function $(e,t,r){async function n(){if(Date.now()<r)try{return await e()}catch(e){return null}{let t=await e();if(null===t)throw Error("Failed to refresh access token.");return t}}let i=await n();for(;null===i;)await (0,C.cb)(t),i=await n();return i}let j="bearerTokenAuthenticationPolicy";async function q(e,t){try{return[await t(e),void 0]}catch(e){if((0,n.T0)(e)&&e.response)return[e.response,e];throw e}}async function F(e){let{scopes:t,getAccessToken:r,request:n}=e,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(t,i);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}function B(e){return 401===e.status&&e.headers.has("WWW-Authenticate")}async function H(e,t){var r;let{scopes:n}=e,i=await e.getAccessToken(n,{enableCae:!0,claims:t});return!!i&&(e.request.headers.set("Authorization",`${null!=(r=i.tokenType)?r:"Bearer"} ${i.token}`),!0)}function G(e){var t,r,n;let{credential:i,scopes:a,challengeCallbacks:s}=e,c=e.logger||o,l={authorizeRequest:null!=(r=null==(t=null==s?void 0:s.authorizeRequest)?void 0:t.bind(s))?r:F,authorizeRequestOnChallenge:null==(n=null==s?void 0:s.authorizeRequestOnChallenge)?void 0:n.bind(s)},u=i?function(e,t){let r,n=null,i=null,o=Object.assign(Object.assign({},U),void 0),a={get isRefreshing(){return null!==n},get shouldRefresh(){var s;if(a.isRefreshing)return!1;if((null==i?void 0:i.refreshAfterTimestamp)&&i.refreshAfterTimestamp<Date.now())return!0;return(null!=(s=null==i?void 0:i.expiresOnTimestamp)?s:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return null===i||i.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(t,s){var c;return a.isRefreshing||(n=$(()=>e.getToken(t,s),o.retryIntervalInMs,null!=(c=null==i?void 0:i.expiresOnTimestamp)?c:Date.now()).then(e=>(n=null,i=e,r=s.tenantId,i)).catch(e=>{throw n=null,i=null,r=void 0,e})),n}return async(e,t)=>{let n=!!t.claims,o=r!==t.tenantId;return(n&&(i=null),o||n||a.mustRefresh)?c(e,t):(a.shouldRefresh&&c(e,t),i)}}(i):()=>Promise.resolve(null);return{name:j,async sendRequest(e,t){let r,n,i;if(!e.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");if(await l.authorizeRequest({scopes:Array.isArray(a)?a:[a],request:e,getAccessToken:u,logger:c}),[r,n]=await q(e,t),B(r)){let i=z(r.headers.get("WWW-Authenticate"));if(i){let o;try{o=atob(i)}catch(e){return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}await H({scopes:Array.isArray(a)?a:[a],response:r,request:e,getAccessToken:u,logger:c},o)&&([r,n]=await q(e,t))}else if(l.authorizeRequestOnChallenge&&(await l.authorizeRequestOnChallenge({scopes:Array.isArray(a)?a:[a],request:e,response:r,getAccessToken:u,logger:c})&&([r,n]=await q(e,t)),B(r))&&(i=z(r.headers.get("WWW-Authenticate")))){let o;try{o=atob(i)}catch(e){return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}await H({scopes:Array.isArray(a)?a:[a],response:r,request:e,getAccessToken:u,logger:c},o)&&([r,n]=await q(e,t))}}if(!n)return r;throw n}}}function z(e){var t;if(e)return null==(t=(function(e){let t,r=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,n=/(\w+)="([^"]*)"/g,i=[];for(;null!==(t=r.exec(e));){let e,r=t[1],o=t[2],a={};for(;null!==(e=n.exec(o));)a[e[1]]=e[2];i.push({scheme:r,params:a})}return i})(e).find(e=>"Bearer"===e.scheme&&e.params.claims&&"insufficient_claims"===e.params.error))?void 0:t.params.claims}},82493:(e,t,r)=>{let n=r(83997),i=r(28354);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:n,useColors:i}=this;if(i){let t=this.color,i="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} \u001B[0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)},t.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(61387);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(95006)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},82526:(e,t,r)=>{"use strict";let n=r(39335);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},82634:(e,t,r)=>{e.exports={decode:r(36028),verify:r(92541),sign:r(36833),JsonWebTokenError:r(79737),NotBeforeError:r(35834),TokenExpiredError:r(27878)}},82813:(e,t,r)=>{"use strict";r.d(t,{gE:()=>c,cb:()=>o,u1:()=>a,bJ:()=>l,Ll:()=>u,qx:()=>d,TA:()=>s,Al:()=>p,SW:()=>h});var n=r(162),i=r(26364);function o(e,t){let r,{abortSignal:n,abortErrorMsg:o}=null!=t?t:{};return function(e,t){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:o}=null!=t?t:{};return new Promise((t,a)=>{function s(){a(new i.l(null!=o?o:"The operation was aborted."))}function c(){null==n||n.removeEventListener("abort",l)}function l(){null==r||r(),c(),s()}if(null==n?void 0:n.aborted)return s();try{e(e=>{c(),t(e)},e=>{c(),a(e)})}catch(e){a(e)}null==n||n.addEventListener("abort",l)})}(t=>{r=setTimeout(t,e)},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:n,abortErrorMsg:null!=o?o:"The delay was aborted."})}function a(e){if((0,n.bJ)(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}function s(e,t){if(null==e||"object"!=typeof e)return!1;for(let r of t)if(!function(e,t){return null!=e&&"object"==typeof e&&t in e}(e,r))return!1;return!0}function c(e,t){return n.gE(e,t)}function l(e){return n.bJ(e)}n.Bd,n.Qg,n.N6;let u=n.qx,d=n.qx;function h(e,t){return n.SW(e,t)}function p(e,t){return n.Al(e,t)}n.tX,n.lV,n.p7},83473:(e,t,r)=>{var n=r(91571).Buffer,i=r(67780),o=r(77047),a=r(27910),s=r(56895),c=r(28354),l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(e){var t=e.split(".",1)[0],r=n.from(t,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(r))return r;try{return JSON.parse(r)}catch(e){return}}function d(e){return e.split(".")[2]}function h(e){return l.test(e)&&!!u(e)}function p(e,t,r){if(!t){var n=Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=d(e=s(e)),a=e.split(".",2).join(".");return o(t).verify(a,i,r)}function f(e,t){if(t=t||{},!h(e=s(e)))return null;var r,i,o=u(e);if(!o)return null;var a=(r=r||"utf8",i=e.split(".")[1],n.from(i,"base64").toString(r));return("JWT"===o.typ||t.json)&&(a=JSON.parse(a,t.encoding)),{header:o,payload:a,signature:d(e)}}function g(e){var t=new i((e=e||{}).secret||e.publicKey||e.key);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new i(e.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}c.inherits(g,a),g.prototype.verify=function(){try{var e=p(this.signature.buffer,this.algorithm,this.key.buffer),t=f(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=f,g.isValid=h,g.verify=p,e.exports=g},84212:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function n(e){return e.startsWith("@")&&"@children"!==e}function i(e,t){if(e.includes(o)){let e=JSON.stringify(t);return"{}"!==e?o+"?"+e:o}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return a},PAGE_SEGMENT_KEY:function(){return o},addSearchParamsIfPageSegment:function(){return i},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return n}});let o="__PAGE__",a="__DEFAULT__"},84429:(e,t,r)=>{"use strict";let n=r(3386);e.exports=(e,t,r)=>n(e,t,r)>=0},85148:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var n=r(66175),i=r(46587);function o(e={}){var t;let r=null!=(t=e.logger)?t:n.v.info,a=new i.I({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:"logPolicy",async sendRequest(e,t){if(!r.enabled)return t(e);r(`Request: ${a.sanitize(e)}`);let n=await t(e);return r(`Response status code: ${n.status}`),r(`Headers: ${a.sanitize(n.headers)}`),n}}}},86108:e=>{var t=Object.prototype.toString;e.exports=function(e){var r;return!0===e||!1===e||!!(r=e)&&"object"==typeof r&&"[object Boolean]"==t.call(e)}},86185:(e,t,r)=>{"use strict";r.d(t,{xB:()=>o});var n=r(74864),i=r(81299);function o(e={}){var t,r;let a=null!=(t=e.retryDelayInMs)?t:1e3,s=null!=(r=e.maxRetryDelayInMs)?r:64e3;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:r,responseError:o}){var c,l;let u=!!(c=o)&&("ETIMEDOUT"===c.code||"ESOCKETTIMEDOUT"===c.code||"ECONNREFUSED"===c.code||"ECONNRESET"===c.code||"ENOENT"===c.code||"ENOTFOUND"===c.code),d=u&&e.ignoreSystemErrors,h=!!((l=r)&&void 0!==l.status&&(l.status>=500||408===l.status)&&501!==l.status&&505!==l.status),p=h&&e.ignoreHttpStatusCodes;return r&&((0,i.$)(r)||!h)||p||d?{skipStrategy:!0}:!o||u||h?(0,n.g)(t,{retryDelayInMs:a,maxRetryDelayInMs:s}):{errorToThrow:o}}}}},86394:(e,t,r)=>{"use strict";var n=r(91571).Buffer,i=r(6557);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}e.exports={derToJose:function(e,t){e=o(e);var r=i(t),a=r+1,s=e.length,c=0;if(48!==e[c++])throw Error('Could not find expected "seq"');var l=e[c++];if(129===l&&(l=e[c++]),s-c<l)throw Error('"seq" specified length of "'+l+'", only "'+(s-c)+'" remaining');if(2!==e[c++])throw Error('Could not find expected "int" for "r"');var u=e[c++];if(s-c-2<u)throw Error('"r" specified length of "'+u+'", only "'+(s-c-2)+'" available');if(a<u)throw Error('"r" specified length of "'+u+'", max of "'+a+'" is acceptable');var d=c;if(c+=u,2!==e[c++])throw Error('Could not find expected "int" for "s"');var h=e[c++];if(s-c!==h)throw Error('"s" specified length of "'+h+'", expected "'+(s-c)+'"');if(a<h)throw Error('"s" specified length of "'+h+'", max of "'+a+'" is acceptable');var p=c;if((c+=h)!==s)throw Error('Expected to consume entire buffer, but "'+(s-c)+'" bytes remain');var f=r-u,g=r-h,m=n.allocUnsafe(f+u+g+h);for(c=0;c<f;++c)m[c]=0;e.copy(m,c,d+Math.max(-f,0),d+u),c=r;for(var y=c;c<y+g;++c)m[c]=0;return e.copy(m,c,p+Math.max(-g,0),p+h),m=(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=o(e);var r=i(t),s=e.length;if(s!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+s+'"');var c=a(e,0,r),l=a(e,r,e.length),u=r-c,d=r-l,h=2+u+1+1+d,p=h<128,f=n.allocUnsafe((p?2:3)+h),g=0;return f[g++]=48,p?f[g++]=h:(f[g++]=129,f[g++]=255&h),f[g++]=2,f[g++]=u,c<0?(f[g++]=0,g+=e.copy(f,g,0,r)):g+=e.copy(f,g,c,r),f[g++]=2,f[g++]=d,l<0?(f[g++]=0,e.copy(f,g,r)):e.copy(f,g,r+l),f}}},86834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},87273:(e,t,r)=>{"use strict";r.d(t,{_V:()=>eI});var n,i,o=r(61514),a=r(75735);let s=(0,a.KV)("keyvault-secrets"),c=(0,a.KV)("keyvault-secrets");var l=r(77537);function u(e,t){return"string"==typeof e?(0,l.t$)(e,t):(0,l.t$)(e)}var d=r(81905),h=r(82813);function p(e){return e&&"function"==typeof e.getToken&&(void 0===e.signRequest||e.getToken.length>0)}function f(e){return(0,l.Iq)(e)}function g(e){return e.onResponse?Object.assign(Object.assign({},e),{onResponse(t,r){var n;null==(n=e.onResponse)||n.call(e,t,r,r)}}):e}function m(e){return{enabled:e.enabled,nbf:e.notBefore?e.notBefore.getTime()/1e3|0:e.notBefore,exp:e.expires?e.expires.getTime()/1e3|0:e.expires}}function y(e){return{enabled:e.enabled,notBefore:e.nbf?new Date(1e3*e.nbf):e.nbf,expires:e.exp?new Date(1e3*e.exp):e.exp,created:e.created?new Date(1e3*e.created):e.created,updated:e.updated?new Date(1e3*e.updated):e.updated,recoverableDays:e.recoverableDays,recoveryLevel:e.recoveryLevel}}function v(e){return{value:e.value,id:e.id,contentType:e.contentType,attributes:e.attributes?y(e.attributes):e.attributes,tags:e.tags,kid:e.kid,managed:e.managed}}function E(e){return{error:e.error?function e(t){return{code:t.code,message:t.message,innerError:t.innererror?e(t.innererror):t.innererror}}(e.error):e.error}}function T(e){return{value:e.value,id:e.id,contentType:e.contentType,attributes:e.attributes?y(e.attributes):e.attributes,tags:e.tags,kid:e.kid,managed:e.managed,recoveryId:e.recoveryId,scheduledPurgeDate:e.scheduledPurgeDate?new Date(1e3*e.scheduledPurgeDate):e.scheduledPurgeDate,deletedDate:e.deletedDate?new Date(1e3*e.deletedDate):e.deletedDate}}function b(e){return{value:e.value?e.value.map(e=>{var t;return{id:(t=e).id,attributes:t.attributes?y(t.attributes):t.attributes,tags:t.tags,contentType:t.contentType,managed:t.managed}}):e.value,nextLink:e.nextLink}}function A(e,t,r,n,i={}){let a=null!=(l=i.itemName)?l:"value",s=null!=(h=i.nextLinkName)?h:"nextLink",c={getPage:async i=>{let o=void 0===i?await t():await e.pathUnchecked(i).get();var c=o,l=n;if(!l.includes(c.status))throw u(`Pagination failed with unexpected statusCode ${c.status}`,c);let h=await r(o),p=function(e,t){if(!t)return;let r=e[t];if("string"!=typeof r&&null!=r)throw new d.pj(`Body Property ${t} should be a string or undefined or null but got ${typeof r}`);if(null!==r)return r}(h,s);return{page:function(e,t){let r=e[t];if(!Array.isArray(r))throw new d.pj(`Couldn't paginate response
 Body doesn't contain an array property with name: ${t}`);return null!=r?r:[]}(h,a),nextPageLink:p}},byPage:e=>{let{continuationToken:t}=null!=e?e:{};return C(c,{pageLink:t})}};var l,h,p,f=c;let g=function(e){return(0,o.AQ)(this,arguments,function*(){var t,r,n,i;let a=C(e);try{for(var s,c=!0,l=(0,o.xN)(a);!(t=(s=yield(0,o.N3)(l.next())).done);c=!0)i=s.value,c=!1,yield(0,o.N3)((yield*(0,o.Me)((0,o.xN)(i))))}catch(e){r={error:e}}finally{try{!c&&!t&&(n=l.return)&&(yield(0,o.N3)(n.call(l)))}finally{if(r)throw r.error}}})}(f);return{next:()=>g.next(),[Symbol.asyncIterator](){return this},byPage:null!=(p=null==f?void 0:f.byPage)?p:e=>{let{continuationToken:t}=null!=e?e:{};return C(f,{pageLink:t})}}}function C(e){return(0,o.AQ)(this,arguments,function*(e,t={}){let{pageLink:r}=t,n=yield(0,o.N3)(e.getPage(null!=r?r:e.firstPageLink));if(!n)return yield(0,o.N3)(void 0);let i=n.page;for(i.continuationToken=n.nextPageLink,yield yield(0,o.N3)(i);n.nextPageLink;){if(!(n=yield(0,o.N3)(e.getPage(n.nextPageLink))))return yield(0,o.N3)(void 0);(i=n.page).continuationToken=n.nextPageLink,yield yield(0,o.N3)(i)}})}function S(e,t,r){return(null!=t?t:"+"===r)||"#"===r?_(e):I(e)}function _(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(e=>/%[0-9A-Fa-f]/.test(e)?e:encodeURI(e)).join("")}function I(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}function R(e){return null!=e}function w(e){return[!!e&&[";","?","&"].includes(e),e&&["?","&"].includes(e)?"=":""]}function O(e,t=!1){return t?e&&"+"!==e?e:"":e&&"+"!==e&&"#"!==e?"?"===e?"&":e:","}function k(e,t,r){return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(e,n,i)=>{let o;if(!n)return _(i);["+","#",".","/",";","?","&"].includes(n[0])&&(o=n[0],n=n.slice(1));let a=n.split(/,/g),s=[];for(let e of a){let n=/([^:\*]*)(?::(\d+)|(\*))?/.exec(e);if(!n||!n[1])continue;let i=function(e){let{op:t,varName:r,modifier:n,isFirst:i,reserved:o,varValue:a}=e;if(R(a)){if(["string","number","boolean"].includes(typeof a)){let e=a.toString(),[s,c]=w(t),l=[O(t,i)];return s&&r&&(l.push(r),""===e?l.push(c):l.push("=")),n&&"*"!==n&&(e=e.substring(0,parseInt(n,10))),l.push(S(e,o,t)),l.join("")}return"*"===n?function(e){let t=e.isFirst,{op:r,varName:n,varValue:i,reserved:o}=e,a=[],[s,c]=w(r);if(Array.isArray(i))for(let e of i.filter(R))a.push(`${O(r,t)}`),s&&n&&(a.push(`${encodeURIComponent(n)}`),""===e?a.push(c):a.push("=")),a.push(S(e,o,r)),t=!1;else if("object"==typeof i)for(let e of Object.keys(i)){let n=i[e];R(n)&&(a.push(`${O(r,t)}`),e&&(a.push(`${encodeURIComponent(e)}`),s&&""===n?a.push(c):a.push("=")),a.push(S(n,o,r)),t=!1)}return a.join("")}(e):function(e){let{op:t,varName:r,varValue:n,isFirst:i,reserved:o}=e,a=[],s=O(t,i),[c,l]=w(t);if(c&&r){if(a.push(S(r,o,t)),""===n)return l||a.push(l),a.join("")?`${s}${a.join("")}`:void 0;a.push("=")}let u=[];if(Array.isArray(n))for(let e of n.filter(R))u.push(S(e,o,t));else if("object"==typeof n)for(let e of Object.keys(n))R(n[e])&&(u.push(I(e)),u.push(S(n[e],o,t)));return a.push(u.join(",")),a.join(",")?`${s}${a.join("")}`:void 0}(e)}}({isFirst:0===s.length,op:o,varValue:t[n[1]],varName:n[1],modifier:n[2]||n[3],reserved:null==r?void 0:r.allowReserved});i&&s.push(i)}return s.join("")})}async function P(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return v(e.body)}async function N(e,t,r={requestOptions:{}}){return P(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/secrets/restore{?api%2Dversion}",{"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).post(Object.assign(Object.assign({},f(r)),{contentType:"application/json",headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers),body:{value:(0,h.SW)(t.secretBundleBackup,"base64url")}}))}(e,t,r))}async function M(e){var t;if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return{value:(t=e.body).value&&"string"==typeof t.value?(0,h.Al)(t.value,"base64url"):t.value}}async function D(e,t,r={requestOptions:{}}){return M(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/secrets/{secret-name}/backup{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).post(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))}(e,t,r))}async function x(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return v(e.body)}async function L(e,t,r={requestOptions:{}}){return x(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/deletedsecrets/{secret-name}/recover{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).post(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))}(e,t,r))}async function U(e){if(!["204"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}}async function $(e,t,r={requestOptions:{}}){return U(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/deletedsecrets/{secret-name}{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).delete(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))}(e,t,r))}async function j(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return T(e.body)}async function q(e,t,r={requestOptions:{}}){return j(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/deletedsecrets/{secret-name}{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).get(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))}(e,t,r))}async function F(e){var t;if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return{value:(t=e.body).value?t.value.map(e=>{var t;return{id:(t=e).id,attributes:t.attributes?y(t.attributes):t.attributes,tags:t.tags,contentType:t.contentType,managed:t.managed,recoveryId:t.recoveryId,scheduledPurgeDate:t.scheduledPurgeDate?new Date(1e3*t.scheduledPurgeDate):t.scheduledPurgeDate,deletedDate:t.deletedDate?new Date(1e3*t.deletedDate):t.deletedDate}}):t.value,nextLink:t.nextLink}}async function B(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return b(e.body)}async function H(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return b(e.body)}async function G(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return v(e.body)}async function z(e,t,r,n={requestOptions:{}}){return G(await function(e,t,r,n={requestOptions:{}}){var i,o;let a=k("/secrets/{secret-name}/{secret-version}{?api%2Dversion}",{"secret-name":t,"secret-version":r,"api%2Dversion":e.apiVersion},{allowReserved:null==(i=null==n?void 0:n.requestOptions)?void 0:i.skipUrlEncoding});return e.path(a).get(Object.assign(Object.assign({},f(n)),{headers:Object.assign({accept:"application/json"},null==(o=n.requestOptions)?void 0:o.headers)}))}(e,t,r,n))}async function V(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return v(e.body)}async function K(e,t,r,n,i={requestOptions:{}}){return V(await function(e,t,r,n,i={requestOptions:{}}){var o,a;let s=k("/secrets/{secret-name}/{secret-version}{?api%2Dversion}",{"secret-name":t,"secret-version":r,"api%2Dversion":e.apiVersion},{allowReserved:null==(o=null==i?void 0:i.requestOptions)?void 0:o.skipUrlEncoding});return e.path(s).patch(Object.assign(Object.assign({},f(i)),{contentType:"application/json",headers:Object.assign({accept:"application/json"},null==(a=i.requestOptions)?void 0:a.headers),body:{contentType:n.contentType,attributes:n.secretAttributes?m(n.secretAttributes):n.secretAttributes,tags:n.tags}}))}(e,t,r,n,i))}async function Y(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return T(e.body)}async function W(e,t,r={requestOptions:{}}){return Y(await function(e,t,r={requestOptions:{}}){var n,i;let o=k("/secrets/{secret-name}{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).delete(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))}(e,t,r))}async function X(e){if(!["200"].includes(e.status)){let t=u(e);throw t.details=E(e.body),t}return v(e.body)}async function J(e,t,r,n={requestOptions:{}}){return X(await function(e,t,r,n={requestOptions:{}}){var i,o;let a=k("/secrets/{secret-name}{?api%2Dversion}",{"secret-name":t,"api%2Dversion":e.apiVersion},{allowReserved:null==(i=null==n?void 0:n.requestOptions)?void 0:i.skipUrlEncoding});return e.path(a).put(Object.assign(Object.assign({},f(n)),{contentType:"application/json",headers:Object.assign({accept:"application/json"},null==(o=n.requestOptions)?void 0:o.headers),body:{value:r.value,tags:r.tags,contentType:r.contentType,attributes:r.secretAttributes?m(r.secretAttributes):r.secretAttributes}}))}(e,t,r,n))}!function(e){e.Purgeable="Purgeable",e.RecoverablePurgeable="Recoverable+Purgeable",e.Recoverable="Recoverable",e.RecoverableProtectedSubscription="Recoverable+ProtectedSubscription",e.CustomizedRecoverablePurgeable="CustomizedRecoverable+Purgeable",e.CustomizedRecoverable="CustomizedRecoverable",e.CustomizedRecoverableProtectedSubscription="CustomizedRecoverable+ProtectedSubscription"}(n||(n={})),!function(e){e.V75="7.5",e.V76Preview2="7.6-preview.2",e.V76="7.6"}(i||(i={}));class Q{constructor(e,t,r={}){var n;let i=null==(n=null==r?void 0:r.userAgentOptions)?void 0:n.userAgentPrefix,a=i?`${i} azsdk-js-client`:"azsdk-js-client";this._client=function(e,t,r={}){var n,i,a,s,u,f,m,y;let v=null!=(i=null!=(n=r.endpoint)?n:r.baseUrl)?i:String(e),E=null==(a=null==r?void 0:r.userAgentOptions)?void 0:a.userAgentPrefix,T="azsdk-js-keyvault-secrets/1.0.0-beta.1",b=E?`${E} azsdk-js-api ${T}`:`azsdk-js-api ${T}`,A=Object.assign(Object.assign({},r),{userAgentOptions:{userAgentPrefix:b},loggingOptions:{logger:null!=(u=null==(s=r.loggingOptions)?void 0:s.logger)?u:c.info},credentials:{scopes:null!=(m=null==(f=r.credentials)?void 0:f.scopes)?m:["https://vault.azure.net/.default"]}}),{apiVersion:C}=A,S=function(e,t,r={}){let n;t&&(function(e){return(0,h.TA)(e,["key"])&&"string"==typeof e.key||p(e)}(t)?n=t:r=null!=t?t:{});let i=function(e,t,r={}){let n=(0,d.Fp)(r);return n.addPolicy({name:"ApiVersionPolicy",sendRequest:(e,t)=>{let n=new URL(e.url);return!n.searchParams.get("api-version")&&r.apiVersion&&(e.url=`${e.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),t(e)}}),!function(e,t,r={}){var n,i,o,a,s;let{credential:c,clientOptions:l}=r;if(c){if(p(c)){let r=(0,d.N$)({credential:c,scopes:null!=(i=null==(n=null==l?void 0:l.credentials)?void 0:n.scopes)?i:`${t}/.default`});e.addPolicy(r)}else if(void 0!==c.key){if(!(null==(o=null==l?void 0:l.credentials)?void 0:o.apiKeyHeaderName))throw Error("Missing API Key Header Name");let t=(s=null==(a=null==l?void 0:l.credentials)?void 0:a.apiKeyHeaderName,{name:"keyCredentialAuthenticationPolicy",sendRequest:async(e,t)=>(e.headers.set(s,c.key),t(e))});e.addPolicy(t)}}}(n,e,{credential:t,clientOptions:r}),n}(e,n,r),o=(0,l.KU)(e,Object.assign(Object.assign({},r),{pipeline:i})),a=(e,...t)=>({get:(r={})=>o.path(e,...t).get(g(r)),post:(r={})=>o.path(e,...t).post(g(r)),put:(r={})=>o.path(e,...t).put(g(r)),patch:(r={})=>o.path(e,...t).patch(g(r)),delete:(r={})=>o.path(e,...t).delete(g(r)),head:(r={})=>o.path(e,...t).head(g(r)),options:(r={})=>o.path(e,...t).options(g(r)),trace:(r={})=>o.path(e,...t).trace(g(r))});return{path:a,pathUnchecked:a,pipeline:o.pipeline}}(v,t,(0,o.Tt)(A,["apiVersion"]));S.pipeline.removePolicy({name:"ApiVersionPolicy"});let _=null!=(y=r.apiVersion)?y:"7.6";return S.pipeline.addPolicy({name:"ClientApiVersionPolicy",sendRequest:(e,t)=>{let r=new URL(e.url);return r.searchParams.get("api-version")||(e.url=`${e.url}${Array.from(r.searchParams.keys()).length>0?"&":"?"}api-version=${_}`),t(e)}}),Object.assign(Object.assign({},S),{apiVersion:_})}(e,t,Object.assign(Object.assign({},r),{userAgentOptions:{userAgentPrefix:a}})),this.pipeline=this._client.pipeline}restoreSecret(e,t={requestOptions:{}}){return N(this._client,e,t)}backupSecret(e,t={requestOptions:{}}){return D(this._client,e,t)}recoverDeletedSecret(e,t={requestOptions:{}}){return L(this._client,e,t)}purgeDeletedSecret(e,t={requestOptions:{}}){return $(this._client,e,t)}getDeletedSecret(e,t={requestOptions:{}}){return q(this._client,e,t)}getDeletedSecrets(e={requestOptions:{}}){return function(e,t={requestOptions:{}}){return A(e,()=>(function(e,t={requestOptions:{}}){var r,n;let i=k("/deletedsecrets{?api%2Dversion,maxresults}",{"api%2Dversion":e.apiVersion,maxresults:null==t?void 0:t.maxresults},{allowReserved:null==(r=null==t?void 0:t.requestOptions)?void 0:r.skipUrlEncoding});return e.path(i).get(Object.assign(Object.assign({},f(t)),{headers:Object.assign({accept:"application/json"},null==(n=t.requestOptions)?void 0:n.headers)}))})(e,t),F,["200"],{itemName:"value",nextLinkName:"nextLink"})}(this._client,e)}getSecretVersions(e,t={requestOptions:{}}){return function(e,t,r={requestOptions:{}}){return A(e,()=>(function(e,t,r={requestOptions:{}}){var n,i;let o=k("/secrets/{secret-name}/versions{?api%2Dversion,maxresults}",{"secret-name":t,"api%2Dversion":e.apiVersion,maxresults:null==r?void 0:r.maxresults},{allowReserved:null==(n=null==r?void 0:r.requestOptions)?void 0:n.skipUrlEncoding});return e.path(o).get(Object.assign(Object.assign({},f(r)),{headers:Object.assign({accept:"application/json"},null==(i=r.requestOptions)?void 0:i.headers)}))})(e,t,r),B,["200"],{itemName:"value",nextLinkName:"nextLink"})}(this._client,e,t)}getSecrets(e={requestOptions:{}}){return function(e,t={requestOptions:{}}){return A(e,()=>(function(e,t={requestOptions:{}}){var r,n;let i=k("/secrets{?api%2Dversion,maxresults}",{"api%2Dversion":e.apiVersion,maxresults:null==t?void 0:t.maxresults},{allowReserved:null==(r=null==t?void 0:t.requestOptions)?void 0:r.skipUrlEncoding});return e.path(i).get(Object.assign(Object.assign({},f(t)),{headers:Object.assign({accept:"application/json"},null==(n=t.requestOptions)?void 0:n.headers)}))})(e,t),H,["200"],{itemName:"value",nextLinkName:"nextLink"})}(this._client,e)}getSecret(e,t,r={requestOptions:{}}){return z(this._client,e,t,r)}updateSecret(e,t,r,n={requestOptions:{}}){return K(this._client,e,t,r,n)}deleteSecret(e,t={requestOptions:{}}){return W(this._client,e,t)}setSecret(e,t,r={requestOptions:{}}){return J(this._client,e,t,r)}}let Z=["authorization","authorization_url","resource","scope","tenantId","claims","error"];function ee(e){let t=e.split(/,? +/).reduce((e,t)=>{if(t.match(/\w="/)){let[r,...n]=t.split("=");if(Z.includes(r))return Object.assign(Object.assign({},e),{[r]:n.join("=").slice(1,-1)})}return e},{});if(t.authorization)try{let e=new URL(t.authorization).pathname.substring(1);e&&(t.tenantId=e)}catch(e){throw Error(`The challenge authorization URI '${t.authorization}' is invalid.`)}return t}let et={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};async function er(e,t,r){async function n(){if(Date.now()<r)try{return await e()}catch(e){return null}{let t=await e();if(null===t)throw Error("Failed to refresh access token.");return t}}let i=await n();for(;null===i;)await (0,h.cb)(t),i=await n();return i}let en=(0,a.KV)("keyvault-common");function ei(e){let t=function(e){let t=e.split("/")[3];return Object.assign({sourceId:e},function(e,t){let r;if("string"!=typeof e||!(e=e.trim()))throw Error("Invalid collection argument");if("string"!=typeof t||!(t=t.trim()))throw Error("Invalid identifier argument");try{r=new URL(t)}catch(r){throw Error(`Invalid ${e} identifier: ${t}. Not a valid URI`)}let n=(r.pathname||"").split("/");if(3!==n.length&&4!==n.length)throw Error(`Invalid ${e} identifier: ${t}. Bad number of segments: ${n.length}`);if(e!==n[1])throw Error(`Invalid ${e} identifier: ${t}. segment [1] should be "${e}", found "${n[1]}"`);let i=`${r.protocol}//${r.host}`;return{vaultUrl:i,name:n[2],version:4===n.length?n[3]:void 0}}(t,e))}(e.id),r=e.attributes;delete e.attributes;let n={value:e.value,name:t.name,properties:{expiresOn:null==r?void 0:r.expires,createdOn:null==r?void 0:r.created,updatedOn:null==r?void 0:r.updated,enabled:null==r?void 0:r.enabled,notBefore:null==r?void 0:r.notBefore,recoverableDays:null==r?void 0:r.recoverableDays,recoveryLevel:null==r?void 0:r.recoveryLevel,id:e.id,contentType:e.contentType,tags:e.tags,managed:e.managed,vaultUrl:t.vaultUrl,version:t.version,name:t.name,certificateKeyId:e.kid}};return e.recoveryId&&(n.properties.recoveryId=e.recoveryId,n.properties.scheduledPurgeDate=e.scheduledPurgeDate,n.properties.deletedOn=e.deletedDate,n.recoveryId=e.recoveryId,n.scheduledPurgeDate=e.scheduledPurgeDate,n.deletedOn=e.deletedDate),r&&(r.vaultUrl&&delete n.properties.vaultUrl,r.expires&&delete n.properties.expires,r.created&&delete n.properties.created,r.updated&&delete n.properties.updated),n}function eo(e,t,r){let n;return{async next(){null!=n||(n=e(Object.assign(Object.assign({},t),{maxresults:void 0})));let i=await n.next();return Object.assign(Object.assign({},i),{value:i.value&&r(i.value)})},[Symbol.asyncIterator](){return this},byPage(n){return(0,o.AQ)(this,arguments,function*(){var i,a,s,c;let l=e(Object.assign(Object.assign({},t),{maxresults:null==n?void 0:n.maxPageSize})).byPage(n);try{for(var u,d=!0,h=(0,o.xN)(l);!(i=(u=yield(0,o.N3)(h.next())).done);d=!0)c=u.value,d=!1,yield yield(0,o.N3)(c.map(r))}catch(e){a={error:e}}finally{try{!d&&!i&&(s=h.return)&&(yield(0,o.N3)(s.call(h)))}finally{if(a)throw a.error}}})}}}var ea=r(70436);let es="4.10.0",ec=(0,ea.y)({namespace:"Microsoft.KeyVault",packageName:"@azure/keyvault-secrets",packageVersion:es}),el=(0,a.KV)("core-lro"),eu=["succeeded","canceled","failed"];function ed(e){let{state:t,stateProxy:r,isOperationError:n}=e;return e=>{throw n(e)&&(r.setError(t,e),r.setFailed(t)),e}}function eh(e){let{state:t,stateProxy:r,status:n,isDone:i,processResult:o,getError:a,response:s,setErrorAsResult:c}=e;switch(n){case"succeeded":r.setSucceeded(t);break;case"failed":{let e=null==a?void 0:a(s),n="";if(e){let{code:t,message:r}=function(e){let t=e.message,r=e.code,n=e;for(;n.innererror;)r=(n=n.innererror).code,t=function(e,t){let r=e;return"."!==r.slice(-1)&&(r+="."),r+" "+t}(t,n.message);return{code:r,message:t}}(e);n=`. ${t}. ${r}`}let i=`The long-running operation has failed${n}`;r.setError(t,Error(i)),r.setFailed(t),el.warning(i);break}case"canceled":r.setCanceled(t)}((null==i?void 0:i(s,t))||void 0===i&&["succeeded","canceled"].concat(c?[]:["failed"]).includes(n))&&r.setResult(t,function(e){let{processResult:t,response:r,state:n}=e;return t?t(r,n):r}({response:s,state:t,processResult:o}))}async function ep(e){let{poll:t,state:r,stateProxy:n,operationLocation:i,getOperationStatus:o,getResourceLocation:a,isOperationError:s,options:c}=e,l=await t(i,c).catch(ed({state:r,stateProxy:n,isOperationError:s})),u=o(l,r);if(el.verbose(`LRO: Status:
	Polling from: ${r.config.operationLocation}
	Operation status: ${u}
	Polling status: ${eu.includes(u)?"Stopped":"Running"}`),"succeeded"===u){let e=a(l,r);if(void 0!==e)return{response:await t(e).catch(ed({state:r,stateProxy:n,isOperationError:s})),status:u}}return{response:l,status:u}}function ef(e){let{status:t,statusCode:r}=e;if("string"!=typeof t&&void 0!==t)throw Error(`Polling was unsuccessful. Expected status to have a string value or no value but it has instead: ${t}. This doesn't necessarily indicate the operation has failed. Check your Azure subscription or resource status for more information.`);switch(null==t?void 0:t.toLocaleLowerCase()){case void 0:return eg(r);case"succeeded":return"succeeded";case"failed":return"failed";case"running":case"accepted":case"started":case"canceling":case"cancelling":return"running";case"canceled":case"cancelled":return"canceled";default:return el.verbose(`LRO: unrecognized operation status: ${t}`),t}}function eg(e){return 202===e?"running":e<300?"succeeded":"failed"}function em({flatResponse:e,rawResponse:t},r){var n,i;return null!=(n=null==e?void 0:e[r])?n:null==(i=t.body)?void 0:i[r]}class ey extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,ey.prototype)}}class ev extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,ev.prototype)}}class eE{constructor(e){this.resolveOnUnsuccessful=!1,this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.promise.catch(()=>{})}async startPolling(e={}){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(e),await this.delay()}async pollOnce(e={}){this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)})),this.processUpdatedState()}fireProgress(e){for(let t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e)}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);let t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}processUpdatedState(){if(this.operation.state.error&&(this.stopped=!0,!this.resolveOnUnsuccessful))throw this.reject(this.operation.state.error),this.operation.state.error;if(this.operation.state.isCancelled&&(this.stopped=!0,!this.resolveOnUnsuccessful)){let e=new ev("Operation was canceled");throw this.reject(e),e}this.isDone()&&this.resolve&&this.resolve(this.getResult())}async pollUntilDone(e={}){return this.stopped&&this.startPolling(e).catch(this.reject),this.processUpdatedState(),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter(t=>t!==e)}}isDone(){let e=this.operation.state;return!!(e.isCompleted||e.isCancelled||e.error)}stopPolling(){!this.stopped&&(this.stopped=!0,this.reject&&this.reject(new ey("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.cancelPromise){if(e.abortSignal)throw Error("A cancel request is currently pending")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}}class eT extends eE{constructor(){super(...arguments),this.intervalInMs=2e3}async delay(){return(0,h.cb)(this.intervalInMs)}}class eb{constructor(e,t={}){this.state=e,this.cancelMessage="",t.cancelMessage&&(this.cancelMessage=t.cancelMessage)}async update(){throw Error("Operation not supported.")}async cancel(){throw Error(this.cancelMessage)}toString(){return JSON.stringify({state:this.state})}}class eA extends eb{constructor(e,t,r={}){super(e,{cancelMessage:"Canceling the deletion of a secret is not supported."}),this.state=e,this.client=t,this.operationOptions=r}deleteSecret(e,t={}){return ec.withSpan("DeleteSecretPoller.deleteSecret",t,async t=>ei(await this.client.deleteSecret(e,t)))}getDeletedSecret(e,t={}){return ec.withSpan("DeleteSecretPoller.getDeletedSecret",t,async t=>ei(await this.client.getDeletedSecret(e,t)))}async update(e={}){let t=this.state,{name:r}=t;if(e.abortSignal&&(this.operationOptions.abortSignal=e.abortSignal),!t.isStarted){let e=await this.deleteSecret(r,this.operationOptions);t.isStarted=!0,t.result=e,e.properties.recoveryId||(t.isCompleted=!0)}if(!t.isCompleted)try{t.result=await this.getDeletedSecret(r,this.operationOptions),t.isCompleted=!0}catch(e){if(403===e.statusCode)t.isCompleted=!0;else if(404!==e.statusCode)throw t.error=e,t.isCompleted=!0,e}return this}}class eC extends eT{constructor(e){let t,{client:r,name:n,operationOptions:i,intervalInMs:o=2e3,resumeFrom:a}=e;a&&(t=JSON.parse(a).state),super(new eA(Object.assign(Object.assign({},t),{name:n}),r,i)),this.intervalInMs=o}}class eS extends eb{constructor(e,t,r={}){super(e,{cancelMessage:"Canceling the recovery of a deleted secret is not supported."}),this.state=e,this.client=t,this.options=r}getSecret(e,t={}){return ec.withSpan("RecoverDeletedSecretPoller.getSecret",t,async r=>ei(await this.client.getSecret(e,t&&t.version?t.version:"",r)))}recoverDeletedSecret(e,t={}){return ec.withSpan("RecoverDeletedSecretPoller.recoverDeletedSecret",t,async t=>ei(await this.client.recoverDeletedSecret(e,t)))}async update(e={}){let t=this.state,{name:r}=t;if(e.abortSignal&&(this.options.abortSignal=e.abortSignal),!t.isStarted){try{t.result=(await this.getSecret(r,this.options)).properties,t.isCompleted=!0}catch(e){}t.isCompleted||(t.result=(await this.recoverDeletedSecret(r,this.options)).properties,t.isStarted=!0)}if(!t.isCompleted)try{t.result=(await this.getSecret(r,this.options)).properties,t.isCompleted=!0}catch(e){if(403===e.statusCode)t.isCompleted=!0;else if(404!==e.statusCode)throw t.error=e,t.isCompleted=!0,e}return this}}class e_ extends eT{constructor(e){let t,{client:r,name:n,operationOptions:i,intervalInMs:o=2e3,resumeFrom:a}=e;a&&(t=JSON.parse(a).state),super(new eS(Object.assign(Object.assign({},t),{name:n}),r,i)),this.intervalInMs=o}}class eI{constructor(e,t,r={}){var n,i;this.vaultUrl=e;let o=Object.assign(Object.assign({},r),{userAgentOptions:{userAgentPrefix:`${null!=(i=null==(n=r.userAgentOptions)?void 0:n.userAgentPrefix)?i:""} azsdk-js-keyvault-secrets/${es}`},apiVersion:r.serviceVersion||"7.6",loggingOptions:{logger:s.info,additionalAllowedHeaderNames:["x-ms-keyvault-region","x-ms-keyvault-network-info","x-ms-keyvault-service-version"]}});this.client=new Q(this.vaultUrl,t,o),this.client.pipeline.removePolicy({name:d.uQ}),this.client.pipeline.addPolicy(function(e,t={}){let{disableChallengeResourceVerification:r}=t,n={status:"none"},i=function(e,t){let r,n=null,i=null,o=Object.assign(Object.assign({},et),void 0),a={get isRefreshing(){return null!==n},get shouldRefresh(){var s;if(a.isRefreshing)return!1;if((null==i?void 0:i.refreshAfterTimestamp)&&i.refreshAfterTimestamp<Date.now())return!0;return(null!=(s=null==i?void 0:i.expiresOnTimestamp)?s:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return null===i||i.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(t,s){var c;return a.isRefreshing||(n=er(()=>e.getToken(t,s),o.retryIntervalInMs,null!=(c=null==i?void 0:i.expiresOnTimestamp)?c:Date.now()).then(e=>(n=null,i=e,r=s.tenantId,i)).catch(e=>{throw n=null,i=null,r=void 0,e})),n}return async(e,t)=>{let n=!!t.claims,o=r!==t.tenantId;return(n&&(i=null),o||n||a.mustRefresh)?c(e,t):(a.shouldRefresh&&c(e,t),i)}}(e);function o(e){return{abortSignal:e.abortSignal,requestOptions:{timeout:e.timeout>0?e.timeout:void 0},tracingOptions:e.tracingOptions}}async function a(e){let t=o(e);switch(n.status){case"none":n={status:"started",originalBody:e.body},e.body=null;break;case"started":break;case"complete":{let r=await i(n.scopes,Object.assign(Object.assign({},t),{enableCae:!0,tenantId:n.tenantId}));r&&e.headers.set("authorization",`Bearer ${r.token}`)}}}async function s(e,t,a){if(401!==t.status)return t;null===e.body&&"started"===n.status&&(e.body=n.originalBody);let s=o(e),c=t.headers.get("WWW-Authenticate");if(!c)return en.warning("keyVaultAuthentication policy encountered a 401 response without a corresponding WWW-Authenticate header. This is unexpected. Not handling the 401 response."),t;let l=ee(c),u=l.resource?l.resource+"/.default":l.scope;if(!u)return t;r||function(e,t){let r;try{r=new URL(e)}catch(t){throw Error(`The challenge contains invalid scope '${e}'`)}if(!new URL(t.url).hostname.endsWith(`.${r.hostname}`))throw Error(`The challenge resource '${r.hostname}' does not match the requested domain. Set disableChallengeResourceVerification to true in your client options to disable. See https://aka.ms/azsdk/blog/vault-uri for more information.`)}(u,e);let d=await i([u],Object.assign(Object.assign({},s),{enableCae:!0,tenantId:l.tenantId}));return d?(e.headers.set("Authorization",`Bearer ${d.token}`),n={status:"complete",scopes:[u],tenantId:l.tenantId},a(e)):t}async function c(e,t,r){if("complete"!==n.status||401!==t.status)return t;let a=o(e),s=t.headers.get("WWW-Authenticate");if(!s)return t;let{claims:c,error:l}=ee(s);if("insufficient_claims"!==l||void 0===c)return t;let u=atob(c),d=await i(n.scopes,Object.assign(Object.assign({},a),{enableCae:!0,tenantId:n.tenantId,claims:u}));return e.headers.set("Authorization",`Bearer ${d.token}`),r(e)}return{name:"keyVaultAuthenticationPolicy",sendRequest:async function(e,t){await a(e);let r=await t(e);return r=await s(e,r,t),r=await c(e,r,t)}}}(t,r),{}),this.client.pipeline.addPolicy({name:"ContentTypePolicy",sendRequest(e,t){var r;return(null!=(r=e.headers.get("Content-Type"))?r:"").startsWith("application/json")&&e.headers.set("Content-Type","application/json"),t(e)}})}setSecret(e,t,r={}){let{enabled:n,notBefore:i,expiresOn:a,tags:s}=r,c=(0,o.Tt)(r,["enabled","notBefore","expiresOn","tags"]);return ec.withSpan("SecretClient.setSecret",c,async r=>ei(await this.client.setSecret(e,{value:t,secretAttributes:{enabled:n,notBefore:i,expires:a},tags:s},r)))}async beginDeleteSecret(e,t={}){let r=new eC(Object.assign(Object.assign({name:e,client:this.client},t),{operationOptions:t}));return await r.poll(),r}async updateSecretProperties(e,t,r={}){let{enabled:n,notBefore:i,expiresOn:a,tags:s}=r,c=(0,o.Tt)(r,["enabled","notBefore","expiresOn","tags"]);return ec.withSpan("SecretClient.updateSecretProperties",c,async r=>ei(await this.client.updateSecret(e,t,{secretAttributes:{enabled:n,notBefore:i,expires:a},tags:s},r)).properties)}getSecret(e,t={}){return ec.withSpan("SecretClient.getSecret",t,async r=>ei(await this.client.getSecret(e,t&&t.version?t.version:"",r)))}getDeletedSecret(e,t={}){return ec.withSpan("SecretClient.getDeletedSecret",t,async t=>ei(await this.client.getDeletedSecret(e,t)))}purgeDeletedSecret(e,t={}){return ec.withSpan("SecretClient.purgeDeletedSecret",t,async t=>{await this.client.purgeDeletedSecret(e,t)})}async beginRecoverDeletedSecret(e,t={}){let r=new e_(Object.assign(Object.assign({name:e,client:this.client},t),{operationOptions:t}));return await r.poll(),r}backupSecret(e,t={}){return ec.withSpan("SecretClient.backupSecret",t,async t=>(await this.client.backupSecret(e,t)).value)}restoreSecretBackup(e,t={}){return ec.withSpan("SecretClient.restoreSecretBackup",t,async t=>ei(await this.client.restoreSecret({secretBundleBackup:e},t)).properties)}listPropertiesOfSecretVersions(e,t={}){return eo(t=>this.client.getSecretVersions(e,t),t,e=>ei(e).properties)}listPropertiesOfSecrets(e={}){return eo(this.client.getSecrets.bind(this.client),e,e=>ei(e).properties)}listDeletedSecrets(e={}){return eo(this.client.getDeletedSecrets.bind(this.client),e,ei)}}},87637:(e,t,r)=>{"use strict";let n=r(1776),i=r(3386);e.exports=(e,t,r)=>{let o=[],a=null,s=null,c=e.sort((e,t)=>i(e,t,r));for(let e of c)n(e,t,r)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);let l=[];for(let[e,t]of o)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");let u=l.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},88477:(e,t)=>{"use strict";function r(e,t){if(0===t.length)return 0;if(0===e.length||t.length>e.length)return -1;for(let r=0;r<=e.length-t.length;r++){let n=!0;for(let i=0;i<t.length;i++)if(e[r+i]!==t[i]){n=!1;break}if(n)return r}return -1}function n(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function i(e,t){let n=r(e,t);if(0===n)return e.subarray(t.length);if(!(n>-1))return e;{let r=new Uint8Array(e.length-t.length);return r.set(e.slice(0,n)),r.set(e.slice(n+t.length),n),r}}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{indexOfUint8Array:function(){return r},isEquivalentUint8Arrays:function(){return n},removeFromUint8Array:function(){return i}})},90141:(e,t,r)=>{"use strict";var n=r(64665);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},90372:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},91199:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=r(74932)},91571:(e,t,r)=>{var n=r(79428),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},91680:(e,t,r)=>{"use strict";let n=r(46404),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(74450),{safeRe:a,t:s}=r(67548),c=r(65293),{compareIdentifiers:l}=r(42717);class u{constructor(e,t){if(t=c(t),e instanceof u)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return l(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return l(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},91777:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(32913).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},92541:(e,t,r)=>{let n=r(79737),i=r(35834),o=r(27878),a=r(36028),s=r(42769),c=r(41207),l=r(24853),u=r(94005),{KeyObject:d,createSecretKey:h,createPublicKey:p}=r(55511),f=["RS256","RS384","RS512"],g=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],y=["HS256","HS384","HS512"];l&&(f.splice(f.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,l){let v,E,T;if("function"!=typeof r||l||(l=r,r={}),r||(r={}),r=Object.assign({},r),v=l||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return v(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return v(new n("nonce must be a non-empty string"));if(void 0!==r.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof r.allowInvalidAsymmetricKeyTypes)return v(new n("allowInvalidAsymmetricKeyTypes must be a boolean"));let b=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return v(new n("jwt must be provided"));if("string"!=typeof e)return v(new n("jwt must be a string"));let A=e.split(".");if(3!==A.length)return v(new n("jwt malformed"));try{E=a(e,{complete:!0})}catch(e){return v(e)}if(!E)return v(new n("invalid token"));let C=E.header;if("function"==typeof t){if(!l)return v(new n("verify must be called asynchronous if secret or public key is provided as a callback"));T=t}else T=function(e,r){return r(null,t)};return T(C,function(t,a){let l;if(t)return v(new n("error in secret or public key callback: "+t.message));let T=""!==A[2].trim();if(!T&&a)return v(new n("jwt signature is required"));if(T&&!a)return v(new n("secret or public key must be provided"));if(!T&&!r.algorithms)return v(new n('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=a&&!(a instanceof d))try{a=p(a)}catch(e){try{a=h("string"==typeof a?Buffer.from(a):a)}catch(e){return v(new n("secretOrPublicKey is not valid key material"))}}if(r.algorithms||("secret"===a.type?r.algorithms=y:["rsa","rsa-pss"].includes(a.asymmetricKeyType)?r.algorithms=m:"ec"===a.asymmetricKeyType?r.algorithms=g:r.algorithms=f),-1===r.algorithms.indexOf(E.header.alg))return v(new n("invalid algorithm"));if(C.alg.startsWith("HS")&&"secret"!==a.type)return v(new n(`secretOrPublicKey must be a symmetric key when using ${C.alg}`));if(/^(?:RS|PS|ES)/.test(C.alg)&&"public"!==a.type)return v(new n(`secretOrPublicKey must be an asymmetric key when using ${C.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{c(C.alg,a)}catch(e){return v(e)}try{l=u.verify(e,E.header.alg,a)}catch(e){return v(e)}if(!l)return v(new n("invalid signature"));let S=E.payload;if(void 0!==S.nbf&&!r.ignoreNotBefore){if("number"!=typeof S.nbf)return v(new n("invalid nbf value"));if(S.nbf>b+(r.clockTolerance||0))return v(new i("jwt not active",new Date(1e3*S.nbf)))}if(void 0!==S.exp&&!r.ignoreExpiration){if("number"!=typeof S.exp)return v(new n("invalid exp value"));if(b>=S.exp+(r.clockTolerance||0))return v(new o("jwt expired",new Date(1e3*S.exp)))}if(r.audience){let e=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(S.aud)?S.aud:[S.aud]).some(function(t){return e.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return v(new n("jwt audience invalid. expected: "+e.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&S.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(S.iss)))return v(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&S.sub!==r.subject)return v(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&S.jti!==r.jwtid)return v(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&S.nonce!==r.nonce)return v(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof S.iat)return v(new n("iat required when maxAge is specified"));let e=s(r.maxAge,S.iat);if(void 0===e)return v(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(b>=e+(r.clockTolerance||0))return v(new o("maxAge exceeded",new Date(1e3*e)))}return!0===r.complete?v(null,{header:C,payload:S,signature:E.signature}):v(null,S)})}},93609:e=>{function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,o,a,s=typeof e;if("string"===s&&e.length>0){var c=e;if(!((c=String(c)).length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(l){var u=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*u;case"weeks":case"week":case"w":return 6048e5*u;case"days":case"day":case"d":return 864e5*u;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*u;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*u;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:break}}}return}if("number"===s&&isFinite(e)){return r.long?(i=Math.abs(n=e))>=864e5?t(n,i,864e5,"day"):i>=36e5?t(n,i,36e5,"hour"):i>=6e4?t(n,i,6e4,"minute"):i>=1e3?t(n,i,1e3,"second"):n+" ms":(a=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":a>=36e5?Math.round(o/36e5)+"h":a>=6e4?Math.round(o/6e4)+"m":a>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},94005:(e,t,r)=>{var n=r(32825),i=r(83473);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new n(e)},t.createVerify=function(e){return new i(e)}},95006:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,a=null;function s(...e){if(!s.enabled)return;let n=Number(new Date);s.diff=n-(r||n),s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";i++;let o=t.formatters[n];if("function"==typeof o){let t=e[i];r=o.call(s,t),e.splice(i,1),i--}return r}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let r of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(let r of t.skips)if(i(e,r))return!1;for(let r of t.names)if(i(e,r))return!0;return!1},t.humanize=r(93609),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},95832:(e,t,r)=>{"use strict";let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i)if(!!t.loose===e.loose)return e;else e=e.value;l("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){let t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=i;let o=r(65293),{safeRe:a,t:s}=r(67548),c=r(57807),l=r(46404),u=r(91680),d=r(39335)},96908:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var n=r(15529),i=r(70767),o=r(11882),a=r(23598);let s=(0,o.KV)("ts-http-runtime retryPolicy");function c(e,t={maxRetries:a.o}){let r=t.logger||s;return{name:"retryPolicy",async sendRequest(o,s){var c,l;let u,d,h=-1;t:for(;;){h+=1,u=void 0,d=void 0;try{r.info(`Retry ${h}: Attempting to send request`,o.requestId),u=await s(o),r.info(`Retry ${h}: Received a response from request`,o.requestId)}catch(e){if(r.error(`Retry ${h}: Received an error from request`,o.requestId),d=e,!e||"RestError"!==d.name)throw e;u=d.response}if(null==(c=o.abortSignal)?void 0:c.aborted)throw r.error(`Retry ${h}: Request aborted.`),new i.l;if(h>=(null!=(l=t.maxRetries)?l:a.o)){if(r.info(`Retry ${h}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),d)throw d;if(u)return u;throw Error("Maximum retries reached with no response or error to throw")}for(let t of(r.info(`Retry ${h}: Processing ${e.length} retry strategies.`),e)){let e=t.logger||r;e.info(`Retry ${h}: Processing retry strategy ${t.name}.`);let i=t.retry({retryCount:h,response:u,responseError:d});if(i.skipStrategy){e.info(`Retry ${h}: Skipped.`);continue}let{errorToThrow:a,retryAfterInMs:s,redirectTo:c}=i;if(a)throw e.error(`Retry ${h}: Retry strategy ${t.name} throws error:`,a),a;if(s||0===s){e.info(`Retry ${h}: Retry strategy ${t.name} retries after ${s}`),await (0,n.c)(s,void 0,{abortSignal:o.abortSignal});continue t}if(c){e.info(`Retry ${h}: Retry strategy ${t.name} redirects to ${c}`),o.url=c;continue t}}if(d)throw r.info("None of the retry strategies could work with the received error. Throwing it."),d;if(u)return r.info("None of the retry strategies could work with the received response. Returning it."),u}}}}},97683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},97748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{atLeastOneTask:function(){return i},scheduleImmediate:function(){return n},scheduleOnNextTick:function(){return r},waitAtLeastOneReactRenderTask:function(){return o}});let r=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},n=e=>{setImmediate(e)};function i(){return new Promise(e=>n(e))}function o(){return new Promise(e=>setImmediate(e))}},98742:(e,t,r)=>{"use strict";let n=r(39335);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},98892:(e,t,r)=>{"use strict";let n=r(91680);e.exports=(e,t)=>new n(e,t).major}};